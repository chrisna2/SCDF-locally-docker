<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Sabby Anandan, Marius Bogoevici, Eric Bottard, Mark Fisher, Ilayaperumal Gopinathan, Gunnar Hillert, Mark Pollack, Patrick Peralta, Glenn Renfro, Thomas Risberg, Dave Syer, David Turanski, Janne Valkealahti, Oleg Zhurakousky, Jay Bryant, Vinicius Carvalho, Chris Schaefer, Damien Vitrac, Christian Tzolov, Claudia Bressi, Chris Bono, Corneil du Plesis">
<title>Spring Cloud Data Flow Reference Guide</title>
<link rel="stylesheet" href="css/site.css">
<script src="js/setup.js"></script><script defer src="js/site.js"></script>

</head>
<body class="book">
<div id="main-container" class="container">
  <div id="main" class="contained">
    <div id="doc" class="doc">
<div id="header">
<h1>Spring Cloud Data Flow Reference Guide</h1>
</div>
<div id="content">
<h1 id="preface" class="sect0"><a class="anchor" href="#preface"></a>Preface</h1>
<div class="sect1">
<h2 id="dataflow-documentation-about"><a class="anchor" href="#dataflow-documentation-about"></a>1. About the documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copies of this document may be made for your own use and for
distribution to others, provided that you do not charge any fee for such copies and
further provided that each copy contains this Copyright Notice, whether distributed in
print or electronically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dataflow-documentation-getting-help"><a class="anchor" href="#dataflow-documentation-getting-help"></a>2. Getting help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having trouble with Spring Cloud Data Flow? We would like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question. We monitor <a href="https://stackoverflow.com">stackoverflow.com</a> for questions
tagged with <a href="https://stackoverflow.com/tags/spring-cloud-dataflow"><code>spring-cloud-dataflow</code></a>.</p>
</li>
<li>
<p>Report bugs with Spring Cloud Data Flow at <a href="https://github.com/spring-cloud/spring-cloud-dataflow/issues" class="bare">github.com/spring-cloud/spring-cloud-dataflow/issues</a>.</p>
</li>
<li>
<p>Review the latest release notes at <a href="https://github.com/spring-cloud/spring-cloud-dataflow/releases" class="bare">github.com/spring-cloud/spring-cloud-dataflow/releases</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All of Spring Cloud Data Flow is open source, including the documentation! If you find problems
with the docs or if you just want to improve them, please <a href="https://github.com/spring-cloud/spring-cloud-dataflow">get involved</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="overview" class="sect0"><a class="anchor" href="#overview"></a>Overview</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Microservice based Streaming and Batch data processing for Cloud Foundry and Kubernetes.</p>
</div>
<div class="paragraph">
<p>Spring Cloud Data Flow provides tools to create complex topologies for streaming and batch data pipelines. The data pipelines consist of Spring Boot apps, built using the Spring Cloud Stream or Spring Cloud Task microservice frameworks.</p>
</div>
<div class="paragraph">
<p>Spring Cloud Data Flow supports a range of data processing use cases, from ETL to import/export, event streaming, and predictive analytics.</p>
</div>
</div>
</div>
<h1 id="getting-started" class="sect0"><a class="anchor" href="#getting-started"></a>Getting Started</h1>
<div class="openblock partintro">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This version of Spring Cloud Data Flow provides: <a href="#appendix-boot3">Spring Boot 3.x Support</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started-local"><a class="anchor" href="#getting-started-local"></a>3. Getting Started - Local</h2>
<div class="sectionbody">

<div class="paragraph">
<p>This section covers how to get started with Spring Cloud Data Flow running locally on Docker Compose. See the <a href="https://dataflow.spring.io/docs/installation/local/">Local Machine</a> section of the microsite for more information on installing Spring Cloud Data Flow on Docker Compose.</p>
</div>
<div class="paragraph">
<p>Once you have the Data Flow server installed locally, you probably want to get started with orchestrating the deployment of readily available pre-built applications into coherent streaming or batch data pipelines. We have guides to help you get started with both <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch</a> processing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started-cloudfoundry"><a class="anchor" href="#getting-started-cloudfoundry"></a>4. Getting Started - Cloud Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers how to get started with Spring Cloud Data Flow on Cloud Foundry. See the <a href="https://dataflow.spring.io/docs/installation/cloudfoundry/">Cloud Foundry</a> section of the microsite for more information on installing Spring Cloud Data Flow on Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>Once you have the Data Flow server installed on Cloud Foundry, you probably want to get started with orchestrating the deployment of readily available pre-built applications into coherent streaming or batch data pipelines. We have guides to help you get started with both <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch</a> processing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started-kubernetes"><a class="anchor" href="#getting-started-kubernetes"></a>5. Getting Started - Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers how to get started with Spring Cloud Data Flow running locally on Kubernetes. See <a href="#configuration-carvel">Deployment using Carvel</a> and  <a href="#configuration-kubernetes">Configuration - Kubernetes</a> for more information on installing Spring Cloud Data Flow on Kubernetes.</p>
</div>
<div class="paragraph">
<p>Once you have the Data Flow server installed on Kubernetes, you probably want to get started with orchestrating the deployment of readily available pre-built applications into a coherent streaming or batch data pipelines. We have guides to help you get started with both <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch</a> processing.</p>
</div>
<div class="paragraph">
<p>We have prepared scripts to simplify the process of creating a local Minikube or Kind cluster, or to use a remote cluster like GKE or TKG, more at <a href="#local-k8s-development">Configure Kubernetes for Local Development</a></p>
</div>
</div>
</div>
<h1 id="applications" class="sect0"><a class="anchor" href="#applications"></a>Applications</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>A selection of pre-built applications for various data integration and processing scenarios to facilitate learning and experimentation can be found <a href="https://docs.spring.io/stream-applications/docs/current/reference/html/index.html#applications/">here</a>.</p>
</div>
</div>
</div>
<h1 id="architecture" class="sect0"><a class="anchor" href="#architecture"></a>Architecture</h1>
<div class="sect1">
<h2 id="arch-intro"><a class="anchor" href="#arch-intro"></a>6. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow simplifies the development and deployment of applications that are focused on data-processing use cases.</p>
</div>
<div class="paragraph">
<p>The <a href="https://dataflow.spring.io/docs/concepts/architecture/">Architecture</a> section of the microsite describes Data Flow&#8217;s architecture.</p>
</div>
</div>
</div>
<h1 id="configuration" class="sect0"><a class="anchor" href="#configuration"></a>Configuration</h1>
<div class="sect1">
<h2 id="configuration-maven"><a class="anchor" href="#configuration-maven"></a>7. Maven Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Dataflow supports referencing artifacts via Maven (<code>maven:</code>).
If you want to override specific Maven configuration properties (remote repositories, proxies, and others) or run the Data Flow Server behind a proxy,
you need to specify those properties as command-line arguments when you start the Data Flow Server, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-server-2.11.0.jar --spring.config.additional-location=/home/joe/maven.yml</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding command assumes a <code>maven.yaml</code> similar to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">maven:
  localRepository: mylocal
  remote-repositories:
    repo1:
      url: https://repo1
      auth:
        username: user1
        password: pass1
      snapshot-policy:
        update-policy: daily
        checksum-policy: warn
      release-policy:
        update-policy: never
        checksum-policy: fail
    repo2:
      url: https://repo2
      policy:
        update-policy: always
        checksum-policy: fail
  proxy:
    host: proxy1
    port: "9010"
    auth:
      username: proxyuser1
      password: proxypass1</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>By default, the protocol is set to <code>http</code>. You can omit the auth properties if the proxy does not need a username and password. Also, by default, the maven <code>localRepository</code> is set to <code>${user.home}/.m2/repository/</code>.
As shown in the preceding example, you can specify the remote repositories along with their authentication (if needed). If the remote repositories are behind a proxy, you can specify the proxy properties, as shown in the preceding example.</p>
</div>
<div class="paragraph">
<p>You can specify the repository policies for each remote repository configuration, as shown in the preceding example.
The key <code>policy</code> is applicable to both the <code>snapshot</code> and the <code>release</code> repository policies.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/apache/maven-resolver/blob/master/maven-resolver-api/src/main/java/org/eclipse/aether/repository/RepositoryPolicy.java">Repository Policies</a> topic for the list of
supported repository policies.</p>
</div>
<div class="paragraph">
<p>As these are Spring Boot <code>@ConfigurationProperties</code> you need to specify by adding them to the <code>SPRING_APPLICATION_JSON</code> environment variable. The following example shows how the JSON is structured:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ SPRING_APPLICATION_JSON='
{
  "maven": {
    "local-repository": null,
    "remote-repositories": {
      "repo1": {
        "url": "https://repo1",
        "auth": {
          "username": "repo1user",
          "password": "repo1pass"
        }
      },
      "repo2": {
        "url": "https://repo2"
      }
    },
    "proxy": {
      "host": "proxyhost",
      "port": 9018,
      "auth": {
        "username": "proxyuser",
        "password": "proxypass"
      }
    }
  }
}
'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wagon"><a class="anchor" href="#_wagon"></a>7.1. Wagon</h3>
<div class="paragraph">
<p>There is a limited support for using <code>Wagon</code> transport with Maven. Currently, this
exists to support <em>preemptive</em> authentication with <code>http</code>-based repositories
and needs to be enabled manually.</p>
</div>
<div class="paragraph">
<p>Wagon-based <code>http</code> transport is enabled by setting the <code>maven.use-wagon</code> property
to <code>true</code>. Then you can enable <em>preemptive</em> authentication for each remote
repository. Configuration loosely follows the similar patterns found in
<a href="https://maven.apache.org/guides/mini/guide-http-settings.html">HttpClient HTTP Wagon</a>.
At the time of this writing, documentation in Maven&#8217;s own site is slightly misleading
and missing most of the possible configuration options.</p>
</div>
<div class="paragraph">
<p>The <code>maven.remote-repositories.&lt;repo&gt;.wagon.http</code> namespace contains all Wagon
<code>http</code> related settings, and the keys directly under it map to supported <code>http</code> methods&#8201;&#8212;&#8201;namely, <code>all</code>, <code>put</code>, <code>get</code> and <code>head</code>, as in Maven&#8217;s own configuration.
Under these method configurations, you can then set various options, such as
<code>use-preemptive</code>. A simpl <em>preemptive</em> configuration to send an auth
header with all requests to a specified remote repository would look like the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">maven:
  use-wagon: true
  remote-repositories:
    springRepo:
      url: https://repo.example.org
      wagon:
        http:
          all:
            use-preemptive: true
      auth:
        username: user
        password: password</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Instead of configuring <code>all</code> methods, you can tune settings for <code>get</code>
and <code>head</code> requests only, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">maven:
  use-wagon: true
  remote-repositories:
    springRepo:
      url: https://repo.example.org
      wagon:
        http:
          get:
            use-preemptive: true
          head:
            use-preemptive: true
            use-default-headers: true
            connection-timeout: 1000
            read-timeout: 1000
            headers:
              sample1: sample2
            params:
              http.socket.timeout: 1000
              http.connection.stalecheck: true
      auth:
        username: user
        password: password</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are settings for <code>use-default-headers</code>, <code>connection-timeout</code>,
<code>read-timeout</code>, request <code>headers</code>, and HttpClient <code>params</code>. For more about parameters,
see <a href="https://github.com/apache/maven-wagon/blob/master/wagon-providers/wagon-http-shared/src/main/java/org/apache/maven/wagon/shared/http/ConfigurationUtils.java">Wagon ConfigurationUtils</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-security"><a class="anchor" href="#configuration-security"></a>8. Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the Data Flow server is unsecured and runs on an unencrypted HTTP connection.
You can secure your REST endpoints as well as the Data Flow Dashboard by enabling HTTPS
and requiring clients to authenticate with <a href="https://oauth.net/2/">OAuth 2.0</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Appendix <a href="#appendix-identity-provider-azure">Azure</a> contains more information how to
setup <em>Azure Active Directory</em> integration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the REST endpoints (administration, management, and health) as well as the Dashboard UI do not require authenticated access.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While you can theoretically choose any OAuth provider in conjunction with
Spring Cloud Data Flow, we recommend using the
<a href="https://github.com/cloudfoundry/uaa">CloudFoundry User Account and Authentication (UAA) Server</a>.</p>
</div>
<div class="paragraph">
<p>Not only is the UAA OpenID certified and is used by Cloud Foundry, but you can
also use it in local stand-alone deployment scenarios. Furthermore, the UAA not
only provides its own user store, but it also provides comprehensive LDAP integration.</p>
</div>
<div class="sect3">
<h4 id="configuration-local-security-enabling-https"><a class="anchor" href="#configuration-local-security-enabling-https"></a>8.1. Enabling HTTPS</h4>
<div class="paragraph">
<p>By default, the dashboard, management, and health endpoints use HTTP as a transport.
You can switch to HTTPS by adding a certificate to your configuration in
<code>application.yml</code>, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">server:
  port: 8443                                         <i class="conum" data-value="1"></i><b>(1)</b>
  ssl:
    key-alias: yourKeyAlias                          <i class="conum" data-value="2"></i><b>(2)</b>
    key-store: path/to/keystore                      <i class="conum" data-value="3"></i><b>(3)</b>
    key-store-password: yourKeyStorePassword         <i class="conum" data-value="4"></i><b>(4)</b>
    key-password: yourKeyPassword                    <i class="conum" data-value="5"></i><b>(5)</b>
    trust-store: path/to/trust-store                 <i class="conum" data-value="6"></i><b>(6)</b>
    trust-store-password: yourTrustStorePassword     <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As the default port is <code>9393</code>, you may choose to change the port to a more common HTTPs-typical port.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The alias (or name) under which the key is stored in the keystore.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The path to the keystore file. You can also specify classpath resources, by using the classpath prefix - for example: <code>classpath:path/to/keystore</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The password of the keystore.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The password of the key.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The path to the truststore file. You can also specify classpath resources, by using the classpath prefix - for example: <code>classpath:path/to/trust-store</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The password of the trust store.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If HTTPS is enabled, it completely replaces HTTP as the protocol over
which the REST endpoints and the Data Flow Dashboard interact. Plain HTTP requests
fail. Therefore, make sure that you configure your Shell accordingly.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="configuration-security-self-signed-certificates"><a class="anchor" href="#configuration-security-self-signed-certificates"></a>Using Self-Signed Certificates</h5>
<div class="paragraph">
<p>For testing purposes or during development, it might be convenient to create self-signed certificates.
To get started, execute the following command to create a certificate:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ keytool -genkey -alias dataflow -keyalg RSA -keystore dataflow.keystore \
          -validity 3650 -storetype JKS \
          -dname "CN=localhost, OU=Spring, O=Pivotal, L=Kailua-Kona, ST=HI, C=US"  <i class="conum" data-value="1"></i><b>(1)</b>
          -keypass dataflow -storepass dataflow</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>CN</code> is the important parameter here. It should match the domain you are trying to access - for example, <code>localhost</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Then add the following lines to your <code>application.yml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">server:
  port: 8443
  ssl:
    enabled: true
    key-alias: dataflow
    key-store: "/your/path/to/dataflow.keystore"
    key-store-type: jks
    key-store-password: dataflow
    key-password: dataflow</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This is all you need to do for the Data Flow Server. Once you start the server,
you should be able to access it at <code><a href="https://localhost:8443/" class="bare">localhost:8443/</a></code>.
As this is a self-signed certificate, you should hit a warning in your browser, which
you need to ignore.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<em>Never</em> use self-signed certificates in production.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-self-signed-certificates-shell"><a class="anchor" href="#configuration-security-self-signed-certificates-shell"></a>Self-Signed Certificates and the Shell</h5>
<div class="paragraph">
<p>By default, self-signed certificates are an issue for the shell, and additional steps
are necessary to make the shell work with self-signed certificates. Two options
are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the self-signed certificate to the JVM truststore.</p>
</li>
<li>
<p>Skip certificate validation.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_adding_the_self_signed_certificate_to_the_jvm_truststore"><a class="anchor" href="#_adding_the_self_signed_certificate_to_the_jvm_truststore"></a>Adding the Self-signed Certificate to the JVM Truststore</h6>
<div class="paragraph">
<p>In order to use the JVM truststore option, you need to
export the previously created certificate from the keystore, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ keytool -export -alias dataflow -keystore dataflow.keystore -file dataflow_cert -storepass dataflow</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Next, you need to create a truststore that the shell can use, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ keytool -importcert -keystore dataflow.truststore -alias dataflow -storepass dataflow -file dataflow_cert -noprompt</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Now you are ready to launch the Data Flow Shell with the following JVM arguments:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -Djavax.net.ssl.trustStorePassword=dataflow \
       -Djavax.net.ssl.trustStore=/path/to/dataflow.truststore \
       -Djavax.net.ssl.trustStoreType=jks \
       -jar spring-cloud-dataflow-shell-2.11.0.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you run into trouble establishing a connection over SSL, you can enable additional
logging by using and setting the <code>javax.net.debug</code> JVM argument to <code>ssl</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Do not forget to target the Data Flow Server with the following command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; dataflow config server --uri https://localhost:8443/</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_skipping_certificate_validation"><a class="anchor" href="#_skipping_certificate_validation"></a>Skipping Certificate Validation</h6>
<div class="paragraph">
<p>Alternatively, you can also bypass the certification validation by providing the
optional <code>--dataflow.skip-ssl-validation=true</code> command-line parameter.</p>
</div>
<div class="paragraph">
<p>If you set this command-line parameter, the shell accepts any (self-signed) SSL
certificate.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If possible, you should avoid using this option. Disabling the trust manager
defeats the purpose of SSL and makes your application vulnerable to man-in-the-middle attacks.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-oauth2"><a class="anchor" href="#configuration-security-oauth2"></a>8.2. Authentication by using OAuth 2.0</h4>
<div class="paragraph">
<p>To support authentication and authorization, Spring Cloud Data
Flow uses <a href="https://oauth.net/2/">OAuth 2.0</a>.
It lets you integrate Spring Cloud Data Flow into Single Sign On (SSO)
environments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of Spring Cloud Data Flow 2.0, OAuth2 is the only mechanism
for providing authentication and authorization.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following OAuth2 Grant Types are used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Authorization Code</strong>: Used for the GUI (browser) integration. Visitors are redirected to your OAuth Service for authentication</p>
</li>
<li>
<p><strong>Password</strong>: Used by the shell (and the REST integration), so visitors can log in with username and password</p>
</li>
<li>
<p><strong>Client Credentials</strong>: Retrieves an access token directly from your OAuth provider and passes it to the Data Flow server by using the Authorization HTTP header</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, Spring Cloud Data Flow uses opaque tokens and not transparent
tokens (JWT).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can access the REST endpoints in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Basic authentication</strong>, which uses the <em>Password Grant Type</em> to authenticate with your OAuth2 service</p>
</li>
<li>
<p><strong>Access token</strong>, which uses the Client <em>Credentials Grant Type</em></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you set up authentication, you really should enable HTTPS
as well, especially in production environments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can turn on OAuth2 authentication by adding the following to <code>application.yml</code> or by setting
environment variables. The following example shows the minimal setup needed for
<a href="https://github.com/cloudfoundry/uaa">CloudFoundry User Account and Authentication (UAA) Server</a>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  security:
    oauth2:                                                           <i class="conum" data-value="1"></i><b>(1)</b>
      client:
        registration:
          uaa:                                                        <i class="conum" data-value="2"></i><b>(2)</b>
            client-id: myclient
            client-secret: mysecret
            redirect-uri: '{baseUrl}/login/oauth2/code/{registrationId}'
            authorization-grant-type: authorization_code
            scope:
            - openid                                                  <i class="conum" data-value="3"></i><b>(3)</b>
        provider:
          uaa:
            jwk-set-uri: http://uaa.local:8080/uaa/token_keys
            token-uri: http://uaa.local:8080/uaa/oauth/token
            user-info-uri: http://uaa.local:8080/uaa/userinfo    <i class="conum" data-value="4"></i><b>(4)</b>
            user-name-attribute: user_name                            <i class="conum" data-value="5"></i><b>(5)</b>
            authorization-uri: http://uaa.local:8080/uaa/oauth/authorize
      resourceserver:
        opaquetoken:
          introspection-uri: http://uaa.local:8080/uaa/introspect <i class="conum" data-value="6"></i><b>(6)</b>
          client-id: dataflow
          client-secret: dataflow</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Providing this property activates OAuth2 security.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The provider ID. You can specify more than one provider.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>As the UAA is an OpenID provider, you must at least specify the <code>openid</code> scope.
If your provider also provides additional scopes to control the role assignments,
you must specify those scopes here as well.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>OpenID endpoint. Used to retrieve user information such as the username. Mandatory.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The JSON property of the response that contains the username.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Used to introspect and validate a directly passed-in token. Mandatory.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>You can verify that basic authentication is working properly by using curl, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -u myusername:mypassword http://localhost:9393/ -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As a result, you should see a list of available REST endpoints.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When you access the Root URL with a web browser and
security enabled, you are redirected to the Dashboard UI. To see the
list of REST endpoints, specify the <code>application/json</code> <code>Accept</code> header. Also be sure
to add the <code>Accept</code> header by using tools such as
<a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en">Postman</a> (Chrome)
or <a href="https://addons.mozilla.org/en-GB/firefox/addon/restclient/">RESTClient</a> (Firefox).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Besides Basic Authentication, you can also provide an access token, to
access the REST API. To do so, retrieve an
OAuth2 Access Token from your OAuth2 provider and pass that access token to
the REST Api by using the <strong>Authorization</strong> HTTP header, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ curl -H "Authorization: Bearer &lt;ACCESS_TOKEN&gt;" http://localhost:9393/ -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-customizing-authorization"><a class="anchor" href="#configuration-security-customizing-authorization"></a>8.3. Customizing Authorization</h4>
<div class="paragraph">
<p>The preceding content mostly deals with authentication&#8201;&#8212;&#8201;that is, how to assess
the identity of the user. In this section, we discuss the available
<strong>authorization</strong> options&#8201;&#8212;&#8201;that is, who can do what.</p>
</div>
<div class="paragraph">
<p>The authorization rules are defined in <code>dataflow-server-defaults.yml</code> (part of
the Spring Cloud Data Flow Core module).</p>
</div>
<div class="paragraph">
<p>Because the determination of security roles is environment-specific,
Spring Cloud Data Flow, by default, assigns all roles to authenticated OAuth2
users. The <code>DefaultDataflowAuthoritiesExtractor</code> class is used for that purpose.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can have Spring Cloud Data Flow map OAuth2 scopes to Data Flow roles by
setting the boolean property <code>map-oauth-scopes</code> for your provider to <code>true</code> (the default is <code>false</code>).
For example, if your provider&#8217;s ID is <code>uaa</code>, the property would be
<code>spring.cloud.dataflow.security.authorization.provider-role-mappings.uaa.map-oauth-scopes</code>.</p>
</div>
<div class="sect4">
<h5 id="configuration-security-role-mapping"><a class="anchor" href="#configuration-security-role-mapping"></a>Role Mappings</h5>
<div class="paragraph">
<p>By default all roles are assigned to users that login to Spring Cloud Data Flow.
However, you can set the property:</p>
</div>
<div class="paragraph">
<p><code>spring.cloud.dataflow.security.authorization.provider-role-mappings.uaa.map-oauth-scopes: true</code></p>
</div>
<div class="paragraph">
<p>This will instruct the underlying <code>DefaultAuthoritiesExtractor</code> to map
OAuth scopes to the respective authorities. The following scopes are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scope <code>dataflow.create</code> maps to the <code>CREATE</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.deploy</code> maps to the <code>DEPLOY</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.destroy</code> maps to the <code>DESTROY</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.manage</code> maps to the <code>MANAGE</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.modify</code> maps to the <code>MODIFY</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.schedule</code> maps to the <code>SCHEDULE</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.view</code> maps to the <code>VIEW</code> role</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally you can also map arbitrary scopes to each of the Data Flow roles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      security:
        authorization:
          provider-role-mappings:
            uaa:
              map-oauth-scopes: true                                    <i class="conum" data-value="1"></i><b>(1)</b>
              role-mappings:
                ROLE_CREATE: dataflow.create                            <i class="conum" data-value="2"></i><b>(2)</b>
                ROLE_DEPLOY: dataflow.deploy
                ROLE_DESTROY: dataflow.destoy
                ROLE_MANAGE: dataflow.manage
                ROLE_MODIFY: dataflow.modify
                ROLE_SCHEDULE: dataflow.schedule
                ROLE_VIEW: dataflow.view</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enables explicit mapping support from OAuth scopes to Data Flow roles</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When role mapping support is enabled, you must provide a mapping for
all 7 Spring Cloud Data Flow roles <strong>ROLE_CREATE</strong>, <strong>ROLE_DEPLOY</strong>, <strong>ROLE_DESTROY</strong>, <strong>ROLE_MANAGE</strong>, <strong>ROLE_MODIFY</strong>, <strong>ROLE_SCHEDULE</strong>, <strong>ROLE_VIEW</strong>.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can assign an OAuth scope to multiple Spring Cloud Data Flow roles, giving you flexible regarding the granularity of your authorization configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-group-mapping"><a class="anchor" href="#configuration-security-group-mapping"></a>Group Mappings</h5>
<div class="paragraph">
<p>Mapping roles from scopes has its own problems as it may not be always possible
to change those in a given identity provider. If it&#8217;s possible to define group claims
in a token returned from an identity provider, these can be used as well to
map into server roles.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      security:
        authorization:
          provider-role-mappings:
            uaa:
              map-oauth-scopes: false
              map-group-claims: true
              group-claim: roles
              group-mappings:
                ROLE_CREATE: my-group-id
                ROLE_DEPLOY: my-group-id
                ROLE_DESTROY: my-group-id
                ROLE_MANAGE: my-group-id
                ROLE_MODIFY: my-group-id
                ROLE_SCHEDULE: my-group-id
                ROLE_VIEW: my-group-id</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also customize the role-mapping behavior by providing your own Spring bean definition that
extends Spring Cloud Data Flow&#8217;s <code>AuthorityMapper</code> interface. In that case,
the custom bean definition takes precedence over the default one provided by
Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>The default scheme uses seven roles to protect the <a href="#api-guide">REST endpoints</a>
that Spring Cloud Data Flow exposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ROLE_CREATE</strong>: For anything that involves creating, such as creating streams or tasks</p>
</li>
<li>
<p><strong>ROLE_DEPLOY</strong>: For deploying streams or launching tasks</p>
</li>
<li>
<p><strong>ROLE_DESTROY</strong>: For anything that involves deleting streams, tasks, and so on.</p>
</li>
<li>
<p><strong>ROLE_MANAGE</strong>: For Boot management endpoints</p>
</li>
<li>
<p><strong>ROLE_MODIFY</strong>: For anything that involves mutating the state of the system</p>
</li>
<li>
<p><strong>ROLE_SCHEDULE</strong>: For scheduling related operation (such as scheduling a task)</p>
</li>
<li>
<p><strong>ROLE_VIEW</strong>: For anything that relates to retrieving state</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As mentioned earlier in this section, all authorization-related default settings are specified
in <code>dataflow-server-defaults.yml</code>, which is part of the Spring Cloud Data Flow Core
Module. Nonetheless, you can override those settings, if desired&#8201;&#8212;&#8201;for example,
in <code>application.yml</code>. The configuration takes the form of a YAML list (as some
rules may have precedence over others). Consequently, you need to copy and paste
the whole list and tailor it to your needs (as there is no way to merge lists).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Always refer to your version of the <code>application.yml</code> file, as the following snippet may be outdated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default rules are as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      security:
        authorization:
          enabled: true
          loginUrl: "/"
          permit-all-paths: "/authenticate,/security/info,/assets/**,/dashboard/logout-success-oauth.html,/favicon.ico"
          rules:
            # About

            - GET    /about                          =&gt; hasRole('ROLE_VIEW')

            # Audit

            - GET /audit-records                     =&gt; hasRole('ROLE_VIEW')
            - GET /audit-records/**                  =&gt; hasRole('ROLE_VIEW')

            # Boot Endpoints

            - GET /management/**                  =&gt; hasRole('ROLE_MANAGE')

            # Apps

            - GET    /apps                           =&gt; hasRole('ROLE_VIEW')
            - GET    /apps/**                        =&gt; hasRole('ROLE_VIEW')
            - DELETE /apps/**                        =&gt; hasRole('ROLE_DESTROY')
            - POST   /apps                           =&gt; hasRole('ROLE_CREATE')
            - POST   /apps/**                        =&gt; hasRole('ROLE_CREATE')
            - PUT    /apps/**                        =&gt; hasRole('ROLE_MODIFY')

            # Completions

            - GET /completions/**                    =&gt; hasRole('ROLE_VIEW')

            # Job Executions &amp; Batch Job Execution Steps &amp;&amp; Job Step Execution Progress

            - GET    /jobs/executions                =&gt; hasRole('ROLE_VIEW')
            - PUT    /jobs/executions/**             =&gt; hasRole('ROLE_MODIFY')
            - GET    /jobs/executions/**             =&gt; hasRole('ROLE_VIEW')
            - GET    /jobs/thinexecutions            =&gt; hasRole('ROLE_VIEW')

            # Batch Job Instances

            - GET    /jobs/instances                 =&gt; hasRole('ROLE_VIEW')
            - GET    /jobs/instances/*               =&gt; hasRole('ROLE_VIEW')

            # Running Applications

            - GET    /runtime/streams                =&gt; hasRole('ROLE_VIEW')
            - GET    /runtime/streams/**             =&gt; hasRole('ROLE_VIEW')
            - GET    /runtime/apps                   =&gt; hasRole('ROLE_VIEW')
            - GET    /runtime/apps/**                =&gt; hasRole('ROLE_VIEW')

            # Stream Definitions

            - GET    /streams/definitions            =&gt; hasRole('ROLE_VIEW')
            - GET    /streams/definitions/*          =&gt; hasRole('ROLE_VIEW')
            - GET    /streams/definitions/*/related  =&gt; hasRole('ROLE_VIEW')
            - POST   /streams/definitions            =&gt; hasRole('ROLE_CREATE')
            - DELETE /streams/definitions/*          =&gt; hasRole('ROLE_DESTROY')
            - DELETE /streams/definitions            =&gt; hasRole('ROLE_DESTROY')

            # Stream Deployments

            - DELETE /streams/deployments/*          =&gt; hasRole('ROLE_DEPLOY')
            - DELETE /streams/deployments            =&gt; hasRole('ROLE_DEPLOY')
            - POST   /streams/deployments/**         =&gt; hasRole('ROLE_MODIFY')
            - GET    /streams/deployments/**         =&gt; hasRole('ROLE_VIEW')

            # Stream Validations

            - GET /streams/validation/               =&gt; hasRole('ROLE_VIEW')
            - GET /streams/validation/*              =&gt; hasRole('ROLE_VIEW')

            # Stream Logs
            - GET /streams/logs/*                    =&gt; hasRole('ROLE_VIEW')

            # Task Definitions

            - POST   /tasks/definitions              =&gt; hasRole('ROLE_CREATE')
            - DELETE /tasks/definitions/*            =&gt; hasRole('ROLE_DESTROY')
            - GET    /tasks/definitions              =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/definitions/*            =&gt; hasRole('ROLE_VIEW')

            # Task Executions

            - GET    /tasks/executions               =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/executions/*             =&gt; hasRole('ROLE_VIEW')
            - POST   /tasks/executions               =&gt; hasRole('ROLE_DEPLOY')
            - POST   /tasks/executions/*             =&gt; hasRole('ROLE_DEPLOY')
            - DELETE /tasks/executions/*             =&gt; hasRole('ROLE_DESTROY')

            # Task Schedules

            - GET    /tasks/schedules                =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/schedules/*              =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/schedules/instances      =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/schedules/instances/*    =&gt; hasRole('ROLE_VIEW')
            - POST   /tasks/schedules                =&gt; hasRole('ROLE_SCHEDULE')
            - DELETE /tasks/schedules/*              =&gt; hasRole('ROLE_SCHEDULE')

            # Task Platform Account List */

            - GET    /tasks/platforms                =&gt; hasRole('ROLE_VIEW')

            # Task Validations

            - GET    /tasks/validation/               =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/validation/*              =&gt; hasRole('ROLE_VIEW')

            # Task Logs
            - GET /tasks/logs/*                       =&gt; hasRole('ROLE_VIEW')

            # Tools

            - POST   /tools/**                       =&gt; hasRole('ROLE_VIEW')</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The format of each line is the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>HTTP_METHOD URL_PATTERN '=&gt;' SECURITY_ATTRIBUTE</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP_METHOD is one HTTP method (such as PUT or GET), capital case.</p>
</li>
<li>
<p>URL_PATTERN is an Ant-style URL pattern.</p>
</li>
<li>
<p>SECURITY_ATTRIBUTE is a SpEL expression. See <a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#el-access">Expression-Based Access Control</a>.</p>
</li>
<li>
<p>Each of those is separated by one or whitespace characters (spaces, tabs, and so on).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Be mindful that the above is a YAML list, not a map (thus the use of '-' dashes
at the start of each line) that lives under the <code>spring.cloud.dataflow.security.authorization.rules</code> key.</p>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-authorization-local-shell-and-dashboard"><a class="anchor" href="#configuration-security-authorization-local-shell-and-dashboard"></a>Authorization&#8201;&#8212;&#8201;Shell and Dashboard Behavior</h5>
<div class="paragraph">
<p>When security is enabled, the dashboard and the shell are role-aware,
meaning that, depending on the assigned roles, not all functionality may be visible.</p>
</div>
<div class="paragraph">
<p>For instance, shell commands for which the user does not have the necessary roles
are marked as unavailable.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, the shell&#8217;s <code>help</code> command lists commands that are unavailable.
Please track the following issue: <a href="https://github.com/spring-projects/spring-shell/issues/115" class="bare">github.com/spring-projects/spring-shell/issues/115</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Conversely, for the Dashboard, the UI does not show pages or page elements for
which the user is not authorized.</p>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-securing-management-endpoints"><a class="anchor" href="#configuration-security-securing-management-endpoints"></a>Securing the Spring Boot Management Endpoints</h5>
<div class="paragraph">
<p>When security is enabled, the
<a href="https://docs.spring.io/spring-boot/docs/2.7.15/reference/htmlsingle/#actuator.monitoring">Spring Boot HTTP Management Endpoints</a>
are secured in the same way as the other REST endpoints. The management REST endpoints
are available under <code>/management</code> and require the <code>MANAGEMENT</code> role.</p>
</div>
<div class="paragraph">
<p>The default configuration in <code>dataflow-server-defaults.yml</code> is as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">management:
  endpoints:
    web:
      base-path: /management
  security:
    roles: MANAGE</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Currently, you should not customize the default management path.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-uaa-authentication"><a class="anchor" href="#configuration-security-uaa-authentication"></a>8.4. Setting up UAA Authentication</h4>
<div class="paragraph">
<p>For local deployment scenarios, we recommend using the <a href="https://github.com/cloudfoundry/uaa">CloudFoundry User
Account and Authentication (UAA) Server</a>, which is <a href="https://openid.net/certification/">OpenID certified</a>.
While the UAA is used by <a href="https://www.cloudfoundry.org/">Cloud Foundry</a>,
it is also a fully featured stand alone OAuth2 server with enterprise features, such as
<a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md">LDAP integration</a>.</p>
</div>
<div class="sect4">
<h5 id="_requirements"><a class="anchor" href="#_requirements"></a>Requirements</h5>
<div class="paragraph">
<p>You need to check out, build and run UAA. To do so, make sure that you:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use Java 8.</p>
</li>
<li>
<p>Have <a href="https://git-scm.com/">Git</a> installed.</p>
</li>
<li>
<p>Have the <a href="https://github.com/cloudfoundry/cf-uaac">CloudFoundry UAA Command Line Client</a> installed.</p>
</li>
<li>
<p>Use a different host name for UAA when running on the same machine&#8201;&#8212;&#8201;for example, <code><a href="http://uaa/" class="bare">uaa/</a></code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you run into issues installing <em>uaac</em>, you may have to set the <code>GEM_HOME</code> environment
variable:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">export GEM_HOME="$HOME/.gem"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You should also ensure that <code>~/.gem/gems/cf-uaac-4.2.0/bin</code> has been added to your path.</p>
</div>
</div>
<div class="sect4">
<h5 id="_prepare_uaa_for_jwt"><a class="anchor" href="#_prepare_uaa_for_jwt"></a>Prepare UAA for JWT</h5>
<div class="paragraph">
<p>As the UAA is an OpenID provider and uses JSON Web Tokens (JWT), it needs to have
a private key for signing those JWTs:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">openssl genrsa -out signingkey.pem 2048
openssl rsa -in signingkey.pem -pubout -out verificationkey.pem
export JWT_TOKEN_SIGNING_KEY=$(cat signingkey.pem)
export JWT_TOKEN_VERIFICATION_KEY=$(cat verificationkey.pem)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Later, once the UAA is started, you can see the keys when you access <code><a href="http://uaa:8080/uaa/token_keys" class="bare">uaa:8080/uaa/token_keys</a></code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here, the <code>uaa</code> in the URL <code><a href="http://uaa:8080/uaa/token_keys" class="bare">uaa:8080/uaa/token_keys</a></code> is the hostname.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_download_and_start_uaa"><a class="anchor" href="#_download_and_start_uaa"></a>Download and Start UAA</h5>
<div class="paragraph">
<p>To download and install UAA, run the following commands:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">git clone https://github.com/pivotal/uaa-bundled.git
cd uaa-bundled
./mvnw clean install
java -jar target/uaa-bundled-1.0.0.BUILD-SNAPSHOT.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The configuration of the UAA is driven by a YAML file <code>uaa.yml</code>, or you can script the configuration
using the UAA Command Line Client:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">uaac target http://uaa:8080/uaa
uaac token client get admin -s adminsecret
uaac client add dataflow \
  --name dataflow \
  --secret dataflow \
  --scope cloud_controller.read,cloud_controller.write,openid,password.write,scim.userids,sample.create,sample.view,dataflow.create,dataflow.deploy,dataflow.destroy,dataflow.manage,dataflow.modify,dataflow.schedule,dataflow.view \
  --authorized_grant_types password,authorization_code,client_credentials,refresh_token \
  --authorities uaa.resource,dataflow.create,dataflow.deploy,dataflow.destroy,dataflow.manage,dataflow.modify,dataflow.schedule,dataflow.view,sample.view,sample.create\
  --redirect_uri http://localhost:9393/login \
  --autoapprove openid

uaac group add "sample.view"
uaac group add "sample.create"
uaac group add "dataflow.view"
uaac group add "dataflow.create"

uaac user add springrocks -p mysecret --emails <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="166566647f78716479757d655665797b73667a7775733875797b">[email&#160;protected]</a>
uaac user add vieweronly -p mysecret --emails <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b0ddc2c6d9d5c7d5c2f0c3dfddd5c0dcd1d3d59ed3dfdd">[email&#160;protected]</a>

uaac member add "sample.view" springrocks
uaac member add "sample.create" springrocks
uaac member add "dataflow.view" springrocks
uaac member add "dataflow.create" springrocks
uaac member add "sample.view" vieweronly</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding script sets up the dataflow client as well as two users:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User <em>springrocks</em> has have both scopes: <code>sample.view</code> and <code>sample.create</code>.</p>
</li>
<li>
<p>User <em>vieweronly</em> has only one scope: <code>sample.view</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once added, you can quickly double-check that the UAA has the users created:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -v -d"username=springrocks&amp;password=mysecret&amp;client_id=dataflow&amp;grant_type=password" -u "dataflow:dataflow" http://uaa:8080/uaa/oauth/token -d 'token_format=opaque'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding command should produce output similar to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">*   Trying 127.0.0.1...
* TCP_NODELAY set
* Connected to uaa (127.0.0.1) port 8080 (#0)
* Server auth using Basic with user 'dataflow'
&gt; POST /uaa/oauth/token HTTP/1.1
&gt; Host: uaa:8080
&gt; Authorization: Basic ZGF0YWZsb3c6ZGF0YWZsb3c=
&gt; User-Agent: curl/7.54.0
&gt; Accept: */*
&gt; Content-Length: 97
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
* upload completely sent off: 97 out of 97 bytes
&lt; HTTP/1.1 200
&lt; Cache-Control: no-store
&lt; Pragma: no-cache
&lt; X-XSS-Protection: 1; mode=block
&lt; X-Frame-Options: DENY
&lt; X-Content-Type-Options: nosniff
&lt; Content-Type: application/json;charset=UTF-8
&lt; Transfer-Encoding: chunked
&lt; Date: Thu, 31 Oct 2019 21:22:59 GMT
&lt;
* Connection #0 to host uaa left intact
{"access_token":"0329c8ecdf594ee78c271e022138be9d","token_type":"bearer","id_token":"eyJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAvdWFhL3Rva2VuX2tleXMiLCJraWQiOiJsZWdhY3ktdG9rZW4ta2V5IiwidHlwIjoiSldUIn0.eyJzdWIiOiJlZTg4MDg4Ny00MWM2LTRkMWQtYjcyZC1hOTQ4MmFmNGViYTQiLCJhdWQiOlsiZGF0YWZsb3ciXSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDkwL3VhYS9vYXV0aC90b2tlbiIsImV4cCI6MTU3MjYwMDE3OSwiaWF0IjoxNTcyNTU2OTc5LCJhbXIiOlsicHdkIl0sImF6cCI6ImRhdGFmbG93Iiwic2NvcGUiOlsib3BlbmlkIl0sImVtYWlsIjoic3ByaW5ncm9ja3NAc29tZXBsYWNlLmNvbSIsInppZCI6InVhYSIsIm9yaWdpbiI6InVhYSIsImp0aSI6IjAzMjljOGVjZGY1OTRlZTc4YzI3MWUwMjIxMzhiZTlkIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImNsaWVudF9pZCI6ImRhdGFmbG93IiwiY2lkIjoiZGF0YWZsb3ciLCJncmFudF90eXBlIjoicGFzc3dvcmQiLCJ1c2VyX25hbWUiOiJzcHJpbmdyb2NrcyIsInJldl9zaWciOiJlOTkyMDQxNSIsInVzZXJfaWQiOiJlZTg4MDg4Ny00MWM2LTRkMWQtYjcyZC1hOTQ4MmFmNGViYTQiLCJhdXRoX3RpbWUiOjE1NzI1NTY5Nzl9.bqYvicyCPB5cIIu_2HEe5_c7nSGXKw7B8-reTvyYjOQ2qXSMq7gzS4LCCQ-CMcb4IirlDaFlQtZJSDE-_UsM33-ThmtFdx--TujvTR1u2nzot4Pq5A_ThmhhcCB21x6-RNNAJl9X9uUcT3gKfKVs3gjE0tm2K1vZfOkiGhjseIbwht2vBx0MnHteJpVW6U0pyCWG_tpBjrNBSj9yLoQZcqrtxYrWvPHaa9ljxfvaIsOnCZBGT7I552O1VRHWMj1lwNmRNZy5koJFPF7SbhiTM8eLkZVNdR3GEiofpzLCfoQXrr52YbiqjkYT94t3wz5C6u1JtBtgc2vq60HmR45bvg","refresh_token":"6ee95d017ada408697f2d19b04f7aa6c-r","expires_in":43199,"scope":"scim.userids openid sample.create cloud_controller.read password.write cloud_controller.write sample.view","jti":"0329c8ecdf594ee78c271e022138be9d"}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>By using the <code>token_format</code> parameter, you can request the token to be either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>opaque</p>
</li>
<li>
<p>jwt</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-local"><a class="anchor" href="#configuration-local"></a>9. Configuration - Local</h2>
<div class="sectionbody">

<div class="sect2">
<h3 id="configuration-local-enable-disable-specific-features"><a class="anchor" href="#configuration-local-enable-disable-specific-features"></a>9.1. Feature Toggles</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow Server offers specific set of features that can be enabled/disabled when launching. These features include all the lifecycle operations and REST endpoints (server and client implementations, including the shell and the UI) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams (requires Skipper)</p>
</li>
<li>
<p>Tasks</p>
</li>
<li>
<p>Task Scheduler</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>One can enable and disable these features by setting the following boolean properties when launching the Data Flow server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.cloud.dataflow.features.streams-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.tasks-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.schedules-enabled</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, stream (requires Skipper), and tasks are enabled and Task Scheduler is disabled by default.</p>
</div>
<div class="paragraph">
<p>The REST <code>/about</code> endpoint provides information on the features that have been enabled and disabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-java-home"><a class="anchor" href="#configuration-local-java-home"></a>9.2. Java Home</h3>
<div class="paragraph">
<p>When launching Spring Cloud Data Flow or Skipper Server they may need to know where Java 17 home is in order to successfully launch Spring Boot 3 applications.</p>
</div>
<div class="paragraph">
<p>By passing the following property you can provide the path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-{project-version}.jar \
    --spring.cloud.dataflow.defaults.boot3.local.javaHomePath=/usr/lib/jvm/java-17 \
    --spring.cloud.dataflow.defaults.boot2.local.javaHomePath=/usr/lib/jvm/java-1.8</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-rdbms"><a class="anchor" href="#configuration-local-rdbms"></a>9.3. Database</h3>
<div id="configuration-database-overview" class="paragraph">
<p>A relational database is used to store stream and task definitions as well as the state of executed tasks.
Spring Cloud Data Flow provides schemas for <strong>MariaDB</strong>, <strong>MySQL</strong>, <strong>Oracle</strong>, <strong>PostgreSQL</strong>, <strong>Db2</strong>, <strong>SQL Server</strong>, and <strong>H2</strong>. The schema is automatically created when the server starts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The JDBC drivers for <strong>MariaDB</strong>, <strong>MySQL</strong> (via the <em>MariaDB</em> driver), <strong>PostgreSQL</strong>, <strong>SQL Server</strong> are available without additional configuration. To use any other database you need to put the corresponding JDBC driver jar on the classpath of the server as described <a href="#add-custom-driver">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To configure a database the following properties must be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.datasource.url</code></p>
</li>
<li>
<p><code>spring.datasource.username</code></p>
</li>
<li>
<p><code>spring.datasource.password</code></p>
</li>
<li>
<p><code>spring.datasource.driver-class-name</code></p>
</li>
<li>
<p><code>spring.jpa.database-platform</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>username</code> and <code>password</code> are the same regardless of the database. However, the <code>url</code> and <code>driver-class-name</code> vary per database as follows.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="small">Database</span></th>
<th class="tableblock halign-left valign-top"><span class="small">spring.datasource.url</span></th>
<th class="tableblock halign-left valign-top"><span class="small">spring.datasource.driver-class-name</span></th>
<th class="tableblock halign-left valign-top"><span class="small">spring.jpa.database-platform</span></th>
<th class="tableblock halign-left valign-top"><span class="small">Driver included</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.0 - 10.1</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB10Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.2</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB102Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
<tr>                                                                                    
</tr>                                                                                   
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.3 - 10.5</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB103Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.6+</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB106Dialect</code></span><sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                  
<tr>                                                                                   
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MySQL 5.7</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mysql://${db-hostname}:${db-port}/${db-name}?permitMysqlScheme</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MySQL57Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MySQL 8.0+</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mysql://${db-hostname}:${db-port}/${db-name}?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;autoReconnect=true&amp;permitMysqlScheme</code></span><sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MySQL8Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>PostgresSQL</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:postgres://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.postgresql.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>SQL Server</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:sqlserver://${db-hostname}:${db-port};databasename=${db-name}&amp;encrypt=false</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>DB2</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:db2://${db-hostname}:${db-port}/{db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>com.ibm.db2.jcc.DB2Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>No</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Oracle</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:oracle:thin:@${db-hostname}:${db-port}/{db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>oracle.jdbc.OracleDriver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>No</code></span></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_h2"><a class="anchor" href="#_h2"></a>9.3.1. H2</h4>
<div class="paragraph">
<p>When no other database is configured then Spring Cloud Data Flow uses an embedded instance of the <strong>H2</strong> database as the default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>H2</strong> is good for development purposes but is not recommended for production use nor is it supported as an external mode.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_database_configuration"><a class="anchor" href="#_database_configuration"></a>9.3.2. Database configuration</h4>
<div class="paragraph">
<p>When running locally, the database properties can be passed as environment variables or command-line arguments to the Data Flow Server. For example, to start the server with MariaDB using command line arguments execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-2.11.0.jar \
    --spring.datasource.url=jdbc:mariadb://localhost:3306/mydb \
    --spring.datasource.username=user \
    --spring.datasource.password=pass \
    --spring.datasource.driver-class-name=org.mariadb.jdbc.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Likewise, to start the server with MariaDB using environment variables execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">SPRING_DATASOURCE_URL=jdbc:mariadb://localhost:3306/mydb
SPRING_DATASOURCE_USERNAME=user
SPRING_DATASOURCE_PASSWORD=pass
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.mariadb.jdbc.Driver
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.MariaDB106Dialect
java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-2.11.0.jar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-local-rdbms-schema"><a class="anchor" href="#configuration-local-rdbms-schema"></a>9.3.3. Schema Handling</h4>
<div class="paragraph">
<p>On default database schema is managed with <em>Flyway</em> which is convenient if it&#8217;s
possible to give enough permissions to a database user.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a description what happens when <em>Skipper</em> server is started:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Flyway checks if <code>flyway_schema_history</code> table exists.</p>
</li>
<li>
<p>Does a baseline(to version 1) if schema is not empty as <em>Dataflow</em> tables
may be in place if a shared DB is used.</p>
</li>
<li>
<p>If schema is empty, flyway assumes to start from a scratch.</p>
</li>
<li>
<p>Goes through all needed schema migrations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s a description what happens when <em>Dataflow</em> server is started:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Flyway checks if <code>flyway_schema_history_dataflow</code> table exists.</p>
</li>
<li>
<p>Does a baseline(to version 1) if schema is not empty as <em>Skipper</em> tables
may be in place if a shared DB is used.</p>
</li>
<li>
<p>If schema is empty, flyway assumes to start from a scratch.</p>
</li>
<li>
<p>Goes through all needed schema migrations.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We have schema ddl&#8217;s in our source code
<a href="https://github.com/spring-cloud/spring-cloud-dataflow/tree/master/spring-cloud-dataflow-server-core/src/main/resources/schemas">schemas</a>
which can be used manually if <em>Flyway</em> is disabled by using configuration
<code>spring.flyway.enabled=false</code>. This is a good option if company&#8217;s databases
are restricted and i.e. applications itself cannot create schemas.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-deployer"><a class="anchor" href="#configuration-local-deployer"></a>9.4. Deployer Properties</h3>
<div class="paragraph">
<p>You can use the following configuration properties of the <a href="https://github.com/spring-cloud/spring-cloud-deployer-local">Local deployer</a> to customize how Streams and Tasks are deployed.
When deploying using the Data Flow shell, you can use the syntax <code>deployer.&lt;appName&gt;.local.&lt;deployerPropertyName&gt;</code>. See below for an example shell usage.
These properties are also used when configuring <a href="#configuration-local-tasks">Local Task Platforms</a> in the Data Flow server and local platforms in Skipper for deploying Streams.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deployer Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>workingDirectoriesRoot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory in which all created processes will run and create log files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.io.tmpdir</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>envVarsToInherit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of regular expression patterns for environment variables that are passed to launched applications.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;"TMP", "LANG", "LANGUAGE", "LC_.*", "PATH", "SPRING_APPLICATION_JSON"&gt; on windows and &lt;"TMP", "LANG", "LANGUAGE", "LC_.*", "PATH"&gt; on Unix</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleteFilesOnExit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to delete created files and directories on JVM exit.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javaCmd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to run java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javaHomePath.&lt;bootVersion&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to JDK installation for launching applications depending on their registered Boot version. <code>bootVersion</code> should be <code>2</code> or <code>3</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System property <code>java.home</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shutdownTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of seconds to wait for app shutdown.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javaOpts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Java Options to pass to the JVM, e.g -Dtest=foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inheritLogging</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allow logging to be redirected to the output stream of the process that triggered child process.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>debugPort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port for remote debugging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As an example, to set Java options for the time application in the <code>ticktock</code> stream, use the following stream deployment properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --name ticktock --definition "time --server.port=9000 | log"
dataflow:&gt; stream deploy --name ticktock --properties "deployer.time.local.javaOpts=-Xmx2048m -Dtest=foo"</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a convenience, you can set the <code>deployer.memory</code> property to set the Java option <code>-Xmx</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream deploy --name ticktock --properties "deployer.time.memory=2048m"</code></pre>
</div>
</div>
<div class="paragraph">
<p>At deployment time, if you specify an <code>-Xmx</code> option in the <code>deployer.&lt;app&gt;.local.javaOpts</code> property in addition to a value of the <code>deployer.&lt;app&gt;.local.memory</code> option, the value in the <code>javaOpts</code> property has precedence.  Also, the <code>javaOpts</code> property set when deploying the application has precedence over the Data Flow Server&#8217;s <code>spring.cloud.deployer.local.javaOpts</code> property.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-logging"><a class="anchor" href="#configuration-local-logging"></a>9.5. Logging</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow <code>local</code> server is automatically configured to use <code>RollingFileAppender</code> for logging.
The logging configuration is located on the classpath contained in a file named <code>logback-spring.xml</code>.</p>
</div>
<div class="paragraph">
<p>By default, the log file is configured to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;property name="LOG_FILE" value="${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/spring-cloud-dataflow-server-local.log}"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>with the logback configuration for the <code>RollingPolicy</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;appender name="FILE"
			  class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
		&lt;file&gt;${LOG_FILE}&lt;/file&gt;
		&lt;rollingPolicy
				class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt;
			&lt;!-- daily rolling --&gt;
			&lt;fileNamePattern&gt;${LOG_FILE}.${LOG_FILE_ROLLING_FILE_NAME_PATTERN:-%d{yyyy-MM-dd}}.%i.gz&lt;/fileNamePattern&gt;
			&lt;maxFileSize&gt;${LOG_FILE_MAX_SIZE:-100MB}&lt;/maxFileSize&gt;
			&lt;maxHistory&gt;${LOG_FILE_MAX_HISTORY:-30}&lt;/maxHistory&gt;
			&lt;totalSizeCap&gt;${LOG_FILE_TOTAL_SIZE_CAP:-500MB}&lt;/totalSizeCap&gt;
		&lt;/rollingPolicy&gt;
		&lt;encoder&gt;
			&lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;
		&lt;/encoder&gt;
	&lt;/appender&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>java.io.tmpdir</code> for the current Spring Cloud Data Flow Server <code>local</code> server,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">jinfo &lt;pid&gt; | grep "java.io.tmpdir"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to change or override any of the properties <code>LOG_FILE</code>, <code>LOG_PATH</code>, <code>LOG_TEMP</code>, <code>LOG_FILE_MAX_SIZE</code>, <code>LOG_FILE_MAX_HISTORY</code> and <code>LOG_FILE_TOTAL_SIZE_CAP</code>, please set them as system properties.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-streams"><a class="anchor" href="#configuration-local-streams"></a>9.6. Streams</h3>
<div class="paragraph">
<p>Data Flow Server delegates to the Skipper server the management of the Stream&#8217;s lifecycle.  Set the configuration property <code>spring.cloud.skipper.client.serverUri</code> to the location of Skipper, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-server-2.11.0.jar --spring.cloud.skipper.client.serverUri=https://192.51.100.1:7577/api</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration of how streams are deployed and to which platforms, is done by configuration of <code>platform accounts</code> on the Skipper server.
See the documentation on <a href="https://docs.spring.io/spring-cloud-skipper/docs/current/reference/htmlsingle/#platforms">platforms</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-tasks"><a class="anchor" href="#configuration-local-tasks"></a>9.7. Tasks</h3>
<div class="paragraph">
<p>The Data Flow server is responsible for deploying Tasks.
Tasks that are launched by Data Flow write their state to the same database that is used by the Data Flow server.
For Tasks which are Spring Batch Jobs, the job and step execution data is also stored in this database.
As with streams launched by Skipper, Tasks can be launched to multiple platforms.
If no platform is defined, a platform named <code>default</code> is created using the default values of the class <a href="https://github.com/spring-cloud/spring-cloud-deployer-local/blob/master/spring-cloud-deployer-local/src/main/java/org/springframework/cloud/deployer/spi/local/LocalDeployerProperties.java">LocalDeployerProperties</a>, which is summarized in the table <a href="#configuration-local-deployer">Local Deployer Properties</a></p>
</div>
<div class="paragraph">
<p>To configure new platform accounts for the local platform, provide an entry under the <code>spring.cloud.dataflow.task.platform.local</code> section in your <code>application.yaml</code> file or via another Spring Boot supported mechanism.
In the following example, two local platform accounts named <code>localDev</code> and  <code>localDevDebug</code> are created.
The keys such as <code>shutdownTimeout</code> and <code>javaOpts</code> are local deployer properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      task:
        platform:
          local:
            accounts:
              localDev:
                shutdownTimeout: 60
                javaOpts: "-Dtest=foo -Xmx1024m"
              localDevDebug:
                javaOpts: "-Xdebug -Xmx2048m"</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By defining one platform as <code>default</code> allows you to skip using <code>platformName</code> where its use would otherwise be required.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When launching a task, pass the value of the platform account name using the task launch option <code>--platformName</code>  If you do not pass a value for <code>platformName</code>, the value <code>default</code> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying a task to multiple platforms, the configuration of the task needs to connect to the same database as the Data Flow Server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the Data Flow server that is running locally to deploy tasks to Cloud Foundry or Kubernetes.  See the sections on <a href="#configuration-cloudfoundry-tasks">Cloud Foundry Task Platform Configuration</a> and <a href="#configuration-kubernetes-tasks">Kubernetes Task Platform Configuration</a> for more information.</p>
</div>
<div class="paragraph">
<p>Detailed examples for launching and scheduling tasks across multiple platforms, are available in this section <a href="https://dataflow.spring.io/docs/recipes/multi-platform-deployment/">Multiple Platform Support for Tasks</a> on <a href="http://dataflow.spring.io" class="bare">dataflow.spring.io</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-security"><a class="anchor" href="#configuration-local-security"></a>9.8. Security Configuration</h3>
<div class="sect3">
<h4 id="configuration-local-security-cloudfoundry-uaa"><a class="anchor" href="#configuration-local-security-cloudfoundry-uaa"></a>9.8.1. CloudFoundry User Account and Authentication (UAA) Server</h4>
<div class="paragraph">
<p>See the <a href="#configuration-local-security-enabling-https">CloudFoundry User Account and Authentication (UAA) Server</a> configuration section for details how to configure for local testing and development.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-ldap-authentication"><a class="anchor" href="#configuration-security-ldap-authentication"></a>9.8.2. LDAP Authentication</h4>
<div class="paragraph">
<p>LDAP Authentication (Lightweight Directory Access Protocol) is indirectly
provided by Spring Cloud Data Flow using the UAA. The UAA itself provides
<a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md">comprehensive LDAP support</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While you may use your own OAuth2 authentication server, the LDAP support
documented here requires using the UAA as authentication server. For any
other provider, please consult the documentation for that particular provider.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The UAA supports authentication against an LDAP (Lightweight Directory Access Protocol)
server using the following modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#ldap-search-and-bind">Direct bind</a></p>
</li>
<li>
<p><a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#ldap-bind">Search and bind</a></p>
</li>
<li>
<p><a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#ldap-search-and-compare">Search and Compare</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When integrating with an external identity provider such as LDAP, authentication
within the UAA becomes <strong>chained</strong>. UAA first attempts to authenticate with
a user&#8217;s credentials against the UAA user store before the external provider,
LDAP. For more information, see
<a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#chained-authentication">Chained Authentication</a>
in the <em>User Account and Authentication LDAP Integration</em> GitHub documentation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="configuration-security-ldap-role-mapping"><a class="anchor" href="#configuration-security-ldap-role-mapping"></a>LDAP Role Mapping</h5>
<div class="paragraph">
<p>The OAuth2 authentication server (UAA), provides comprehensive support
for <a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#scopes">mapping LDAP groups to OAuth scopes</a>.</p>
</div>
<div class="paragraph">
<p>The following options exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ldap/ldap-groups-null.xml</code> No groups will be mapped</p>
</li>
<li>
<p><code>ldap/ldap-groups-as-scopes.xml</code> Group names will be retrieved from an LDAP attribute. E.g. <code>CN</code></p>
</li>
<li>
<p><code>ldap/ldap-groups-map-to-scopes.xml</code> Groups will be mapped to UAA groups using the external_group_mapping table</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These values are specified via the configuration property <code>ldap.groups.file controls</code>. Under the covers
these values reference a Spring XML configuration file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>During test and development it might be necessary to make frequent changes
to LDAP groups and users and see those reflected in the UAA. However, user
information is cached for the duration of the login. The following script
helps to retrieve the updated information quickly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/bin/bash
uaac token delete --all
uaac target http://localhost:8080/uaa
uaac token owner get cf &lt;username&gt; -s "" -p  &lt;password&gt;
uaac token client get admin -s adminsecret
uaac user get &lt;username&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-spring-security-oauth2-example"><a class="anchor" href="#configuration-security-spring-security-oauth2-example"></a>9.8.3. Spring Security OAuth2 Resource/Authorization Server Sample</h4>
<div class="paragraph">
<p>For local testing and development, you may also use the Resource and Authorization
Server support provided by
<a href="https://spring.io/projects/spring-security/">Spring Security</a>. It
allows you to easily create your own OAuth2 Server by configuring the SecurityFilterChain.</p>
</div>
<div class="paragraph">
<p>Samples can be found at:
<a href="https://docs.spring.io/spring-security/reference/samples.html">Spring Security Samples</a></p>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-shell-authentication"><a class="anchor" href="#configuration-security-shell-authentication"></a>9.8.4. Data Flow Shell Authentication</h4>
<div class="paragraph">
<p>When using the Shell, the credentials can either be provided via username and password
or by specifying a <em>credentials-provider</em> command. If your OAuth2 provider supports
the <em>Password</em> Grant Type you can start the <em>Data Flow Shell</em> with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-shell-2.11.0.jar         \
  --dataflow.uri=http://localhost:9393                                \   <i class="conum" data-value="1"></i><b>(1)</b>
  --dataflow.username=my_username                                     \   <i class="conum" data-value="2"></i><b>(2)</b>
  --dataflow.password=my_password                                     \   <i class="conum" data-value="3"></i><b>(3)</b>
  --skip-ssl-validation                                               \   <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Optional, defaults to <a href="http://localhost:9393" class="bare">localhost:9393</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Mandatory.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If the password is not provided, the user is prompted for it.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Optional, defaults to <code>false</code>, ignores certificate errors (when using self-signed certificates). Use cautiously!</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Keep in mind that when authentication for Spring Cloud Data Flow is enabled,
the underlying OAuth2 provider <strong>must</strong> support the <em>Password</em> OAuth2 Grant Type
if you want to use the Shell via username/password authentication.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From within the Data Flow Shell you can also provide credentials by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">server-unknown:&gt;dataflow config server                                \
  --uri  http://localhost:9393                                        \   <i class="conum" data-value="1"></i><b>(1)</b>
  --username myuser                                                   \   <i class="conum" data-value="2"></i><b>(2)</b>
  --password mysecret                                                 \   <i class="conum" data-value="3"></i><b>(3)</b>
  --skip-ssl-validation                                               \   <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Optional, defaults to <a href="http://localhost:9393" class="bare">localhost:9393</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Mandatory..</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If security is enabled, and the password is not provided, the user is prompted for it.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Optional, ignores certificate errors (when using self-signed certificates). Use cautiously!</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows a typical shell command to connect to and authenticate a Data
Flow Server:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-security-shell-target.png" alt="Target and Authenticate with the Data Flow Server from within the Shell">
</div>
<div class="title">Figure 1. Target and Authenticate with the Data Flow Server from within the Shell</div>
</div>
<div class="paragraph">
<p>Once successfully targeted, you should see the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;dataflow config info
dataflow config info

╔═══════════╤═══════════════════════════════════════╗
║Credentials│[username='my_username, password=****']║
╠═══════════╪═══════════════════════════════════════╣
║Result     │                                       ║
║Target     │http://localhost:9393                  ║
╚═══════════╧═══════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can specify the <em>credentials-provider</em> command in order to
pass-in a bearer token directly, instead of providing a username and password.
This works from within the shell or by providing the
<code>--dataflow.credentials-provider-command</code> command-line argument when starting the Shell.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the <em>credentials-provider</em> command, please be aware that your
specified command <strong>must</strong> return a <em>Bearer token</em> (Access Token prefixed with <em>Bearer</em>).
For instance, in Unix environments the following simplistic command can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-shell-2.11.0.jar \
  --dataflow.uri=http://localhost:9393 \
  --dataflow.credentials-provider-command="echo Bearer 123456789"</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_about_api_configuration"><a class="anchor" href="#_about_api_configuration"></a>9.9. About API Configuration</h3>
<div class="paragraph">
<p>The Spring Cloud Data Flow About Restful API result contains a display name,
version, and, if specified, a URL for each of the major dependencies that
comprise Spring Cloud Data Flow.  The result (if enabled) also contains the
sha1 and or sha256 checksum values for the shell dependency. The information
that is returned for each of the dependencies is configurable by setting the following
properties:</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 60%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-core.name</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Name to be used for the core</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-core.version</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Version to be used for the core</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-dashboard.name</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Name to be used for the dashboard</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-dashboard.version</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Version to be used for the dashboard</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-implementation.name</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Name to be used for the implementation</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-implementation.version</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Version to be used for the implementation</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.name</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Name to be used for the shell</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.version</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Version to be used for the shell</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.url</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">URL to be used for downloading the shell dependency</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha1</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Sha1 checksum value that is returned with the shell dependency info</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha256</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Sha256 checksum value that is returned with the shell dependency info</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha1-url</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">if <code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha1</code>
is not specified, SCDF uses the contents of the file specified at this URL for the checksum</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha256-url</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">if the <code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha256</code> is not specified, SCDF uses the contents of the file specified at this URL for the checksum</span></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_enabling_shell_checksum_values"><a class="anchor" href="#_enabling_shell_checksum_values"></a>9.9.1. Enabling Shell Checksum values</h4>
<div class="paragraph">
<p>By default, checksum values are not displayed for the shell dependency. If
you need this feature enabled, set the
<code>spring.cloud.dataflow.version-info.dependency-fetch.enabled</code> property to true.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reserved_values_for_urls"><a class="anchor" href="#_reserved_values_for_urls"></a>9.9.2. Reserved Values for URLs</h4>
<div class="paragraph">
<p>There are reserved values (surrounded by curly braces) that you can insert into
the URL that will make sure that the links are up to date:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>repository</code>: if using a build-snapshot, milestone, or release candidate of
Data Flow, the repository refers to the repo-spring-io repository. Otherwise, it
refers to Maven Central.</p>
</li>
<li>
<p><code>version</code>: Inserts the version of the jar/pom.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://myrepository/org/springframework/cloud/spring-cloud-dataflow-shell/{version}/spring-cloud-dataflow-shell-\{version}.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>produces</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>https://myrepository/org/springframework/cloud/spring-cloud-dataflow-shell/2.1.4/spring-cloud-dataflow-shell-2.11.0.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>if you were using the <code>2.11.0</code> version of the Spring Cloud Data Flow Shell.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-cloudfoundry"><a class="anchor" href="#configuration-cloudfoundry"></a>10. Configuration - Cloud Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure Spring Cloud Data Flow server&#8217;s features, such as security and which relational database to use.
It also describes how to configure Spring Cloud Data Flow shell&#8217;s features.</p>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-enable-disable-specific-features"><a class="anchor" href="#configuration-cloudfoundry-enable-disable-specific-features"></a>10.1. Feature Toggles</h3>
<div class="paragraph">
<p>Data Flow server offers a specific set of features that you can enable or disable when launching. These features include all the lifecycle operations and REST endpoints (server, client implementations including Shell and the UI) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams</p>
</li>
<li>
<p>Tasks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can enable or disable these features by setting the following boolean properties when you launch the Data Flow server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.cloud.dataflow.features.streams-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.tasks-enabled</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, all features are enabled.</p>
</div>
<div class="paragraph">
<p>The REST endpoint (<code>/features</code>) provides information on the enabled and disabled features.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-deployer"><a class="anchor" href="#configuration-cloudfoundry-deployer"></a>10.2. Deployer Properties</h3>
<div class="paragraph">
<p>You can use the following configuration properties of the Data Flow server&#8217;s <a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry">Cloud Foundry deployer</a> to customize how applications are deployed.
When deploying with the Data Flow shell, you can use the syntax <code>deployer.&lt;appName&gt;.cloudfoundry.&lt;deployerPropertyName&gt;</code>. See below for an example shell usage.
These properties are also used when configuring the <a href="#configuration-cloudfoundry-tasks">Cloud Foundry Task platforms</a> in the Data Flow server and and Kubernetes platforms in Skipper for deploying Streams.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deployer Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>services</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The names of services to bind to the deployed application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host name to use as part of the route.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostname derived by Cloud Foundry</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>domain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain to use when mapping routes for the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>routes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of routes that the application should be bound to.  Mutually exclusive with host and domain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buildpack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The buildpack to use for deploying the application. Deprecated use buildpacks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/cloudfoundry/java-buildpack.git#v4.29.1" class="bare">github.com/cloudfoundry/java-buildpack.git#v4.29.1</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buildpacks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of buildpacks to use for deploying the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/cloudfoundry/java-buildpack.git#v4.29.1" class="bare">github.com/cloudfoundry/java-buildpack.git#v4.29.1</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of memory to allocate. Default unit is mebibytes, 'M' and 'G" suffixes supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1024m</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disk</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of disk space to allocate. Default unit is mebibytes, 'M' and 'G" suffixes supported.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1024m</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>healthCheck</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of health check to perform on deployed application.  Values can be HTTP, NONE, PROCESS, and PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PORT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>healthCheckHttpEndpoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path that the http health check will use,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/health</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>healthCheckTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timeout value for health checks in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>120</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>instances</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of instances to run.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enableRandomAppNamePrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag to enable prefixing the app name with a random prefix.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apiTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for blocking API calls, in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>360</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statusTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for status API operations in milliseconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>useSpringApplicationJson</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag to indicate whether application properties are fed into <code>SPRING_APPLICATION_JSON</code> or as separate environment variables.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stagingTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout allocated for staging the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15 minutes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startupTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout allocated for starting the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5 minutes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>appNamePrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String to use as prefix for name of deployed application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Spring Boot property <code>spring.application.name</code> of the application that is using the deployer library.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleteRoutes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to also delete routes when un-deploying an application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javaOpts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Java Options to pass to the JVM, e.g -Dtest=foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pushTasksEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to push task applications or assume that the application already exists when launched.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>autoDeleteMavenArtifacts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to automatically delete Maven artifacts from the local repository when deployed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.&lt;key&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a top level environment variable. This is useful for customizing <a href="https://github.com/cloudfoundry/java-buildpack#configuration-and-extension">Java build pack configuration</a> which must be included as top level environment variables in the application manifest, as the Java build pack does not recognize <code>SPRING_APPLICATION_JSON</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The deployer determines if the app has <a href="https://github.com/pivotal-cf/java-cfenv">Java CfEnv</a> in its classpath. If so, it applies the required <a href="https://github.com/pivotal-cf/java-cfenv#pushing-your-application-to-cloud-foundry">configuration</a>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here are some examples using the Cloud Foundry deployment properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can set the buildpack that is used to deploy each application. For example, to use the Java offline buildback,
set the following environment variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cf set-env dataflow-server SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_BUILDPACKS java_buildpack_offline</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting <code>buildpack</code> is now deprecated in favour of <code>buildpacks</code> which allows you to pass on more than one if needed. More about this can be found from <a href="https://docs.cloudfoundry.org/buildpacks/understand-buildpacks.html">How Buildpacks Work</a>.</p>
</li>
<li>
<p>You can customize the health check mechanism used by Cloud Foundry to assert whether apps are running by using the <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_HEALTH_CHECK</code> environment variable. The current supported options
are <code>http</code> (the default), <code>port</code>, and <code>none</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also set environment variables that specify the HTTP-based health check endpoint and timeout: <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_HEALTH_CHECK_ENDPOINT</code> and <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_HEALTH_CHECK_TIMEOUT</code>, respectively. These default to <code>/health</code> (the Spring Boot default location) and <code>120</code> seconds.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can also specify deployment properties by using the DSL. For instance, if you want to set the allocated memory for the <code>http</code> application to 512m and also bind a postgres service to the <code>jdbc</code> application, you can run the following commands:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:> stream create --name postgresstream --definition "http | jdbc --tableName=names --columns=name"
dataflow:> stream deploy --name postgresstream --properties "deployer.http.memory=512, deployer.jdbc.cloudfoundry.services=postgres"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can configure these settings separately for stream and task apps. To alter settings for tasks,
substitute <code>TASK</code> for <code>STREAM</code> in the property name, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cf set-env dataflow-server SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_MEMORY 512</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-tasks"><a class="anchor" href="#configuration-cloudfoundry-tasks"></a>10.3. Tasks</h3>
<div class="paragraph">
<p>The Data Flow server is responsible for deploying Tasks.
Tasks that are launched by Data Flow write their state to the same database that is used by the Data Flow server.
For Tasks which are Spring Batch Jobs, the job and step execution data is also stored in this database.
As with Skipper, Tasks can be launched to multiple platforms.
When Data Flow is running on Cloud Foundry, a Task platfom must be defined.
To configure new platform accounts that target Cloud Foundry, provide an entry under the <code>spring.cloud.dataflow.task.platform.cloudfoundry</code> section in your <code>application.yaml</code> file for via another Spring Boot supported mechanism.
In the following example, two Cloud Foundry platform accounts named <code>dev</code> and  <code>qa</code> are created.
The keys such as <code>memory</code> and <code>disk</code> are <a href="#configuration-cloudfoundry-deployer">Cloud Foundry Deployer Properties</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      task:
        platform:
          cloudfoundry:
            accounts:
              dev:
                connection:
                  url: https://api.run.pivotal.io
                  org: myOrg
                  space: mySpace
                  domain: cfapps.io
                  username: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1164627463517469707c617d743f727e7c">[email&#160;protected]</a>
                  password: drowssap
                  skipSslValidation: false
                deployment:
                  memory: 512m
                  disk: 2048m
                  instances: 4
                  services: rabbit,postgres
                  appNamePrefix: dev1
              qa:
                connection:
                  url: https://api.run.pivotal.io
                  org: myOrgQA
                  space: mySpaceQA
                  domain: cfapps.io
                  username: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2b5e584e596b4e534a465b474e05484446">[email&#160;protected]</a>
                  password: drowssap
                  skipSslValidation: true
                deployment:
                  memory: 756m
                  disk: 724m
                  instances: 2
                  services: rabbitQA,postgresQA
                  appNamePrefix: qa1</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By defining one platform as <code>default</code> allows you to skip using <code>platformName</code> where its use would otherwise be required.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When launching a task, pass the value of the platform account name using the task launch option <code>--platformName</code>  If you do not pass a value for <code>platformName</code>, the value <code>default</code> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying a task to multiple platforms, the configuration of the task needs to connect to the same database as the Data Flow Server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the Data Flow server that is on Cloud Foundry to deploy tasks to Cloud Foundry or Kubernetes.  See the section on <a href="#configuration-kubernetes-tasks">Kubernetes Task Platform Configuration</a> for more information.</p>
</div>
<div class="paragraph">
<p>Detailed examples for launching and scheduling tasks across multiple platforms, are available in this section <a href="https://dataflow.spring.io/docs/recipes/multi-platform-deployment/">Multiple Platform Support for Tasks</a> on <a href="http://dataflow.spring.io" class="bare">dataflow.spring.io</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-app-names-cloud-foundry"><a class="anchor" href="#configuration-app-names-cloud-foundry"></a>10.4. Application Names and Prefixes</h3>
<div class="paragraph">
<p>To help avoid clashes with routes across spaces in Cloud Foundry, a naming strategy that provides a random prefix to a
deployed application is available and is enabled by default. You can override the <a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry#application-name-settings-and-deployments">default configurations</a>
and set the respective properties by using <code>cf set-env</code> commands.</p>
</div>
<div class="paragraph">
<p>For instance, if you want to disable the randomization, you can override it by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cf set-env dataflow-server SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_ENABLE_RANDOM_APP_NAME_PREFIX false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-custom-routes"><a class="anchor" href="#configuration-cloudfoundry-custom-routes"></a>10.5. Custom Routes</h3>
<div class="paragraph">
<p>As an alternative to a random name or to get even more control over the hostname used by the deployed apps, you can use
custom deployment properties, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>stream create foo --definition "http | log"

sdataflow:>stream deploy foo --properties "deployer.http.cloudfoundry.domain=mydomain.com,
                                          deployer.http.cloudfoundry.host=myhost,
                                          deployer.http.cloudfoundry.route-path=my-path"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example binds the <code>http</code> app to the <code><a href="https://myhost.mydomain.com/my-path" class="bare">myhost.mydomain.com/my-path</a></code> URL. Note that this
example shows <strong>all</strong> of the available customization options. In practice, you can use only one or two out of the three.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-docker-apps"><a class="anchor" href="#configuration-cloudfoundry-docker-apps"></a>10.6. Docker Applications</h3>
<div class="paragraph">
<p>Starting with version 1.2, it is possible to register and deploy Docker based apps as part of streams and tasks by using
Data Flow for Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>If you use Spring Boot and RabbitMQ-based Docker images, you can provide a common deployment property
to facilitate binding the apps to the RabbitMQ service. Assuming your RabbitMQ service is named <code>rabbit</code>, you can provide the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cf set-env dataflow-server SPRING_APPLICATION_JSON '{"spring.cloud.dataflow.applicationProperties.stream.spring.rabbitmq.addresses": "${vcap.services.rabbit.credentials.protocols.amqp.uris}"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Spring Cloud Task apps, you can use something similar to the following, if you use a database service instance named <code>postgres</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cf set-env SPRING_DATASOURCE_URL '${vcap.services.postgres.credentials.jdbcUrl}'
cf set-env SPRING_DATASOURCE_USERNAME '${vcap.services.postgres.credentials.username}'
cf set-env SPRING_DATASOURCE_PASSWORD '${vcap.services.postgres.credentials.password}'
cf set-env SPRING_DATASOURCE_DRIVER_CLASS_NAME 'org.mariadb.jdbc.Driver'
cf set-env SPRING_JPA_DATABASE_PLATFORM 'org.hibernate.dialect.MariaDB106Dialect'</code></pre>
</div>
</div>
<div class="paragraph">
<p>For non-Java or non-Boot applications, your Docker app must parse the <code>VCAP_SERVICES</code> variable in order to bind to any available services.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Passing application properties</div>
<div class="paragraph">
<p>When using non-Boot applications, chances are that you want to pass the application properties by using traditional
environment variables, as opposed to using the special <code>SPRING_APPLICATION_JSON</code> variable. To do so, set the
following variables for streams and tasks, respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_USE_SPRING_APPLICATION_JSON=false</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-service-binding-at-application-level"><a class="anchor" href="#configuration-cloudfoundry-service-binding-at-application-level"></a>10.7. Application-level Service Bindings</h3>
<div class="paragraph">
<p>When deploying streams in Cloud Foundry, you can take advantage of application-specific service bindings, so not all
services are globally configured for all the apps orchestrated by Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>For instance, if you want to provide a <code>postgres</code> service binding only for the <code>jdbc</code> application in the following stream
definition, you can pass the service binding as a deployment property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>stream create --name httptojdbc --definition "http | jdbc"
dataflow:>stream deploy --name httptojdbc --properties "deployer.jdbc.cloudfoundry.services=postgresService"</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>postgresService</code> is the name of the service specifically bound only to the <code>jdbc</code> application and the <code>http</code>
application does not get the binding by this method.</p>
</div>
<div class="paragraph">
<p>If you have more than one service to bind, they can be passed as comma-separated items
(for example: <code>deployer.jdbc.cloudfoundry.services=postgresService,someService</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="configure-service-binding-parameters"><a class="anchor" href="#configure-service-binding-parameters"></a>10.8. Configuring Service binding parameters</h3>
<div class="paragraph">
<p>The CloudFoundry API supports providing configuration parameters when binding a service instance. Some service brokers require or
recommend binding configuration.
For example, binding the <a href="https://docs.pivotal.io/partners/gcp-sb/using.html">Google Cloud Platform service</a> using the CF CLI looks something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>cf bind-service my-app my-google-bigquery-example -c '{"role":"bigquery.user"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Likewise the <a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">NFS Volume Service</a> supports binding configuration such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>cf bind-service my-app nfs_service_instance -c '{"uid":"1000","gid":"1000","mount":"/var/volume1","readonly":true}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Starting with version 2.0, Data Flow for Cloud Foundry allows you to provide binding configuration parameters may be provided in the app level or server level <code>cloudfoundry.services</code> deployment property. For example, to bind to the nfs service, as above :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>dataflow:&gt; stream deploy --name mystream --properties "deployer.&lt;app&gt;.cloudfoundry.services='nfs_service_instance uid:1000,gid:1000,mount:/var/volume1,readonly:true'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format is intended to be compatible with the Data Flow DSL parser.
Generally, the <code>cloudfoundry.services</code> deployment property accepts a comma delimited value.
Since a comma is also used to separate configuration parameters, and to avoid white space issues, any item including configuration parameters must be enclosed in singe quotes. Valid values incude things like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>rabbitmq,'nfs_service_instance uid:1000,gid:1000,mount:/var/volume1,readonly:true',postgres,'my-google-bigquery-example role:bigquery.user'</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Spaces are permitted within single quotes and  <code>=</code> may be used instead of <code>:</code> to delimit key-value pairs.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-ups"><a class="anchor" href="#configuration-cloudfoundry-ups"></a>10.9. User-provided Services</h3>
<div class="paragraph">
<p>In addition to marketplace services, Cloud Foundry supports
<a href="https://docs.cloudfoundry.org/devguide/services/user-provided.html">User-provided Services</a> (UPS). Throughout this reference manual,
regular services have been mentioned, but there is nothing precluding the use of User-provided Services as well, whether for use as the
messaging middleware (for example, if you want to use an external Apache Kafka installation) or for use by some
of the stream applications (for example, an Oracle Database).</p>
</div>
<div class="paragraph">
<p>Now we review an example of extracting and supplying the connection credentials from a UPS.</p>
</div>
<div class="paragraph">
<p>The following example shows a sample UPS setup for Apache Kafka:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cf create-user-provided-service kafkacups -p '{”brokers":"HOST:PORT","zkNodes":"HOST:PORT"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The UPS credentials are wrapped within <code>VCAP_SERVICES</code>, and they can be supplied directly in the stream definition, as
the following example shows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream create fooz --definition "time | log"
stream deploy fooz --properties "app.time.spring.cloud.stream.kafka.binder.brokers=${vcap.services.kafkacups.credentials.brokers},app.time.spring.cloud.stream.kafka.binder.zkNodes=${vcap.services.kafkacups.credentials.zkNodes},app.log.spring.cloud.stream.kafka.binder.brokers=${vcap.services.kafkacups.credentials.brokers},app.log.spring.cloud.stream.kafka.binder.zkNodes=${vcap.services.kafkacups.credentials.zkNodes}"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-db-connection-pool"><a class="anchor" href="#configuration-cloudfoundry-db-connection-pool"></a>10.10. Database Connection Pool</h3>
<div class="paragraph">
<p>As of Data Flow 2.0, the Spring Cloud Connector library is no longer used to create the DataSource.
The library  <a href="https://github.com/pivotal-cf/java-cfenv">java-cfenv</a> is now used which allows you to set <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-connect-to-production-database">Spring Boot properties</a> to configure the connection pool.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-maximum-disk-quota-configuration"><a class="anchor" href="#configuration-cloudfoundry-maximum-disk-quota-configuration"></a>10.11. Maximum Disk Quota</h3>
<div class="paragraph">
<p>By default, every application in Cloud Foundry starts with 1G disk quota and this can be adjusted to a default maximum of
2G. The default maximum can also be overridden up to 10G by using Pivotal Cloud Foundry&#8217;s (PCF) Ops Manager GUI.</p>
</div>
<div class="paragraph">
<p>This configuration is relevant for Spring Cloud Data Flow because every task deployment is composed of applications
(typically Spring Boot uber-jar&#8217;s), and those applications are resolved from a remote maven repository. After resolution,
the application artifacts are downloaded to the local Maven Repository for caching and reuse. With this happening in the background,
the default disk quota (1G) can fill up rapidly, especially when we experiment with streams that
are made up of unique applications. In order to overcome this disk limitation and depending
on your scaling requirements, you may want to change the default maximum from 2G to 10G. Let&#8217;s review the
steps to change the default maximum disk quota allocation.</p>
</div>
<div class="sect3">
<h4 id="_pcfs_operations_manager"><a class="anchor" href="#_pcfs_operations_manager"></a>10.11.1. PCF&#8217;s Operations Manager</h4>
<div class="paragraph">
<p>From PCF&#8217;s Ops Manager, select the &#8220;Pivotal Elastic Runtime&#8221; tile and navigate to the &#8220;Application Developer Controls&#8221; tab.
Change the &#8220;Maximum Disk Quota per App (MB)&#8221; setting from 2048 (2G) to 10240 (10G). Save the disk quota update and click
&#8220;Apply Changes&#8221; to complete the configuration override.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-scaling"><a class="anchor" href="#configuration-cloudfoundry-scaling"></a>10.12. Scale Application</h3>
<div class="paragraph">
<p>Once the disk quota change has been successfully applied and assuming you have a <a href="#running-on-cloudfoundry">running application</a>,
you can scale the application with a new <code>disk_limit</code> through the CF CLI, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">→ cf scale dataflow-server -k 10GB

Scaling app dataflow-server in org ORG / space SPACE as user...
OK

....
....
....
....

     state     since                    cpu      memory           disk           details
#0   running   2016-10-31 03:07:23 PM   1.8%     497.9M of 1.1G   193.9M of 10G</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then list the applications and see the new maximum disk space, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">→ cf apps
Getting apps in org ORG / space SPACE as user...
OK

name              requested state   instances   memory   disk   urls
dataflow-server   started           1/1         1.1G     10G    dataflow-server.apps.io</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-managing-disk-utilization"><a class="anchor" href="#configuration-cloudfoundry-managing-disk-utilization"></a>10.13. Managing Disk Use</h3>
<div class="paragraph">
<p>Even when configuring the Data Flow server to use 10G of space, there is the possibility of exhausting
the available space on the local disk. To prevent this, <code>jar</code> artifacts downloaded from external sources, i.e., apps registered as <code>http</code> or <code>maven</code> resources, are automatically deleted whenever the application is deployed, whether or not the deployment request succeeds.
This behavior is optimal for production environments in which container runtime stability is more critical than I/O latency incurred during deployment.
In development environments deployment happens more frequently. Additionally, the <code>jar</code> artifact (or a lighter <code>metadata</code> jar) contains metadata describing application configuration properties
which is used by various operations related to application configuration, more frequently performed during pre-production activities (see <a href="https://dataflow.spring.io/docs/applications/application-metadata">Application Metadata</a> for details).
To provide a more responsive interactive developer experience at the expense of more disk usage in pre-production environments, you can set the CloudFoundry deployer property <code>autoDeleteMavenArtifacts</code> to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>If you deploy the Data Flow server by using the default <code>port</code> health check type, you must explicitly monitor the disk space on the server in order to avoid running out space.
If you deploy the server by using the <code>http</code> health check type (see the next example), the Data Flow server is restarted if there is low disk space.
This is due to Spring Boot&#8217;s <a href="https://github.com/spring-projects/spring-boot/blob/v1.5.14.RELEASE/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/DiskSpaceHealthIndicator.java">Disk Space Health Indicator</a>.
You can <a href="https://docs.spring.io/spring-boot/docs/1.5.14.RELEASE/reference/htmlsingle/#common-application-properties">configure</a> the settings of the Disk Space Health Indicator by using the properties that have the <code>management.health.diskspace</code> prefix.</p>
</div>
<div class="paragraph">
<p>For version 1.7, we are investigating the use of <a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">Volume Services</a> for the Data Flow server to store <code>.jar</code> artifacts before pushing them to Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>The following example shows how to deploy the <code>http</code> health check type to an endpoint called <code>/management/health</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>---
  ...
  health-check-type: http
  health-check-http-endpoint: /management/health</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-app-resolution-options"><a class="anchor" href="#configuration-cloudfoundry-app-resolution-options"></a>10.14. Application Resolution Alternatives</h3>
<div class="paragraph">
<p>Though we recommend using a Maven Artifactory for application <a href="#spring-cloud-dataflow-register-stream-apps">Register a Stream Application</a>,
there might be situations where one of the following alternative approaches would make sense.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With the help of Spring Boot, we can serve <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-spring-mvc-static-content">static content</a>
in Cloud Foundry. A simple Spring Boot application can bundle all the required stream and task applications. By having it
run on Cloud Foundry, the static application can then serve the über-jar&#8217;s. From the shell, you can, for example, register the
application with the name <code>http-source.jar</code> by using <code>--uri=http://&lt;Route-To-StaticApp&gt;/http-source.jar</code>.</p>
</li>
<li>
<p>The über-jar&#8217;s can be hosted on any external server that&#8217;s reachable over HTTP. They can be resolved from raw GitHub URIs
as well. From the shell, you can, for example, register the app with the name <code>http-source.jar</code> by using <code>--uri=http://&lt;Raw_GitHub_URI&gt;/http-source.jar</code>.</p>
</li>
<li>
<p><a href="https://docs.cloudfoundry.org/buildpacks/staticfile/index.html">Static Buildpack</a> support in Cloud Foundry is another
option. A similar HTTP resolution works on this model, too.</p>
</li>
<li>
<p><a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">Volume Services</a> is another great option.
The required über-jars can be hosted in an external file system. With the help of volume-services, you can, for
example, register the application with the name <code>http-source.jar</code> by using <code>--uri=file://&lt;Path-To-FileSystem&gt;/http-source.jar</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-security"><a class="anchor" href="#configuration-cloudfoundry-security"></a>10.15. Security</h3>
<div class="paragraph">
<p>By default, the Data Flow server is unsecured and runs on an unencrypted HTTP connection. You can secure your REST endpoints
(as well as the Data Flow Dashboard) by enabling HTTPS and requiring clients to authenticate.
For more details about securing the
REST endpoints and configuring to authenticate against an OAUTH backend (UAA and SSO running on Cloud Foundry),
see the security section from the core <a href="#configuration-local-security">Security Configuration</a>. You can configure the security details in <code>dataflow-server.yml</code> or pass them as environment variables through <code>cf set-env</code> commands.</p>
</div>
<div class="sect3">
<h4 id="configuration-cloudfoundry-authentication"><a class="anchor" href="#configuration-cloudfoundry-authentication"></a>10.15.1. Authentication</h4>
<div class="paragraph">
<p>Spring Cloud Data Flow can either integrate with Pivotal Single Sign-On Service
(for example, on PWS) or Cloud Foundry User Account and Authentication (UAA) Server.</p>
</div>
<div class="sect4">
<h5 id="configuration-cloudfoundry-security-sso"><a class="anchor" href="#configuration-cloudfoundry-security-sso"></a>Pivotal Single Sign-On Service</h5>
<div class="paragraph">
<p>When deploying Spring Cloud Data Flow to Cloud Foundry, you can bind the
application to the Pivotal Single Sign-On Service. By doing so, Spring Cloud
Data Flow takes advantage of the
<a href="https://github.com/pivotal-cf/java-cfenv">Java CFEnv</a>,
which provides Cloud Foundry-specific auto-configuration support for OAuth 2.0.</p>
</div>
<div class="paragraph">
<p>To do so, bind the Pivotal Single Sign-On Service to your Data Flow Server application and
provide the following properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">SPRING_CLOUD_DATAFLOW_SECURITY_CFUSEUAA: false                                                 <i class="conum" data-value="1"></i><b>(1)</b>
SECURITY_OAUTH2_CLIENT_CLIENTID: "${security.oauth2.client.clientId}"
SECURITY_OAUTH2_CLIENT_CLIENTSECRET: "${security.oauth2.client.clientSecret}"
SECURITY_OAUTH2_CLIENT_ACCESSTOKENURI: "${security.oauth2.client.accessTokenUri}"
SECURITY_OAUTH2_CLIENT_USERAUTHORIZATIONURI: "${security.oauth2.client.userAuthorizationUri}"
SECURITY_OAUTH2_RESOURCE_USERINFOURI: "${security.oauth2.resource.userInfoUri}"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It is important that the property <code>spring.cloud.dataflow.security.cf-use-uaa</code> is set to <code>false</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Authorization is similarly supported for non-Cloud Foundry security scenarios.
See the security section from the core Data Flow <a href="#configuration-local-security">Security Configuration</a>.</p>
</div>
<div class="paragraph">
<p>As the provisioning of roles can vary widely across environments, we by
default assign all Spring Cloud Data Flow roles to users.</p>
</div>
<div class="paragraph">
<p>You can customize this behavior by providing your own <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/security/oauth2/resource/AuthoritiesExtractor.html"><code>AuthoritiesExtractor</code></a>.</p>
</div>
<div class="paragraph">
<p>The following example shows one possible approach to set the custom <code>AuthoritiesExtractor</code> on the <code>UserInfoTokenServices</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyUserInfoTokenServicesPostProcessor
	implements BeanPostProcessor {

	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName) {
		if (bean instanceof UserInfoTokenServices) {
			final UserInfoTokenServices userInfoTokenServices == (UserInfoTokenServices) bean;
			userInfoTokenServices.setAuthoritiesExtractor(ctx.getBean(AuthoritiesExtractor.class));
		}
		return bean;
	}

	@Override
	public Object postProcessAfterInitialization(Object bean, String beanName) {
		return bean;
	}
}
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can declare it in your configuration class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Bean
public BeanPostProcessor myUserInfoTokenServicesPostProcessor() {
	BeanPostProcessor postProcessor == new MyUserInfoTokenServicesPostProcessor();
	return postProcessor;
}
</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="configuration-cloudfoundry-security-uaa"><a class="anchor" href="#configuration-cloudfoundry-security-uaa"></a>Cloud Foundry UAA</h5>
<div class="paragraph">
<p>The availability of Cloud Foundry User Account and Authentication (UAA) depends on the Cloud Foundry environment.
In order to provide UAA integration, you have to provide the necessary
OAuth2 configuration properties (for example, by setting the <code>SPRING_APPLICATION_JSON</code>
property).</p>
</div>
<div class="paragraph">
<p>The following JSON example shows how to create a security configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "security.oauth2.client.client-id": "scdf",
  "security.oauth2.client.client-secret": "scdf-secret",
  "security.oauth2.client.access-token-uri": "https://login.cf.myhost.com/oauth/token",
  "security.oauth2.client.user-authorization-uri": "https://login.cf.myhost.com/oauth/authorize",
  "security.oauth2.resource.user-info-uri": "https://login.cf.myhost.com/userinfo"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the <code>spring.cloud.dataflow.security.cf-use-uaa</code>  property is set to <code>true</code>. This property activates a special
<a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/security/oauth2/resource/AuthoritiesExtractor.html"><code>AuthoritiesExtractor</code></a> called <code>CloudFoundryDataflowAuthoritiesExtractor</code>.</p>
</div>
<div class="paragraph">
<p>If you do not use CloudFoundry UAA, you should set <code>spring.cloud.dataflow.security.cf-use-uaa</code> to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Under the covers, this <code>AuthoritiesExtractor</code> calls out to the
<a href="https://apidocs.cloudfoundry.org/253/apps/retrieving_permissions_on_a_app.html">Cloud Foundry
Apps API</a> and ensure that users are in fact Space Developers.</p>
</div>
<div class="paragraph">
<p>If the authenticated user is verified as a Space Developer, all roles are assigned.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_reference"><a class="anchor" href="#_configuration_reference"></a>10.16. Configuration Reference</h3>
<div class="paragraph">
<p>You must provide several pieces of configuration. These are Spring Boot <code>@ConfigurationProperties</code>, so you can set
them as environment variables or by any other means that Spring Boot supports. The following listing is in environment
variable format, as that is an easy way to get started configuring Boot applications in Cloud Foundry.
Note that in the future, you will be able to deploy tasks to multiple platforms, but for 2.0.0.M1 you can deploy only to a single platform and the name must be <code>default</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Default values appear after the equal signs.
# Example values, typical for Pivotal Web Services, are included as comments.

# URL of the CF API (used when using cf login -a for example) - for example, https://api.run.pivotal.io
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL=

# The name of the organization that owns the space above - for example, youruser-org
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG=

# The name of the space into which modules will be deployed - for example, development
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE=

# The root domain to use when mapping routes - for example, cfapps.io
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_DOMAIN=

# The user name and password of the user to use to create applications
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME=
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD

# The identity provider to be used when accessing the Cloud Foundry API (optional).
# The passed string has to be a URL-Encoded JSON Object, containing the field origin with value as origin_key of an identity provider - for example, {"origin":"uaa"}
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_LOGIN_HINT=

# Whether to allow self-signed certificates during SSL validation (you should NOT do so in production)
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION

# A comma-separated set of service instance names to bind to every deployed task application.
# Among other things, this should include an RDBMS service that is used
# for Spring Cloud Task execution reporting, such as my_postgres
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES
spring.cloud.deployer.cloudfoundry.task.services=

# Timeout, in seconds, to use when doing blocking API calls to Cloud Foundry
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_API_TIMEOUT=

# Timeout, in milliseconds, to use when querying the Cloud Foundry API to compute app status
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_STATUS_TIMEOUT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can set <code>spring.cloud.deployer.cloudfoundry.services</code>,
<code>spring.cloud.deployer.cloudfoundry.buildpacks</code>, or the Spring Cloud Deployer-standard
<code>spring.cloud.deployer.memory</code> and <code>spring.cloud.deployer.disk</code>
as part of an individual deployment request by using the <code>deployer.&lt;app-name&gt;</code> shortcut, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream create --name ticktock --definition "time | log"
stream deploy --name ticktock --properties "deployer.time.memory=2g"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The commands in the preceding example deploy the time source with 2048MB of memory, while the log sink uses the default 1024MB.</p>
</div>
<div class="paragraph">
<p>When you deploy a stream, you can also pass <code>JAVA_OPTS</code> as a deployment property, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream deploy --name ticktock --properties "deployer.time.cloudfoundry.javaOpts=-Duser.timezone=America/New_York"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_debugging"><a class="anchor" href="#_debugging"></a>10.17. Debugging</h3>
<div class="paragraph">
<p>If you want to get better insights into what is happening when your streams and tasks are being deployed, you may want
to turn on the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reactor &#8220;stacktraces&#8221;, showing which operators were involved before an error occurred. This feature is helpful, as the deployer
relies on project reactor and regular stacktraces may not always allow understanding the flow before an error happened.
Note that this comes with a performance penalty, so it is disabled by default.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">spring.cloud.dataflow.server.cloudfoundry.debugReactor == true</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Deployer and Cloud Foundry client library request and response logs. This feature allows seeing a detailed conversation between
the Data Flow server and the Cloud Foundry Cloud Controller.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-data" data-lang="data">logging.level.cloudfoundry-client == DEBUG</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_cloud_config_server"><a class="anchor" href="#_spring_cloud_config_server"></a>10.18. Spring Cloud Config Server</h3>
<div class="paragraph">
<p>You can use Spring Cloud Config Server to centralize configuration properties for Spring Boot applications.
Likewise, both Spring Cloud Data Flow and the applications orchestrated by Spring Cloud Data Flow can be integrated with a configuration server to use the same capabilities.</p>
</div>
<div class="sect3">
<h4 id="_stream_task_and_spring_cloud_config_server"><a class="anchor" href="#_stream_task_and_spring_cloud_config_server"></a>10.18.1. Stream, Task, and Spring Cloud Config Server</h4>
<div class="paragraph">
<p>Similar to Spring Cloud Data Flow server, you can configure both the stream and task applications to resolve the centralized properties from the configuration server.
Setting the <code>spring.cloud.config.uri</code> property for the deployed applications is a common way to bind to the configuration server.
See the <a href="https://cloud.spring.io/spring-cloud-config/spring-cloud-config.html#_spring_cloud_config_client">Spring Cloud Config Client</a> reference guide for more information.</p>
</div>
<div class="paragraph">
<p>Since this property is likely to be used across all deployed applications, the Data Flow server&#8217;s <code>spring.cloud.dataflow.applicationProperties.stream</code> property for stream applications and <code>spring.cloud.dataflow.applicationProperties.task</code> property for task applications can be used to pass the <code>uri</code> of the Config Server to each deployed stream or task application. See the section on <a href="#spring-cloud-dataflow-global-properties">Common Application Properties</a> for more information.</p>
</div>
<div class="paragraph">
<p>Note that, if you use the out-of-the-box <a href="https://spring.io/projects/spring-cloud-stream-applications/">Stream Applications</a>, these applications already embed the <code>spring-cloud-services-starter-config-client</code> dependency.
If you build your application from scratch and want to add the client side support for config server, you can add a dependency reference to the config server client library. The following snippet shows a Maven example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">...
&lt;dependency&gt;
  &lt;groupId&gt;io.pivotal.spring.cloud&lt;/groupId&gt;
  &lt;artifactId&gt;spring-cloud-services-starter-config-client&lt;/artifactId&gt;
  &lt;version&gt;CONFIG_CLIENT_VERSION&lt;/version&gt;
&lt;/dependency&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>CONFIG_CLIENT_VERSION</code> can be the latest release of the <a href="https://github.com/pivotal-cf/spring-cloud-services-connector/releases">Spring Cloud Config Server</a>
client for Pivotal Cloud Foundry.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You may see a <code>WARN</code> logging message if the application that uses this library cannot connect to the configuration
server when the application starts and whenever the <code>/health</code> endpoint is accessed.
If you know that you are not using config server functionality, you can disable the client library by setting the
<code>SPRING_CLOUD_CONFIG_ENABLED</code> environment variable to <code>false</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sample_manifest_template"><a class="anchor" href="#_sample_manifest_template"></a>10.18.2. Sample Manifest Template</h4>
<div class="paragraph">
<p>The following SCDF and Skipper <code>manifest.yml</code> templates includes the required environment variables for the Skipper and Spring Cloud Data Flow server and deployed applications and tasks to successfully run on Cloud Foundry and automatically resolve centralized properties from <code>my-config-server</code> at runtime:</p>
</div>
<div class="listingblock">
<div class="title">SCDF manifest.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">applications:
- name: data-flow-server
  host: data-flow-server
  memory: 2G
  disk_quota: 2G
  instances: 1
  path: {PATH TO SERVER UBER-JAR}
  env:
    SPRING_APPLICATION_NAME: data-flow-server
    MAVEN_REMOTEREPOSITORIES_REPO1_URL: https://my.custom.repo/prod-repo
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: https://api.sys.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_DOMAIN: apps.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: admin
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: ***
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION: true
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: postgres
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: https://&lt;skipper-host-name&gt;/api
services:
- postgres
- my-config-server</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Skipper manifest.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">applications:
- name: skipper-server
  host: skipper-server
  memory: 1G
  disk_quota: 1G
  instances: 1
  timeout: 180
  buildpack: java_buildpack
  path: &lt;PATH TO THE DOWNLOADED SKIPPER SERVER UBER-JAR&gt;
  env:
    SPRING_APPLICATION_NAME: skipper-server
    SPRING_CLOUD_SKIPPER_SERVER_ENABLE_LOCAL_PLATFORM: false
    SPRING_CLOUD_SKIPPER_SERVER_STRATEGIES_HEALTHCHECK_TIMEOUTINMILLIS: 300000
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: https://api.local.pcfdev.io
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: pcfdev-org
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: pcfdev-space
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DOMAIN: cfapps.io
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: admin
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: admin
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DELETE_ROUTES: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: rabbit,my-config-server
services:
- postgres
  my-config-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>my-config-server</code> is the name of the Spring Cloud Config Service instance running on Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>By binding the service to Spring Cloud Data Flow server, Spring Cloud Task and via Skipper to all the Spring Cloud Stream applications respectively, we can now resolve centralized properties backed by this service.</p>
</div>
</div>
<div class="sect3">
<h4 id="_self_signed_ssl_certificate_and_spring_cloud_config_server"><a class="anchor" href="#_self_signed_ssl_certificate_and_spring_cloud_config_server"></a>10.18.3. Self-signed SSL Certificate and Spring Cloud Config Server</h4>
<div class="paragraph">
<p>Often, in a development environment, we may not have a valid certificate to enable SSL communication between clients and the backend services.
However, the configuration server for Pivotal Cloud Foundry uses HTTPS for all client-to-service communication, so we need to add a self-signed SSL certificate in environments with no valid certificates.</p>
</div>
<div class="paragraph">
<p>By using the same <code>manifest.yml</code> templates listed in the previous section for the server, we can provide the self-signed SSL certificate by setting <code>TRUST_CERTS: &lt;API_ENDPOINT&gt;</code>.</p>
</div>
<div class="paragraph">
<p>However, the deployed applications also require <code>TRUST_CERTS</code> as a flat environment variable (as opposed to being wrapped inside <code>SPRING_APPLICATION_JSON</code>), so we must instruct the server with yet another set of tokens (<code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_USE_SPRING_APPLICATION_JSON: false</code>) for tasks.
With this setup, the applications receive their application properties as regular environment variables.</p>
</div>
<div class="paragraph">
<p>The following listing shows the updated <code>manifest.yml</code> with the required changes. Both the Data Flow server and deployed applications
get their configuration from the <code>my-config-server</code> Cloud Config server (deployed as a Cloud Foundry service).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">applications:
- name: test-server
  host: test-server
  memory: 1G
  disk_quota: 1G
  instances: 1
  path: spring-cloud-dataflow-server-VERSION.jar
  env:
    SPRING_APPLICATION_NAME: test-server
    MAVEN_REMOTEREPOSITORIES_REPO1_URL: https://my.custom.repo/prod-repo
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: https://api.sys.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_DOMAIN: apps.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: admin
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: ***
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION: true
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: postgres, config-server
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: https://&lt;skipper-host-name&gt;/api
    TRUST_CERTS: &lt;API_ENDPOINT&gt; #this is for the server
    SPRING_CLOUD_DATAFLOW_APPLICATION_PROPERTIES_TASK_TRUST_CERTS: &lt;API_ENDPOINT&gt;   #this propagates to all tasks
services:
- postgres
- my-config-server #this is for the server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also add the <code>my-config-server</code> service to the Skipper&#8217;s manifest environment</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">applications:
- name: skipper-server
  host: skipper-server
  memory: 1G
  disk_quota: 1G
  instances: 1
  timeout: 180
  buildpack: java_buildpack
  path: &lt;PATH TO THE DOWNLOADED SKIPPER SERVER UBER-JAR&gt;
  env:
    SPRING_APPLICATION_NAME: skipper-server
    SPRING_CLOUD_SKIPPER_SERVER_ENABLE_LOCAL_PLATFORM: false
    SPRING_CLOUD_SKIPPER_SERVER_STRATEGIES_HEALTHCHECK_TIMEOUTINMILLIS: 300000
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: &lt;URL&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: &lt;ORG&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: &lt;SPACE&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DOMAIN: &lt;DOMAIN&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: &lt;USER&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: &lt;PASSWORD&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: rabbit, my-config-server #this is so all stream applications bind to my-config-server
services:
- postgres
  my-config-server</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-scheduling"><a class="anchor" href="#configuration-cloudfoundry-scheduling"></a>10.19. Configure Scheduling</h3>
<div class="paragraph">
<p>This section discusses how to configure Spring Cloud Data Flow to connect to the <a href="https://www.cloudfoundry.org/the-foundry/scheduler/">PCF-Scheduler</a> as its agent to execute tasks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before following these instructions, be sure to have an instance of the PCF-Scheduler service running in your Cloud Foundry space.
To create a PCF-Scheduler in your space (assuming it is in your Market Place) execute the following from the CF CLI: <code>cf create-service scheduler-for-pcf standard &lt;name of service&gt;</code>.
Name of a service is later used to bound running application in <em>PCF</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For scheduling, you must add (or update) the following environment variables in your environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable scheduling for Spring Cloud Data Flow by setting <code>spring.cloud.dataflow.features.schedules-enabled</code> to <code>true</code>.</p>
</li>
<li>
<p>Bind the task deployer to your instance of PCF-Scheduler by adding the PCF-Scheduler service name to the <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES</code> environment variable.</p>
</li>
<li>
<p>Establish the URL to the PCF-Scheduler by setting the <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_SCHEDULER_SCHEDULER_URL</code> environment variable.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>After creating the preceding configurations, you must create any task definitions that need to be scheduled.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample manifest shows both environment properties configured (assuming you have a PCF-Scheduler service available with the name <code>myscheduler</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">applications:
- name: data-flow-server
  host: data-flow-server
  memory: 2G
  disk_quota: 2G
  instances: 1
  path: {PATH TO SERVER UBER-JAR}
  env:
    SPRING_APPLICATION_NAME: data-flow-server
    SPRING_CLOUD_SKIPPER_SERVER_ENABLE_LOCAL_PLATFORM: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: &lt;URL&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: &lt;ORG&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: &lt;SPACE&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DOMAIN: &lt;DOMAIN&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: &lt;USER&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: &lt;PASSWORD&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: rabbit, myscheduler
    SPRING_CLOUD_DATAFLOW_FEATURES_SCHEDULES_ENABLED: true
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: https://&lt;skipper-host-name&gt;/api
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_SCHEDULER_SCHEDULER_URL: https://scheduler.local.pcfdev.io
services:
- postgres</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]<em>SCHEDULER_SCHEDULER_URL</code> has the following format: <code>scheduler.&lt;Domain-Name&gt;</code> (for
example, <code><a href="https://scheduler.local.pcfdev.io" class="bare">scheduler.local.pcfdev.io</a></code>). Check the actual address from your _PCF</em> environment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Detailed examples for launching and scheduling tasks across multiple platforms, are available in this section <a href="https://dataflow.spring.io/docs/recipes/multi-platform-deployment/">Multiple Platform Support for Tasks</a> on <a href="http://dataflow.spring.io" class="bare">dataflow.spring.io</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-kubernetes"><a class="anchor" href="#configuration-kubernetes"></a>11. Configuration - Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure Spring Cloud Data Flow features, such as deployer properties, tasks, and which relational database to use.</p>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-enable-disable-specific-features"><a class="anchor" href="#configuration-kubernetes-enable-disable-specific-features"></a>11.1. Feature Toggles</h3>
<div class="paragraph">
<p>Data Flow server offers specific set of features that can be enabled or disabled when launching. These features include all the lifecycle operations, REST endpoints (server and client implementations including Shell and the UI) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams</p>
</li>
<li>
<p>Tasks</p>
</li>
<li>
<p>Schedules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can enable or disable these features by setting the following boolean environment variables when launching the Data Flow server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SPRING_CLOUD_DATAFLOW_FEATURES_STREAMS_ENABLED</code></p>
</li>
<li>
<p><code>SPRING_CLOUD_DATAFLOW_FEATURES_TASKS_ENABLED</code></p>
</li>
<li>
<p><code>SPRING_CLOUD_DATAFLOW_FEATURES_SCHEDULES_ENABLED</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, all the features are enabled.</p>
</div>
<div class="paragraph">
<p>The <code>/features</code> REST endpoint provides information on the features that have been enabled and disabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-app-props"><a class="anchor" href="#configuration-kubernetes-app-props"></a>11.2. Application and Server Properties</h3>
<div class="paragraph">
<p>This section covers how you can customize the deployment of your applications. You can use a number of properties to influence settings for the applications that are deployed. Properties can be applied on a per-application basis or in the appropriate server configuration for all deployed applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties set on a per-application basis always take precedence over properties set as the server configuration. This arrangement lets you override global server level properties on a per-application basis.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Properties to be applied for all deployed Tasks are defined in the <code>src/kubernetes/server/server-config-[binder].yaml</code> file and for Streams in <code>src/kubernetes/skipper/skipper-config-[binder].yaml</code>. Replace <code>[binder]</code> with the messaging middleware you are using&#8201;&#8212;&#8201;for example, <code>rabbit</code> or <code>kafka</code>.</p>
</div>
<div class="sect3">
<h4 id="_memory_and_cpu_settings"><a class="anchor" href="#_memory_and_cpu_settings"></a>11.2.1. Memory and CPU Settings</h4>
<div class="paragraph">
<p>Applications are deployed with default memory and CPU settings. If you need to, you can adjust these values. The following example shows how to set <code>Limits</code> to <code>1000m</code> for <code>CPU</code> and <code>1024Mi</code> for memory and <code>Requests</code> to <code>800m</code> for CPU and <code>640Mi</code> for memory:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.limits.cpu=1000m
deployer.&lt;application&gt;.kubernetes.limits.memory=1024Mi
deployer.&lt;application&gt;.kubernetes.requests.cpu=800m
deployer.&lt;application&gt;.kubernetes.requests.memory=640Mi</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Those values results in the following container settings being used:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Limits:
  cpu:	1
  memory:	1Gi
Requests:
  cpu:	800m
  memory:	640Mi</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also control the default values to which to set the <code>cpu</code> and <code>memory</code> globally.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the CPU and memory for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    limits:
                      memory: 640mi
                      cpu: 500m</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to set the CPU and memory for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    limits:
                      memory: 640mi
                      cpu: 500m</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The settings we have used so far affect only the settings for the container. They do not affect the memory setting for the JVM process in the container. If you would like to set JVM memory settings, you can set an environment variable to do so. See the next section for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_environment_variables"><a class="anchor" href="#_environment_variables"></a>11.2.2. Environment Variables</h4>
<div class="paragraph">
<p>To influence the environment settings for a given application, you can use the <code>spring.cloud.deployer.kubernetes.environmentVariables</code> deployer property.
For example, a common requirement in production settings is to influence the JVM memory arguments.
You can do so by using the <code>JAVA_TOOL_OPTIONS</code> environment variable, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.environmentVariables=JAVA_TOOL_OPTIONS=-Xmx1024m</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>environmentVariables</code> property accepts a comma-delimited string. If an environment variable contains a value
that is also a comma-delimited string, it must be enclosed in single quotation marks&#8201;&#8212;&#8201;for example,
<code>spring.cloud.deployer.kubernetes.environmentVariables=spring.cloud.stream.kafka.binder.brokers='somehost:9092,
anotherhost:9093'</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This overrides the JVM memory setting for the desired <code>&lt;application&gt;</code> (replace <code>&lt;application&gt;</code> with the name of your application).</p>
</div>
</div>
<div class="sect3">
<h4 id="getting-started-kubernetes-probes"><a class="anchor" href="#getting-started-kubernetes-probes"></a>11.2.3. Liveness, Readiness and Startup Probes</h4>
<div class="paragraph">
<p>The <code>liveness</code> and <code>readiness</code> probes use paths called <code>/health</code> and <code>/info</code>, respectively. They use a <code>delay</code> of <code>1</code> for both and a <code>period</code> of <code>60</code> and <code>10</code> respectively. You can change these defaults when you deploy the stream by using deployer properties. The liveness and readiness probes are applied only to streams.</p>
</div>
<div class="paragraph">
<p>The <code>startup</code> probe will use the <code>/health</code> path and a delay of 30 and period for 3 with a failure threshold of 20 times before the container restarts the application.</p>
</div>
<div class="paragraph">
<p>The following example changes the <code>liveness</code> and <code>startup</code> probes (replace <code>&lt;application&gt;</code> with the name of your application) by setting deployer properties:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.livenessProbePath=/health
deployer.&lt;application&gt;.kubernetes.livenessProbeDelay=1
deployer.&lt;application&gt;.kubernetes.livenessProbePeriod=60
deployer.&lt;application&gt;.kubernetes.livenessProbeSuccess=1
deployer.&lt;application&gt;.kubernetes.livenessProbeFailure=3
deployer.&lt;application&gt;.kubernetes.startupHttpProbePath=/health
deployer.&lt;application&gt;.kubernetes.startupProbedelay=20
deployer.&lt;application&gt;.kubernetes.startupProbeSuccess=1
deployer.&lt;application&gt;.kubernetes.startupProbeFailure=30
deployer.&lt;application&gt;.kubernetes.startupProbePeriod=5
deployer.&lt;application&gt;.kubernetes.startupProbeTimeout=3</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can declare the same as part of the server global configuration for streams, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    livenessHttpProbePath: /health
                    livenessProbeDelay: 1
                    livenessProbePeriod: 60
                    livenessProbeSuccess: 1
                    livenessProbeFailure: 3
                    startupHttpProbePath: /health
                    startupProbeDelay: 20
                    startupProbeSuccess: 1
                    startupProbeFailure: 30
                    startupProbePeriod: 5
                    startupProbeTimeout: 3</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Similarly, you can swap <code>liveness</code> for <code>readiness</code> to override the default <code>readiness</code> settings.</p>
</div>
<div class="paragraph">
<p>By default, port 8080 is used as the probe port. You can change the defaults for both <code>liveness</code> and <code>readiness</code> probe ports by using deployer properties, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.readinessProbePort=7000
deployer.&lt;application&gt;.kubernetes.livenessProbePort=7000
deployer.&lt;application&gt;.kubernetes.startupProbePort=7000</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can declare the same as part of the global configuration for streams, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    readinessProbePort: 7000
                    livenessProbePort: 7000
                    startupProbePort: 7000</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the <code>liveness</code> and <code>readiness</code> probe paths use Spring Boot 2.x+ actuator endpoints. To use Spring Boot 1.x actuator endpoint paths, you must adjust the <code>liveness</code> and <code>readiness</code> values, as the following example shows (replace <code>&lt;application&gt;</code> with the name of your application):</p>
</div>
<div class="paragraph">
<p>The <code>startup</code> probe path will default to the management path <code>/info</code> but may be modified as needed.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.startupProbePath=/api</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To automatically set both <code>liveness</code> and <code>readiness</code> endpoints on a per-application basis to the default Spring Boot 1.x paths, you can set the following property:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.bootMajorVersion=1</code></pre>
</div>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can access secured probe endpoints by using credentials stored in a <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes secret</a>. You can use an existing secret, provided the credentials are contained under the <code>credentials</code> key name of the secret&#8217;s <code>data</code> block. You can configure probe authentication on a per-application basis. When enabled, it is applied to both the <code>liveness</code> and <code>readiness</code> probe endpoints by using the same credentials and authentication type. Currently, only <code>Basic</code> authentication is supported.</p>
</div>
<div class="paragraph">
<p>To create a new secret:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate the base64 string with the credentials used to access the secured probe endpoints.</p>
<div class="paragraph">
<p>Basic authentication encodes a username and a password as a base64 string in the format of <code>username:password</code>.</p>
</div>
<div class="paragraph">
<p>The following example (which includes output and in which you should replace <code>user</code> and <code>pass</code> with your values) shows how to generate a base64 string:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ echo -n "user:pass" | base64
dXNlcjpwYXNz</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>With the encoded credentials, create a file (for example, <code>myprobesecret.yml</code>) with the following contents:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>apiVersion: v1
kind: Secret
metadata:
  name: myprobesecret
type: Opaque
data:
  credentials: GENERATED_BASE64_STRING</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Replace <code>GENERATED_BASE64_STRING</code> with the base64-encoded value generated earlier.</p>
</li>
<li>
<p>Create the secret by using <code>kubectl</code>, as the following example shows:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl create -f ./myprobesecret.yml
secret "myprobesecret" created</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Set the following deployer properties to use authentication when accessing probe endpoints, as the following example shows:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.probeCredentialsSecret=myprobesecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of the application to which to apply authentication.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_using_spring_application_json"><a class="anchor" href="#_using_spring_application_json"></a>11.2.4. Using <code>SPRING_APPLICATION_JSON</code></h4>
<div class="paragraph">
<p>You can use a <code>SPRING_APPLICATION_JSON</code> environment variable to set Data Flow server properties (including the configuration of Maven repository settings) that are common across all of the Data Flow server implementations. These settings go at the server level in the container <code>env</code> section of a deployment YAML. The following example shows how to do so:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>env:
- name: SPRING_APPLICATION_JSON
  value: "{ \"maven\": { \"local-repository\": null, \"remote-repositories\": { \"repo1\": { \"url\": \"https://my.custom.repo/prod-repo\"} } } }"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_private_docker_registry"><a class="anchor" href="#_private_docker_registry"></a>11.2.5. Private Docker Registry</h4>
<div class="paragraph">
<p>You can pull Docker images from a private registry on a per-application basis. First, you must create a secret in the cluster. Follow the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">Pull an Image from a Private Registry</a> guide to create the secret.</p>
</div>
<div class="paragraph">
<p>Once you have created the secret, you can use the <code>imagePullSecret</code> property to set the secret to use, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.&lt;application&gt;.kubernetes.imagePullSecret=mysecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
<div class="paragraph">
<p>You can also configure the image pull secret at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullSecret: mysecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullSecret: mysecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_annotations"><a class="anchor" href="#_annotations"></a>11.2.6. Annotations</h4>
<div class="paragraph">
<p>You can add annotations to Kubernetes objects on a per-application basis. The supported object types are pod <code>Deployment</code>, <code>Service</code>, and <code>Job</code>. Annotations are defined in a <code>key:value</code> format, allowing for multiple annotations separated by a comma. For more information and use cases on annotations, see <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a>.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can configure applications to use annotations:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.podAnnotations=annotationName:annotationValue
deployer.&lt;application&gt;.kubernetes.serviceAnnotations=annotationName:annotationValue,annotationName2:annotationValue2
deployer.&lt;application&gt;.kubernetes.jobAnnotations=annotationName:annotationValue</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the value of your annotations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_entry_point_style"><a class="anchor" href="#_entry_point_style"></a>11.2.7. Entry Point Style</h4>
<div class="paragraph">
<p>An entry point style affects how application properties are passed to the container to be deployed. Currently, three styles are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exec</code> (default): Passes all application properties and command line arguments in the deployment request as container arguments. Application properties are transformed into the format of <code>--key=value</code>.</p>
</li>
<li>
<p><code>shell</code>: Passes all application properties and command line arguments as environment variables. Each of the applicationor command-line argument properties is transformed into an uppercase string and <code>.</code> characters are replaced with <code>_</code>.</p>
</li>
<li>
<p><code>boot</code>: Creates an environment variable called <code>SPRING_APPLICATION_JSON</code> that contains a JSON representation of all application properties. Command line arguments from the deployment request are set as container args.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In all cases, environment variables defined at the server-level configuration and on a per-application basis are sent on to the container as is.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure an application as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.entryPointStyle=&lt;Entry Point Style&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and <code>&lt;Entry Point Style&gt;</code> with your desired entry point style.</p>
</div>
<div class="paragraph">
<p>You can also configure the entry point style at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    entryPointStyle: entryPointStyle</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    entryPointStyle: entryPointStyle</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>entryPointStyle</code> with the desired entry point style.</p>
</div>
<div class="paragraph">
<p>You should choose an Entry Point Style of either <code>exec</code> or <code>shell</code>, to correspond to how the <code>ENTRYPOINT</code> syntax is defined in the container&#8217;s <code>Dockerfile</code>. For more information and uses cases on <code>exec</code> versus <code>shell</code>, see the <a href="https://docs.docker.com/engine/reference/builder/#entrypoint">ENTRYPOINT</a> section of the Docker documentation.</p>
</div>
<div class="paragraph">
<p>Using the <code>boot</code> entry point style corresponds to using the <code>exec</code> style <code>ENTRYPOINT</code>. Command line arguments from the deployment request are passed to the container, with the addition of application properties being mapped into the <code>SPRING_APPLICATION_JSON</code> environment variable rather than command line arguments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you use the <code>boot</code> Entry Point Style, the <code>deployer.&lt;application&gt;.kubernetes.environmentVariables</code> property must not contain <code>SPRING_APPLICATION_JSON</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_service_account"><a class="anchor" href="#_deployment_service_account"></a>11.2.8. Deployment Service Account</h4>
<div class="paragraph">
<p>You can configure a custom service account for application deployments through properties. You can use an existing service account or create a new one. One way to create a service account is by using <code>kubectl</code>, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl create serviceaccount myserviceaccountname
serviceaccount "myserviceaccountname" created</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then you can configure individual applications as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.deploymentServiceAccountName=myserviceaccountname</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and <code>myserviceaccountname</code> with your service account name.</p>
</div>
<div class="paragraph">
<p>You can also configure the service account name at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    deploymentServiceAccountName: myserviceaccountname</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    deploymentServiceAccountName: myserviceaccountname</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myserviceaccountname</code> with the service account name to be applied to all deployments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_image_pull_policy"><a class="anchor" href="#_image_pull_policy"></a>11.2.9. Image Pull Policy</h4>
<div class="paragraph">
<p>An image pull policy defines when a Docker image should be pulled to the local registry. Currently, three policies are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>IfNotPresent</code> (default): Do not pull an image if it already exists.</p>
</li>
<li>
<p><code>Always</code>: Always pull the image regardless of whether it already exists.</p>
</li>
<li>
<p><code>Never</code>: Never pull an image. Use only an image that already exists.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.imagePullPolicy=Always</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and <code>Always</code> with your desired image pull policy.</p>
</div>
<div class="paragraph">
<p>You can configure an image pull policy at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullPolicy: Always</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullPolicy: Always</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>Always</code> with your desired image pull policy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_labels"><a class="anchor" href="#_deployment_labels"></a>11.2.10. Deployment Labels</h4>
<div class="paragraph">
<p>You can set custom labels on objects related to <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a>. See <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">Labels</a> for more information on labels. Labels are specified in <code>key:value</code> format.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.deploymentLabels=myLabelName:myLabelValue</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application, <code>myLabelName</code> with your label name, and <code>myLabelValue</code> with the value of your label.</p>
</div>
<div class="paragraph">
<p>Additionally, you can apply multiple labels, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.deploymentLabels=myLabelName:myLabelValue,myLabelName2:myLabelValue2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tolerations"><a class="anchor" href="#_tolerations"></a>11.2.11. Tolerations</h4>
<div class="paragraph">
<p>Tolerations work with taints to ensure pods are not scheduled onto particular nodes.
Tolerations are set into the pod configuration while taints are set onto nodes.
See the <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">Taints and Tolerations</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.tolerations=[{key: 'mykey', operator: 'Equal', value: 'myvalue', effect: 'NoSchedule'}]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the key-value pairs according to your desired toleration configuration.</p>
</div>
<div class="paragraph">
<p>You can configure tolerations at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    tolerations:
                      - key: mykey
                        operator: Equal
                        value: myvalue
                        effect: NoSchedule</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    tolerations:
                      - key: mykey
                        operator: Equal
                        value: myvalue
                        effect: NoSchedule</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace the <code>tolerations</code> key-value pairs according to your desired toleration configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="_secret_references"><a class="anchor" href="#_secret_references"></a>11.2.12. Secret References</h4>
<div class="paragraph">
<p>Secrets can be referenced and their entire data contents can be decoded and inserted into the pod environment as individual variables.
See the <a href="https://kubernetes.io/docs/tasks/inject-data-application/distribute-credentials-secure/#configure-all-key-value-pairs-in-a-secret-as-container-environment-variables">Configure all key-value pairs in a Secret as container environment variables</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.secretRefs=testsecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also specify multiple secrets, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.secretRefs=[testsecret,anothersecret]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the <code>secretRefs</code> attribute with the appropriate values for your application environment and secret.</p>
</div>
<div class="paragraph">
<p>You can configure secret references at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    secretRefs:
                      - testsecret
                      - anothersecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    secretRefs:
                      - testsecret
                      - anothersecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace the items of <code>secretRefs</code> with one or more secret names.</p>
</div>
</div>
<div class="sect3">
<h4 id="_secret_key_references"><a class="anchor" href="#_secret_key_references"></a>11.2.13. Secret Key References</h4>
<div class="paragraph">
<p>Secrets can be referenced and their decoded value can be inserted into the pod environment.
See the <a href="https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables">Using Secrets as Environment Variables</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.secretKeyRefs=[{envVarName: 'MY_SECRET', secretName: 'testsecret', dataKey: 'password'}]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the <code>envVarName</code>, <code>secretName</code>, and <code>dataKey</code> attributes with the appropriate values for your application environment and secret.</p>
</div>
<div class="paragraph">
<p>You can configure secret key references at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    secretKeyRefs:
                      - envVarName: MY_SECRET
                        secretName: testsecret
                        dataKey: password</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    secretKeyRefs:
                      - envVarName: MY_SECRET
                        secretName: testsecret
                        dataKey: password</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace the <code>envVarName</code>, <code>secretName</code>, and <code>dataKey</code> attributes with the appropriate values for your secret.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configmap_references"><a class="anchor" href="#_configmap_references"></a>11.2.14. ConfigMap References</h4>
<div class="paragraph">
<p>A ConfigMap can be referenced and its entire data contents can be decoded and inserted into the pod environment as individual variables.
See the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#configure-all-key-value-pairs-in-a-configmap-as-container-environment-variables">Configure all key-value pairs in a ConfigMap as container environment variables</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.configMapRefs=testcm</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also specify multiple ConfigMap instances, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.configMapRefs=[testcm,anothercm]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the <code>configMapRefs</code> attribute with the appropriate values for your application environment and ConfigMap.</p>
</div>
<div class="paragraph">
<p>You can configure ConfigMap references at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams. Edit the appropriate <code>skipper-config-(binder).yaml</code>, replacing <code>(binder)</code> with the corresponding binder in use:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    configMapRefs:
                      - testcm
                      - anothercm</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks by editing the <code>server-config.yaml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    configMapRefs:
                      - testcm
                      - anothercm</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace the items of <code>configMapRefs</code> with one or more secret names.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configmap_key_references"><a class="anchor" href="#_configmap_key_references"></a>11.2.15. ConfigMap Key References</h4>
<div class="paragraph">
<p>A ConfigMap can be referenced and its associated key value inserted into the pod environment.
See the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#define-container-environment-variables-using-configmap-data">Define container environment variables using ConfigMap data</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.configMapKeyRefs=[{envVarName: 'MY_CM', configMapName: 'testcm', dataKey: 'platform'}]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the <code>envVarName</code>, <code>configMapName</code>, and <code>dataKey</code> attributes with the appropriate values for your application environment and ConfigMap.</p>
</div>
<div class="paragraph">
<p>You can configure ConfigMap references at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams. Edit the appropriate <code>skipper-config-(binder).yaml</code>, replacing <code>(binder)</code> with the corresponding binder in use:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    configMapKeyRefs:
                      - envVarName: MY_CM
                        configMapName: testcm
                        dataKey: platform</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks by editing the <code>server-config.yaml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    configMapKeyRefs:
                      - envVarName: MY_CM
                        configMapName: testcm
                        dataKey: platform</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace the <code>envVarName</code>, <code>configMapName</code>, and <code>dataKey</code> attributes with the appropriate values for your ConfigMap.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pod_security_context"><a class="anchor" href="#_pod_security_context"></a>11.2.16. Pod Security Context</h4>
<div class="paragraph">
<p>The pod <a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/">security context</a> specifies security settings for a pod and its containers.</p>
</div>
<div class="paragraph">
<p>The configurable options are listed <a href="#pod-security-context-props">HERE</a>
<span class="small">(more details for each option can be found in the <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.24/#podsecuritycontext-v1-core">Pod Security Context</a> section of the Kubernetes API reference)</span>.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can configure the security context for an individual application pod:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.podSecurityContext={runAsUser: 65534, fsGroup: 65534, supplementalGroups: [65534, 65535], seccompProfile: { type: 'RuntimeDefault' }}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and any attributes with the appropriate values for your container environment.</p>
</div>
<div class="paragraph">
<p>You can configure the pod security context at the global server level as well.
The following example shows how to do so for streams. Edit the appropriate <code>skipper-config-(binder).yaml</code>, replacing <code>(binder)</code> with the corresponding binder in use:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    podSecurityContext:
                      runAsUser: 65534
                      fsGroup: 65534
                      supplementalGroups: [65534,65535]
                      seccompProfile:
                        type: Localhost
                        localhostProfile: my-profiles/profile-allow.json</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks by editing the <code>server-config.yaml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    podSecurityContext:
                      runAsUser: 65534
                      fsGroup: 65534
                      supplementalGroups: [65534,65535]
                      seccompProfile:
                        type: Localhost
                        localhostProfile: my-profiles/profile-allow.json</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Adjust the <code>podSecurityContext</code> attributes with the appropriate values for your container environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_container_security_context"><a class="anchor" href="#_container_security_context"></a>11.2.17. Container Security Context</h4>
<div class="paragraph">
<p>The container <a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/">security context</a> specifies security settings for an individual container.</p>
</div>
<div class="paragraph">
<p>The configurable options are listed <a href="#container-security-context-props">HERE</a>
<span class="small">(more details for each option can be found in the <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.24/#securitycontext-v1-core">Container Security Context</a> section of the Kubernetes API reference</span>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The container security context is applied to all containers in your deployment unless they have their own security already explicitly defined, including regular init containers, stateful set init containers, and additional containers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows how you can configure the security context for containers in an individual application pod:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.containerSecurityContext={allowPrivilegeEscalation: true, runAsUser: 65534}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and any attributes with the appropriate values for your container environment.</p>
</div>
<div class="paragraph">
<p>You can configure the container security context at the global server level as well.
The following example shows how to do so for streams. Edit the appropriate <code>skipper-config-(binder).yaml</code>, replacing <code>(binder)</code> with the corresponding binder in use:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    containerSecurityContext:
                      allowPrivilegeEscalation: true
                      runAsUser: 65534</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks by editing the <code>server-config.yaml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    containerSecurityContext:
                      allowPrivilegeEscalation: true
                      runAsUser: 65534</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Adjust the <code>containerSecurityContext</code> attributes with the appropriate values for your container environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_service_ports"><a class="anchor" href="#_service_ports"></a>11.2.18. Service Ports</h4>
<div class="paragraph">
<p>When you deploy applications, a kubernetes Service object is created with a default port of <code>8080</code>. If the <code>server.port</code> property is set, it overrides the default port value. You can add additional ports to the Service object on a per-application basis. You can add multiple ports with a comma delimiter.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can configure additional ports on a Service object for an application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.servicePorts=5000
deployer.&lt;application&gt;.kubernetes.servicePorts=5000,9000</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the value of your ports.</p>
</div>
</div>
<div class="sect3">
<h4 id="_statefulset_init_container"><a class="anchor" href="#_statefulset_init_container"></a>11.2.19. StatefulSet Init Container</h4>
<div class="paragraph">
<p>When deploying an application by using a StatefulSet, an Init Container is used to set the instance index in the pod.
By default, the image used is <code>busybox</code>, which you can be customize.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure application pods:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.statefulSetInitContainerImageName=myimage:mylabel</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the <code>statefulSetInitContainerImageName</code> attribute with the appropriate value for your environment.</p>
</div>
<div class="paragraph">
<p>You can configure the StatefulSet Init Container at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams. Edit the appropriate <code>skipper-config-(binder).yaml</code>, replacing <code>(binder)</code> with the corresponding binder in use:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    statefulSetInitContainerImageName: myimage:mylabel</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks by editing the <code>server-config.yaml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    statefulSetInitContainerImageName: myimage:mylabel</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace the <code>statefulSetInitContainerImageName</code> attribute with the appropriate value for your environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_init_containers"><a class="anchor" href="#_init_containers"></a>11.2.20. Init Containers</h4>
<div class="paragraph">
<p>When you deploy applications, you can set a custom Init Container on a per-application basis.
Refer to the <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/">Init Containers</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can configure an Init Container for an application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.initContainer={containerName: 'test', imageName: 'busybox:latest', commands: ['sh', '-c', 'echo hello']}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and set the values of the <code>initContainer</code> attributes appropriate for your Init Container.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lifecycle_support"><a class="anchor" href="#_lifecycle_support"></a>11.2.21. Lifecycle Support</h4>
<div class="paragraph">
<p>When you deploy applications, you may attach <code>postStart</code> and <code>preStop</code> <a href="https://kubernetes.io/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/">Lifecycle handlers</a> to execute commands.
The Kubernetes API supports other types of handlers besides <code>exec</code>. This feature may be extended to support additional actions in a future release.
To configure the Lifecycle handlers as shown in the linked page above,specify each command as a comma-delimited list, using the following property keys:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.lifecycle.postStart.exec.command=/bin/sh,-c,'echo Hello from the postStart handler &gt; /usr/share/message'
deployer.&lt;application&gt;.kubernetes.lifecycle.preStop.exec.command=/bin/sh,-c,'nginx -s quit; while killall -0 nginx; do sleep 1; done'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_additional_containers"><a class="anchor" href="#_additional_containers"></a>11.2.22. Additional Containers</h4>
<div class="paragraph">
<p>When you deploy applications, you may need one or more containers to be deployed along with the main container.
This would allow you to adapt some deployment patterns such as sidecar, adapter in case of multi container pod setup.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can configure additional containers for an application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.additionalContainers=[{name: 'c1', image: 'busybox:latest', command: ['sh', '-c', 'echo hello1'], volumeMounts: [{name: 'test-volume', mountPath: '/tmp', readOnly: true}]},{name: 'c2', image: 'busybox:1.26.1', command: ['sh', '-c', 'echo hello2']}]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-deployer"><a class="anchor" href="#configuration-kubernetes-deployer"></a>11.3. Deployer Properties</h3>
<div class="paragraph">
<p>You can use the following configuration properties the <a href="https://github.com/spring-cloud/spring-cloud-deployer-kubernetes">Kubernetes deployer</a> to customize how Streams and Tasks are deployed.
When deploying with the Data Flow shell, you can use the syntax <code>deployer.&lt;appName&gt;.kubernetes.&lt;deployerPropertyName&gt;</code>.
These properties are also used when configuring the <a href="#configuration-kubernetes-tasks">Kubernetes task platforms</a> in the Data Flow server and Kubernetes platforms in Skipper for deploying Streams.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deployer Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace to use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">environment variable <code>KUBERNETES_NAMESPACE</code>, otherwise <code>default</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deployment.nodeSelector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The node selectors to apply to the deployment in <code>key:value</code> format. Multiple node selectors are comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secrets for a access a private registry to pull images.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullPolicy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Image Pull Policy to apply when pulling images. Valid options are <code>Always</code>, <code>IfNotPresent</code>, and <code>Never</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IfNotPresent</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>livenessProbeDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay in seconds when the Kubernetes liveness check of the app container should start checking its health status.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>livenessProbePeriod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period in seconds for performing the Kubernetes liveness check of the app container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>60</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>livenessProbeTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout in seconds for the Kubernetes liveness check of the app container.  If the health check takes longer than this value to return it is assumed as 'unavailable'.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>livenessProbePath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path that app container has to respond to for liveness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>livenessProbePort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that app container has to respond on for liveness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startupProbeDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay in seconds when the Kubernetes startup check of the app container should start checking its health status.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startupProbePeriod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period in seconds for performing the Kubernetes startup check of the app container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startupProbeFailure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of probe failures allowed for the startup probe before the pod is restarted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startupHttpProbePath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path that app container has to respond to for startup check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startupProbePort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that app container has to respond on for startup check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readinessProbeDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay in seconds when the readiness check of the app container should start checking if the module is fully up and running.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readinessProbePeriod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period in seconds to perform the readiness check of the app container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readinessProbeTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout in seconds that the app container has to respond to its health status during the readiness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readinessProbePath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path that app container has to respond to for readiness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readinessProbePort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that app container has to respond on for readiness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>probeCredentialsSecret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The secret name containing the credentials to use when accessing secured probe endpoints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limits.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit, maximum needed value to allocate a pod, Default unit is mebibytes, 'M' and 'G" suffixes supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limits.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit, maximum needed value to allocate a pod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requests.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory request, guaranteed needed value to allocate a pod.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requests.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU request, guaranteed needed value to allocate a pod.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.nodeAffinity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The node affinity expressed in YAML format.  e.g. <code><code>{ requiredDuringSchedulingIgnoredDuringExecution: { nodeSelectorTerms: [ { matchExpressions: [ { key: 'kubernetes.io/e2e-az-name', operator: 'In', values: [ 'e2e-az1', 'e2e-az2']}]}]}, preferredDuringSchedulingIgnoredDuringExecution: [ { weight: 1, preference: { matchExpressions: [ { key: 'another-node-label-key', operator: 'In', values: [ 'another-node-label-value' ]}]}}]}</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.podAffinity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The pod affinity expressed in YAML format.  e.g. <code><code>{ requiredDuringSchedulingIgnoredDuringExecution: { labelSelector: [ { matchExpressions: [ { key: 'app', operator: 'In', values: [ 'store']}]}], topologyKey: 'kubernetes.io/hostnam'}, preferredDuringSchedulingIgnoredDuringExecution: [ { weight: 1, podAffinityTerm: { labelSelector: { matchExpressions: [ { key: 'security', operator: 'In', values: [ 'S2' ]}]}, topologyKey: 'failure-domain.beta.kubernetes.io/zone'}}]}</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.podAntiAffinity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The pod anti-affinity expressed in YAML format.  e.g. <code><code>{ requiredDuringSchedulingIgnoredDuringExecution: { labelSelector: { matchExpressions: [ { key: 'app', operator: 'In', values: [ 'store']}]}], topologyKey: 'kubernetes.io/hostname'}, preferredDuringSchedulingIgnoredDuringExecution: [ { weight: 1, podAffinityTerm: { labelSelector: { matchExpressions: [ { key: 'security', operator: 'In', values: [ 'S2' ]}]}, topologyKey: 'failure-domain.beta.kubernetes.io/zone'}}]}</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statefulSet.volumeClaimTemplate.storageClassName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the storage class for a stateful set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statefulSet.volumeClaimTemplate.storage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The storage amount. Default unit is mebibytes, 'M' and 'G" suffixes supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>environmentVariables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of environment variables to set for any deployed app container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entryPointStyle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry point style used for the Docker image. Used to determine how to pass in properties. Can be <code>exec</code>, <code>shell</code>, and <code>boot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exec</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createLoadBalancer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a "LoadBalancer" for the service created for each app. This facilitates assignment of external IP to app.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>serviceAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service annotations to set for the service created for each application. String of the format <code>annotation1:value1,annotation2:value2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pod annotations to set for the pod created for each deployment.  String of the format <code>annotation1:value1,annotation2:value2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job annotations to set for the pod or job created for a job. String of the format <code>annotation1:value1,annotation2:value2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>priorityClassName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pod Spec priorityClassName. Create a PriorityClass in Kubernetes before using this property. See <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/">Pod Priority and Preemption</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shareProcessNamespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will assign value to Pod.spec.shareProcessNamespace. See <a href="https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/">Share Process Namespace between Containers in a Pod</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minutesToWaitForLoadBalancer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait for load balancer to be available before attempting delete of service (in minutes).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxTerminatedErrorRestarts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum allowed restarts for app that fails due to an error or excessive resource use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxCrashLoopBackOffRestarts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum allowed restarts for app that is in a CrashLoopBackOff.  Values are <code>Always</code>, <code>IfNotPresent</code>, <code>Never</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IfNotPresent</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>volumeMounts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">volume mounts expressed in YAML format.  e.g. <code><code>[{name: 'testhostpath', mountPath: '/test/hostPath'}, {name: 'testpvc', mountPath: '/test/pvc'}, {name: 'testnfs', mountPath: '/test/nfs'}]</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>volumes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volumes that a Kubernetes instance supports specifed in YAML format.  e.g. <code><code>[{name: testhostpath, hostPath: { path: '/test/override/hostPath' }},{name: 'testpvc', persistentVolumeClaim: { claimName: 'testClaim', readOnly: 'true' }}, {name: 'testnfs', nfs: { server: '10.0.0.1:111', path: '/test/nfs' }}]</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostNetwork</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostNetwork setting for the deployments, see  <a href="https://kubernetes.io/docs/api-reference/v1/definitions/#_v1_podspec" class="bare">kubernetes.io/docs/api-reference/v1/definitions/#_v1_podspec</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createDeployment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a "Deployment" with a "Replica Set" instead of a "Replication Controller".</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createJob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a "Job" instead of just a "Pod" when launching tasks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overrides the default entry point command with the provided command and arguments.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerPorts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds additional ports to expose on the container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createNodePort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The explicit port to use when <code>NodePort</code> is the <code>Service</code> type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deploymentServiceAccountName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service account name used in app deployments. Note: The service account name used for app deployments is derived from the Data Flow servers deployment.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deploymentLabels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional labels to add to the deployment in <code>key:value</code> format. Multiple labels are comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootMajorVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Spring Boot major version to use. Currently only used to configure Spring Boot version specific probe paths automatically. Valid options are <code>1</code> or <code>2</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tolerations.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key to use for the toleration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tolerations.effect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The toleration effect. See <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration" class="bare">kubernetes.io/docs/concepts/configuration/taint-and-toleration</a> for valid options.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tolerations.operator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The toleration operator. See <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/" class="bare">kubernetes.io/docs/concepts/configuration/taint-and-toleration/</a> for valid options.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tolerations.tolerationSeconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of seconds defining how long the pod will stay bound to the node after a taint is added.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tolerations.value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The toleration value to apply, used in conjunction with <code>operator</code> to select to appropriate <code>effect</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secretRefs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the secret(s) to load the entire data contents into individual environment variables. Multiple secrets may be comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secretKeyRefs.envVarName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The environment variable name to hold the secret data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secretKeyRefs.secretName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The secret name to access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secretKeyRefs.dataKey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key name to obtain secret data from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configMapRefs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the ConfigMap(s) to load the entire data contents into individual environment variables. Multiple ConfigMaps be comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configMapKeyRefs.envVarName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The environment variable name to hold the ConfigMap data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configMapKeyRefs.configMapName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ConfigMap name to access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configMapKeyRefs.dataKey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key name to obtain ConfigMap data from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maximumConcurrentTasks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum concurrent tasks allowed for this platform instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p>
<p class="tableblock"><a id="pod-security-context-props"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The security context applied to the pod expressed in YAML format. e.g. <code><code>{runAsUser: 65534, fsGroup: 65534, supplementalGroups: [65534, 65535], seccompProfile: { type: 'RuntimeDefault' }}</code></code>. Note this defines the entire pod security context - smaller portions of the security context can instead be configured via the  <code>podSecurityContext.**</code> properties below.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.runAsUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric user ID to run pod container processes under</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.runAsGroup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric group id to run the entrypoint of the container process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.runAsNonRoot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the container must run as a non-root user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.fsGroup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric group ID for the volumes of the pod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.fsGroupChangePolicy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines behavior of changing ownership and permission of the volume before being exposed inside pod (only applies to volume types which support fsGroup based ownership and permissions) - possible values are "OnRootMismatch", "Always"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.supplementalGroups</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric group IDs applied to the pod container processes, in addition to the container&#8217;s primary group ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.seccompProfile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The seccomp options to use for the pod containers expressed in YAML format. e.g. <code><code>{ seccompProfile: { type: 'Localhost', localhostProfile: 'my-profiles/profile-allow.json' }}</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.seLinuxOptions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SELinux context to be applied to the pod containers expressed in YAML format. e.g. <code><code>{ level: "s0:c123,c456" }</code></code> (not used when spec.os.name is windows).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.sysctls</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of namespaced sysctls used for the pod expressed in YAML format. e.g. <code><code>[{name: "kernel.shm_rmid_forced", value: 0}]</code></code> (not used when spec.os.name is windows).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>podSecurityContext.windowsOptions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Windows specific settings applied to all containers expressed in YAML format. e.g. <code><code>{ gmsaCredentialSpec: "specA", gmsaCredentialSpecName: "specA-name"}</code></code> (only used when spec.os.name is windows).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p>
<p class="tableblock"><a id="container-security-context-props"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The security context applied to the containers expressed in YAML format. e.g. <code><code>{allowPrivilegeEscalation: true, runAsUser: 65534}</code></code>. Note this defines the entire container security context - smaller portions of the security context can instead be configured via the  <code>containerSecurityContext.**</code> properties below.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.allowPrivilegeEscalation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether a process can gain more privileges than its parent process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.capabilities</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capabilities to add/drop when running the container expressed in YAML format. e.g. <code><code>{ add: [ "a", "b" ], drop: [ "c" ] }</code></code> (only used when spec.os.name is not windows)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.privileged</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run container in privileged mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.procMount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of proc mount to use for the container (only used when spec.os.name is not windows)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.readOnlyRootFilesystem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mounts the container&#8217;s root filesystem as read-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.runAsUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric user ID to run pod container processes under</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.runAsGroup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric group id to run the entrypoint of the container process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.runAsNonRoot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the container must run as a non-root user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.seccompProfile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The seccomp options to use for the pod containers expressed in YAML format.  e.g. <code><code>{ seccompProfile: { type: 'Localhost', localhostProfile: 'my-profiles/profile-allow.json' }}</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.seLinuxOptions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SELinux context to be applied to the pod containers expressed in YAML format. e.g. <code><code>{ level: "s0:c123,c456" }</code></code> (not used when spec.os.name is windows).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.sysctls</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of namespaced sysctls used for the pod expressed in YAML format. e.g. <code><code>[{name: "kernel.shm_rmid_forced", value: 0}]</code></code> (not used when spec.os.name is windows).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSecurityContext.windowsOptions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Windows specific settings applied to all containers expressed in YAML format. e.g. <code><code>{ gmsaCredentialSpec: "specA", gmsaCredentialSpecName: "specA-name"}</code></code> (only used when spec.os.name is windows).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statefulSetInitContainerImageName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom image name to use for the StatefulSet Init Container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initContainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An Init Container expressed in YAML format to be applied to a pod. e.g. <code><code>{containerName: 'test', imageName: 'busybox:latest', commands: ['sh', '-c', 'echo hello']}</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>additionalContainers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional containers expressed in YAML format to be applied to a pod. e.g. <code><code>[{name: 'c1', image: 'busybox:latest', command: ['sh', '-c', 'echo hello1'], volumeMounts: [{name: 'test-volume', mountPath: '/tmp', readOnly: true}]}, {name: 'c2', image: 'busybox:1.26.1', command: ['sh', '-c', 'echo hello2']}]</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;none&gt;</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-tasks"><a class="anchor" href="#configuration-kubernetes-tasks"></a>11.4. Tasks</h3>
<div class="paragraph">
<p>The Data Flow server is responsible for deploying Tasks.
Tasks that are launched by Data Flow write their state to the same database that is used by the Data Flow server.
For Tasks which are Spring Batch Jobs, the job and step execution data is also stored in this database.
As with Skipper, Tasks can be launched to multiple platforms.
When Data Flow is running on Kubernetes, a Task platfom must be defined.
To configure new platform accounts that target Kubernetes, provide an entry under the <code>spring.cloud.dataflow.task.platform.kubernetes</code> section in your <code>application.yaml</code> file for via another Spring Boot supported mechanism.
In the following example, two Kubernetes platform accounts named <code>dev</code> and  <code>qa</code> are created.
The keys such as <code>memory</code> and <code>disk</code> are <a href="#configuration-cloudfoundry-deployer">Cloud Foundry Deployer Properties</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      task:
        platform:
          kubernetes:
            accounts:
              dev:
                namespace: devNamespace
                imagePullPolicy: Always
                entryPointStyle: exec
                limits:
                  cpu: 4
              qa:
                namespace: qaNamespace
                imagePullPolicy: IfNotPresent
                entryPointStyle: boot
                limits:
                  memory: 2048m</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By defining one platform as <code>default</code> allows you to skip using <code>platformName</code> where its use would otherwise be required.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When launching a task, pass the value of the platform account name using the task launch option <code>--platformName</code>  If you do not pass a value for <code>platformName</code>, the value <code>default</code> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying a task to multiple platforms, the configuration of the task needs to connect to the same database as the Data Flow Server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the Data Flow server that is on Kubernetes to deploy tasks to Cloud Foundry and Kubernetes.  See the section on <a href="#configuration-cloudfoundry-tasks">Cloud Foundry Task Platform Configuration</a> for more information.</p>
</div>
<div class="paragraph">
<p>Detailed examples for launching and scheduling tasks across multiple platforms, are available in this section <a href="https://dataflow.spring.io/docs/recipes/multi-platform-deployment/">Multiple Platform Support for Tasks</a> on <a href="http://dataflow.spring.io" class="bare">dataflow.spring.io</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-general"><a class="anchor" href="#configuration-kubernetes-general"></a>11.5. General Configuration</h3>
<div class="paragraph">
<p>The Spring Cloud Data Flow server for Kubernetes uses the <a href="https://github.com/fabric8io/spring-cloud-kubernetes"><code>spring-cloud-kubernetes</code></a> module to process secrets that are mounted under <code>/etc/secrets</code>. ConfigMaps must be mounted as <code>application.yaml</code> in the <code>/config</code> directory that is processed by Spring Boot. To avoid access to the Kubernetes API server the <code>SPRING_CLOUD_KUBERNETES_CONFIG_ENABLE_API</code> and <code>SPRING_CLOUD_KUBERNETES_SECRETS_ENABLE_API</code> are set to <code>false</code>.</p>
</div>
<div class="sect3">
<h4 id="_using_configmap_and_secrets"><a class="anchor" href="#_using_configmap_and_secrets"></a>11.5.1. Using ConfigMap and Secrets</h4>
<div class="paragraph">
<p>You can pass configuration properties to the Data Flow Server by using Kubernetes <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configmap/">ConfigMap</a> and <a href="https://kubernetes.io/docs/concepts/configuration/secret/">secrets</a>.</p>
</div>
<div class="paragraph">
<p>The following example shows one possible configuration, which enables MariaDB and sets a memory limit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: scdf-server
  labels:
    app: scdf-server
data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    limits:
                      memory: 1024Mi
      datasource:
        url: jdbc:mariadb://${MARIADB_SERVICE_HOST}:${MARIADB_SERVICE_PORT}/database
        username: root
        password: ${database-password}
        driverClassName: org.mariadb.jdbc.Driver
        testOnBorrow: true
        validationQuery: "SELECT 1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example assumes that MariaDB is deployed with <code>mariadb</code> as the service name. Kubernetes publishes the host and port values of these services as environment variables that we can use when configuring the apps we deploy.</p>
</div>
<div class="paragraph">
<p>We prefer to provide the MariaDB connection password in a Secrets file, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Secret
metadata:
  name: mariadb
  labels:
    app: mariadb
data:
  database-password: eW91cnBhc3N3b3Jk</code></pre>
</div>
</div>
<div class="paragraph">
<p>The password is a base64-encoded value.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-rdbms"><a class="anchor" href="#configuration-kubernetes-rdbms"></a>11.6. Database</h3>
<div id="configuration-database-overview" class="paragraph">
<p>A relational database is used to store stream and task definitions as well as the state of executed tasks.
Spring Cloud Data Flow provides schemas for <strong>MariaDB</strong>, <strong>MySQL</strong>, <strong>Oracle</strong>, <strong>PostgreSQL</strong>, <strong>Db2</strong>, <strong>SQL Server</strong>, and <strong>H2</strong>. The schema is automatically created when the server starts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The JDBC drivers for <strong>MariaDB</strong>, <strong>MySQL</strong> (via the <em>MariaDB</em> driver), <strong>PostgreSQL</strong>, <strong>SQL Server</strong> are available without additional configuration. To use any other database you need to put the corresponding JDBC driver jar on the classpath of the server as described <a href="#add-custom-driver">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To configure a database the following properties must be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.datasource.url</code></p>
</li>
<li>
<p><code>spring.datasource.username</code></p>
</li>
<li>
<p><code>spring.datasource.password</code></p>
</li>
<li>
<p><code>spring.datasource.driver-class-name</code></p>
</li>
<li>
<p><code>spring.jpa.database-platform</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>username</code> and <code>password</code> are the same regardless of the database. However, the <code>url</code> and <code>driver-class-name</code> vary per database as follows.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="small">Database</span></th>
<th class="tableblock halign-left valign-top"><span class="small">spring.datasource.url</span></th>
<th class="tableblock halign-left valign-top"><span class="small">spring.datasource.driver-class-name</span></th>
<th class="tableblock halign-left valign-top"><span class="small">spring.jpa.database-platform</span></th>
<th class="tableblock halign-left valign-top"><span class="small">Driver included</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.0 - 10.1</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB10Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.2</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB102Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.3 - 10.5</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB103Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MariaDB 10.6+</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mariadb://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MariaDB106Dialect</code></span><sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                  
<tr>                                                                                   
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MySQL 5.7</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mysql://${db-hostname}:${db-port}/${db-name}?permitMysqlScheme</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MySQL57Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>MySQL 8.0+</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:mysql://${db-hostname}:${db-port}/${db-name}?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;autoReconnect=true&amp;permitMysqlScheme</code></span><sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.mariadb.jdbc.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.hibernate.dialect.MySQL8Dialect</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>PostgresSQL</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:postgres://${db-hostname}:${db-port}/${db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>org.postgresql.Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>SQL Server</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:sqlserver://${db-hostname}:${db-port};databasename=${db-name}&amp;encrypt=false</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Yes</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>DB2</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:db2://${db-hostname}:${db-port}/{db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>com.ibm.db2.jcc.DB2Driver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>No</code></span></p></td>
</tr>                                                                                   
<tr>                                                                                    
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Oracle</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>jdbc:oracle:thin:@${db-hostname}:${db-port}/{db-name}</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>oracle.jdbc.OracleDriver</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>Remove for Hibernate default</code></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><code>No</code></span></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_h2_2"><a class="anchor" href="#_h2_2"></a>11.6.1. H2</h4>
<div class="paragraph">
<p>When no other database is configured then Spring Cloud Data Flow uses an embedded instance of the <strong>H2</strong> database as the default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>H2</strong> is good for development purposes but is not recommended for production use nor is it supported as an external mode.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_database_configuration_2"><a class="anchor" href="#_database_configuration_2"></a>11.6.2. Database configuration</h4>
<div class="paragraph">
<p>When running in Kubernetes, the database properties are typically set in the ConfigMap. For instance, if you use MariaDB in addition to a password in the secrets file, you could provide the following properties in the ConfigMap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      datasource:
        url: jdbc:mariadb://${MARIADB_SERVICE_HOST}:${MARIADB_SERVICE_PORT}/database
        username: root
        password: ${database-password}
        driverClassName: org.mariadb.jdbc.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, for PostgreSQL you could use the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">data:
  application.yaml: |-
    spring:
      datasource:
        url: jdbc:postgresql://${PGSQL_SERVICE_HOST}:${PGSQL_SERVICE_PORT}/database
        username: root
        password: ${postgres-password}
        driverClassName: org.postgresql.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following YAML snippet from a Deployment is an example of mounting a ConfigMap as <code>application.yaml</code> under <code>/config</code> where Spring Boot will process it plus a Secret mounted under <code>/etc/secrets</code> where it will get picked up by the spring-cloud-kubernetes library due to the environment variable <code>SPRING_CLOUD_KUBERNETES_SECRETS_PATHS</code> being set to <code>/etc/secrets</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
      containers:
      - name: scdf-server
        image: springcloud/spring-cloud-dataflow-server:2.5.0.BUILD-SNAPSHOT
        imagePullPolicy: Always
        volumeMounts:
          - name: config
            mountPath: /config
            readOnly: true
          - name: database
            mountPath: /etc/secrets/database
            readOnly: true
        ports:
...
      volumes:
        - name: config
          configMap:
            name: scdf-server
            items:
            - key: application.yaml
              path: application.yaml
        - name: database
          secret:
            secretName: mariadb</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find migration scripts for specific database types in the <a href="https://github.com/spring-cloud/spring-cloud-task/tree/master/spring-cloud-task-core/src/main/resources/org/springframework/cloud/task/migration">spring-cloud-task</a> repo.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-monitoring-management"><a class="anchor" href="#configuration-kubernetes-monitoring-management"></a>11.7. Monitoring and Management</h3>
<div class="paragraph">
<p>We recommend using the <code>kubectl</code> command for troubleshooting streams and tasks.</p>
</div>
<div class="paragraph">
<p>You can list all artifacts and resources used by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl get all,cm,secrets,pvc</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can list all resources used by a specific application or service by using a label to select resources. The following command lists all resources used by the <code>mariadb</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl get all -l app=mariadb</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get the logs for a specific pod by issuing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl logs pod &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the pod is continuously getting restarted, you can add <code>-p</code> as an option to see the previous log, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl logs -p &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also tail or follow a log by adding an <code>-f</code> option, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl logs -f &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A useful command to help in troubleshooting issues, such as a container that has a fatal error when starting up, is to use the <code>describe</code> command, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl describe pod ticktock-log-0-qnk72</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_inspecting_server_logs"><a class="anchor" href="#_inspecting_server_logs"></a>11.7.1. Inspecting Server Logs</h4>
<div class="paragraph">
<p>You can access the server logs by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl get pod -l app=scdf=server
kubectl logs &lt;scdf-server-pod-name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_streams"><a class="anchor" href="#_streams"></a>11.7.2. Streams</h4>
<div class="paragraph">
<p>Stream applications are deployed with the stream name followed by the name of the application. For processors and sinks, an instance index is also appended.</p>
</div>
<div class="paragraph">
<p>To see all the pods that are deployed by the Spring Cloud Data Flow server, you can specify the <code>role=spring-app</code> label, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl get pod -l role=spring-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see details for a specific application deployment you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl describe pod &lt;app-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To view the application logs, you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl logs &lt;app-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you would like to tail a log you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl logs -f &lt;app-pod-name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tasks"><a class="anchor" href="#_tasks"></a>11.7.3. Tasks</h4>
<div class="paragraph">
<p>Tasks are launched as bare pods without a replication controller. The pods remain after the tasks complete, which gives you an opportunity to review the logs.</p>
</div>
<div class="paragraph">
<p>To see all pods for a specific task, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl get pod -l task-name=&lt;task-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To review the task logs, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl logs &lt;task-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have two options to delete completed pods. You can delete them manually once they are no longer needed or you can use the Data Flow shell <code>task execution cleanup</code> command to remove the completed pod for a task execution.</p>
</div>
<div class="paragraph">
<p>To delete the task pod manually, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl delete pod &lt;task-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the <code>task execution cleanup</code> command, you must first determine the <code>ID</code> for the task execution. To do so, use the <code>task execution list</code> command, as the following example (with output) shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">dataflow:&gt;task execution list
╔═════════╤══╤════════════════════════════╤════════════════════════════╤═════════╗
║Task Name│ID│         Start Time         │          End Time          │Exit Code║
╠═════════╪══╪════════════════════════════╪════════════════════════════╪═════════╣
║task1    │1 │Fri May 05 18:12:05 EDT 2017│Fri May 05 18:12:05 EDT 2017│0        ║
╚═════════╧══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have the ID, you can issue the command to cleanup the execution artifacts (the completed pod), as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">dataflow:&gt;task execution cleanup --id 1
Request to clean up resources for task execution 1 has been submitted</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_database_credentials_for_tasks"><a class="anchor" href="#_database_credentials_for_tasks"></a>Database Credentials for Tasks</h5>
<div class="paragraph">
<p>By default Spring Cloud Data Flow passes database credentials as properties to the pod at task launch time.
If using the <code>exec</code>  or <code>shell</code> entry point styles the DB credentials will be viewable if the user does a <code>kubectl describe</code> on the task&#8217;s pod.
To configure Spring Cloud Data Flow to use Kubernetes Secrets:  Set <code>spring.cloud.dataflow.task.use.kubernetes.secrets.for.db.credentials</code> property to <code>true</code>. If using the yaml files provided by Spring Cloud Data Flow update the `src/kubernetes/server/server-deployment.yaml to add the following environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">- name: SPRING_CLOUD_DATAFLOW_TASK_USE_KUBERNETES_SECRETS_FOR_DB_CREDENTIALS
  value: 'true'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If upgrading from a previous version of SCDF be sure to verify that <code>spring.datasource.username</code> and <code>spring.datasource.password</code> environment variables are present in the <code>secretKeyRefs</code> in the server-config.yaml.  If not, add it as shown in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
  task:
    platform:
      kubernetes:
        accounts:
          default:
            secretKeyRefs:
              - envVarName: "spring.datasource.password"
                secretName: mariadb
                dataKey: database-password
              - envVarName: "spring.datasource.username"
                  secretName: mariadb
                  dataKey: database-username
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also verify that the associated secret(dataKey) is also available in secrets.  SCDF provides an example of this for MariaDB here: <code>src/kubernetes/mariadb/mariadb-svc.yaml</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Passing of DB credentials via properties by default is to preserve to backwards compatibility.  This will be feature will be removed in future release.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scheduling"><a class="anchor" href="#_scheduling"></a>11.8. Scheduling</h3>
<div class="paragraph">
<p>This section covers customization of how scheduled tasks are configured. Scheduling of tasks is enabled by default in the Spring Cloud Data Flow Kubernetes Server. Properties are used to influence settings for scheduled tasks and can be configured on a global or per-schedule basis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unless noted, properties set on a per-schedule basis always take precedence over properties set as the server configuration. This arrangement allows for the ability to override global server level properties for a specific schedule.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_entry_point_style_2"><a class="anchor" href="#_entry_point_style_2"></a>11.8.1. Entry Point Style</h4>
<div class="paragraph">
<p>An Entry Point Style affects how application properties are passed to the task container to be deployed. Currently, three styles are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exec</code>: (default) Passes all application properties as command line arguments.</p>
</li>
<li>
<p><code>shell</code>: Passes all application properties as environment variables.</p>
</li>
<li>
<p><code>boot</code>: Creates an environment variable called <code>SPRING_APPLICATION_JSON</code> that contains a JSON representation of all application properties.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure the entry point style as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.kubernetes.entryPointStyle=&lt;Entry Point Style&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;Entry Point Style&gt;</code> with your desired Entry Point Style.</p>
</div>
<div class="paragraph">
<p>You can also configure the Entry Point Style at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_ENTRY_POINT_STYLE
  value: entryPointStyle</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>entryPointStyle</code> with the desired Entry Point Style.</p>
</div>
<div class="paragraph">
<p>You should choose an Entry Point Style of either <code>exec</code> or <code>shell</code>, to correspond to how the <code>ENTRYPOINT</code> syntax is defined in the container&#8217;s <code>Dockerfile</code>. For more information and uses cases on <code>exec</code> vs <code>shell</code>, see the <a href="https://docs.docker.com/engine/reference/builder/#entrypoint">ENTRYPOINT</a> section of the Docker documentation.</p>
</div>
<div class="paragraph">
<p>Using the <code>boot</code> Entry Point Style corresponds to using the <code>exec</code> style <code>ENTRYPOINT</code>. Command line arguments from the deployment request are passed to the container, with the addition of application properties mapped into the <code>SPRING_APPLICATION_JSON</code> environment variable rather than command line arguments.</p>
</div>
<div class="sect4">
<h5 id="_ttlsecondsafterfinished"><a class="anchor" href="#_ttlsecondsafterfinished"></a>ttlSecondsAfterFinished</h5>
<div class="paragraph">
<p>When scheduling an application, You can clean up finished Jobs (either Complete or Failed) automatically by specifying <code>ttlSecondsAfterFinished</code> value.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure application jobs:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.&lt;application&gt;.kubernetes.cron.ttlSecondsAfterFinished=86400</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;application&gt;</code> with the name of your application and the <code>ttlSecondsAfterFinished</code> attribute with the appropriate value for clean up finished Jobs.</p>
</div>
<div class="paragraph">
<p>You can configure the <code>ttlSecondsAfterFinished</code> at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="paragraph">
<p>You can configure an image pull policy at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_TTL_SECONDS_AFTER_FINISHED
  value: 86400</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_environment_variables_2"><a class="anchor" href="#_environment_variables_2"></a>11.8.2. Environment Variables</h4>
<div class="paragraph">
<p>To influence the environment settings for a given application, you can take advantage of the <code>spring.cloud.deployer.kubernetes.environmentVariables</code> property.
For example, a common requirement in production settings is to influence the JVM memory arguments.
You can achieve this by using the <code>JAVA_TOOL_OPTIONS</code> environment variable, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.kubernetes.environmentVariables=JAVA_TOOL_OPTIONS=-Xmx1024m</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying stream applications or launching task applications where some of the properties may contain sensitive information, use the <code>shell</code> or <code>boot</code> as the <code>entryPointStyle</code>. This is because the <code>exec</code> (default) converts all properties to command line arguments and thus may not be secure in some environments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additionally you can configure environment variables at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When specifying environment variables in the server configuration and on a per-schedule basis, environment variables will be merged. This allows for the ability to set common environment variables in the server configuration and more specific at the specific schedule level.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_ENVIRONMENT_VARIABLES
  value: myVar=myVal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myVar=myVal</code> with your desired environment variables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_image_pull_policy_2"><a class="anchor" href="#_image_pull_policy_2"></a>11.8.3. Image Pull Policy</h4>
<div class="paragraph">
<p>An image pull policy defines when a Docker image should be pulled to the local registry. Currently, three policies are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>IfNotPresent</code>: (default) Do not pull an image if it already exists.</p>
</li>
<li>
<p><code>Always</code>: Always pull the image regardless of whether it already exists.</p>
</li>
<li>
<p><code>Never</code>: Never pull an image. Use only an image that already exists.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure containers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.kubernetes.imagePullPolicy=Always</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>Always</code> with your desired image pull policy.</p>
</div>
<div class="paragraph">
<p>You can configure an image pull policy at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_IMAGE_PULL_POLICY
  value: Always</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>Always</code> with your desired image pull policy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_private_docker_registry_2"><a class="anchor" href="#_private_docker_registry_2"></a>11.8.4. Private Docker Registry</h4>
<div class="paragraph">
<p>Docker images that are private and require authentication can be pulled by configuring a Secret. First, you must create a Secret in the cluster. Follow the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">Pull an Image from a Private Registry</a> guide to create the Secret.</p>
</div>
<div class="paragraph">
<p>Once you have created the secret, use the <code>imagePullSecret</code> property to set the secret to use, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>deployer.kubernetes.imagePullSecret=mysecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
<div class="paragraph">
<p>You can also configure the image pull secret at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_IMAGE_PULL_SECRET
  value: mysecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_namespace"><a class="anchor" href="#_namespace"></a>11.8.5. Namespace</h4>
<div class="paragraph">
<p>By default the namespace used for scheduled tasks is <code>default</code>. This value can be set at the server level configuration in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_NAMESPACE
  value: mynamespace</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_service_account"><a class="anchor" href="#_service_account"></a>11.8.6. Service Account</h4>
<div class="paragraph">
<p>You can configure a custom service account for scheduled tasks through properties. An existing service account can be used or a new one created. One way to create a service account is by using <code>kubectl</code>, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl create serviceaccount myserviceaccountname
serviceaccount "myserviceaccountname" created</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can configure the service account to use on a per-schedule basis as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>deployer.kubernetes.taskServiceAccountName=myserviceaccountname</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myserviceaccountname</code> with your service account name.</p>
</div>
<div class="paragraph">
<p>You can also configure the service account name at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>env:
- name: SPRING_CLOUD_DEPLOYER_KUBERNETES_TASK_SERVICE_ACCOUNT_NAME
  value: myserviceaccountname</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myserviceaccountname</code> with the service account name to be applied to all deployments.</p>
</div>
<div class="paragraph">
<p>For more information on scheduling tasks see <a href="#spring-cloud-dataflow-schedule-launch-tasks">Scheduling Tasks</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_debug_support"><a class="anchor" href="#_debug_support"></a>11.9. Debug Support</h3>
<div class="paragraph">
<p>Debugging the Spring Cloud Data Flow Kubernetes Server and included components (such as the <a href="https://github.com/spring-cloud/spring-cloud-deployer-kubernetes">Spring Cloud Kubernetes Deployer</a>) is supported through the <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/jdwp-spec.html">Java Debug Wire Protocol (JDWP)</a>. This section outlines an approach to manually enable debugging and another approach that uses configuration files provided with Spring Cloud Data Flow Server Kubernetes to &#8220;patch&#8221; a running deployment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
JDWP itself does not use any authentication. This section assumes debugging is being done on a local development environment (such as Minikube), so guidance on securing the debug port is not provided.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_enabling_debugging_manually"><a class="anchor" href="#_enabling_debugging_manually"></a>11.9.1. Enabling Debugging Manually</h4>
<div class="paragraph">
<p>To manually enable JDWP, first edit <code>src/kubernetes/server/server-deployment.yaml</code> and add an additional <code>containerPort</code> entry under <code>spec.template.spec.containers.ports</code> with a value of <code>5005</code>. Additionally, add the <a href="https://docs.oracle.com/javase/8/docs/platform/jvmti/jvmti.html#tooloptions"><code>JAVA_TOOL_OPTIONS</code></a> environment variable under <code>spec.template.spec.containers.env</code> as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>spec:
  ...
  template:
    ...
    spec:
      containers:
      - name: scdf-server
        ...
        ports:
        ...
		- containerPort: 5005
        env:
        - name: JAVA_TOOL_OPTIONS
          value: '-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The preceding example uses port 5005, but it can be any number that does not conflict with another port. The chosen port number must also be the same for the added <code>containerPort</code> value and the <code>address</code> parameter of the <code>JAVA_TOOL_OPTIONS</code> <code>-agentlib</code> flag, as shown in the preceding example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now start the Spring Cloud Data Flow Kubernetes Server. Once the server is up, you can verify the configuration changes on the <code>scdf-server</code> deployment, as the following example (with output) shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl describe deployment/scdf-server
...
...
Pod Template:
  ...
  Containers:
   scdf-server:
    ...
    Ports:       80/TCP, 5005/TCP
    ...
    Environment:
      JAVA_TOOL_OPTIONS:  -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
	  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the server started and JDWP enabled, you need to configure access to the port. In this example, we use the <a href="https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/"><code>port-forward</code></a> subcommand of <code>kubectl</code>. The following example (with output) shows how to expose a local port to your debug target by using <code>port-forward</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl get pod -l app=scdf-server
NAME                           READY     STATUS    RESTARTS   AGE
scdf-server-5b7cfd86f7-d8mj4   1/1       Running   0          10m
$ kubectl port-forward scdf-server-5b7cfd86f7-d8mj4 5005:5005
Forwarding from 127.0.0.1:5005 -&gt; 5005
Forwarding from [::1]:5005 -&gt; 5005</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now attach a debugger by pointing it to <code>127.0.0.1</code> as the host and <code>5005</code> as the port. The <code>port-forward</code> subcommand runs until stopped (by pressing <code>CTRL+c</code>, for example).</p>
</div>
<div class="paragraph">
<p>You can remove debugging support by reverting the changes to <code>src/kubernetes/server/server-deployment.yaml</code>. The reverted changes are picked up on the next deployment of the Spring Cloud Data Flow Kubernetes Server. Manually adding debug support to the configuration is useful when debugging should be enabled by default each time the server is deployed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_debugging_with_patching"><a class="anchor" href="#_enabling_debugging_with_patching"></a>11.9.2. Enabling Debugging with Patching</h4>
<div class="paragraph">
<p>Rather than manually changing the <code>server-deployment.yaml</code>, Kubernetes objects can be &#8220;patched&#8221; in place. For convenience, patch files that provide the same configuration as the manual approach are included. To enable debugging by patching, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl patch deployment scdf-server -p "$(cat src/kubernetes/server/server-deployment-debug.yaml)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the preceding command automatically adds the <code>containerPort</code> attribute and the <code>JAVA_TOOL_OPTIONS</code> environment variable. The following example (with output) shows how toverify changes to the <code>scdf-server</code> deployment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl describe deployment/scdf-server
...
...
Pod Template:
  ...
  Containers:
   scdf-server:
    ...
    Ports:       5005/TCP, 80/TCP
    ...
    Environment:
      JAVA_TOOL_OPTIONS:  -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
	  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable access to the debug port, rather than using the <code>port-forward</code> subcommand of <code>kubectl</code>, you can patch the <code>scdf-server</code> Kubernetes service object. You must first ensure that the <code>scdf-server</code> Kubernetes service object has the proper configuration. The following example (with output) shows how to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl describe service/scdf-server
Port:                     &lt;unset&gt;  80/TCP
TargetPort:               80/TCP
NodePort:                 &lt;unset&gt;  30784/TCP</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the output contains <code>&lt;unset&gt;</code>, you must patch the service to add a name for this port. The following example shows how to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl patch service scdf-server -p "$(cat src/kubernetes/server/server-svc.yaml)"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A port name should only be missing if the target cluster had been created prior to debug functionality being added. Since multiple ports are being added to the <code>scdf-server</code> Kubernetes Service Object, each needs to have its own name.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now you can add the debug port, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl patch service scdf-server -p "$(cat src/kubernetes/server/server-svc-debug.yaml)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example (with output) shows how to verify the mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl describe service scdf-server
Name:                     scdf-server
...
...
Port:                     scdf-server-jdwp  5005/TCP
TargetPort:               5005/TCP
NodePort:                 scdf-server-jdwp  31339/TCP
...
...
Port:                     scdf-server  80/TCP
TargetPort:               80/TCP
NodePort:                 scdf-server  30883/TCP
...
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output shows that container port 5005 has been mapped to the NodePort of 31339. The following example (with output) shows how to get the IP address of the Minikube node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ minikube ip
192.168.99.100</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this information, you can create a debug connection by using a host of 192.168.99.100 and a port of 31339.</p>
</div>
<div class="paragraph">
<p>The following example shows how to disable JDWP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ kubectl rollout undo deployment/scdf-server
$ kubectl patch service scdf-server --type json -p='[{"op": "remove", "path": "/spec/ports/0"}]'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kubernetes deployment object is rolled back to its state before being patched. The Kubernetes service object is then patched with a <code>remove</code> operation to remove port 5005 from the <code>containerPorts</code> list.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>kubectl rollout undo</code> forces the pod to restart. Patching the Kubernetes Service Object does not re-create the service, and the port mapping to the <code>scdf-server</code> deployment remains the same.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#rolling-back-a-deployment">Rolling Back a Deployment</a> for more information on deployment rollbacks, including managing history and <a href="https://kubernetes.io/docs/tasks/run-application/update-api-object-kubectl-patch/">Updating API Objects in Place Using kubectl Patch</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-carvel"><a class="anchor" href="#configuration-carvel"></a>12. Deployment using Carvel</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deployment of a carvel package requires the installation of tools and specific Kubernetes controllers. Then you will add the package repository to the cluster and install the application.</p>
</div>
<div class="paragraph">
<p>For local minikube or kind cluster you can use: <a href="#local-k8s-development">Configure Kubernetes for local development or testing</a>, and follow the instructions until the section <em>Deploy Spring Cloud Data Flow</em></p>
</div>
<div class="sect2">
<h3 id="_required_tools"><a class="anchor" href="#_required_tools"></a>12.1. Required Tools</h3>
<div class="ulist">
<ul>
<li>
<p><code>kubectl</code> - Kubernetes CLI (Install with <code>brew install kubectl</code>)</p>
</li>
<li>
<p><code>carvel</code> - Packaging and Deployment tools</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Carvel CLI can be installed using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">wget -O- https://carvel.dev/install.sh | bash
# or with curl...
curl -L https://carvel.dev/install.sh | bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternative following the instructions at the bottom of the home page at <a href="https://carvel.dev/">carvel.dev</a></p>
</div>
<div class="paragraph">
<p>The following tools are use by the scripts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jq</code> - lightweight JSON parser</p>
</li>
<li>
<p><code>yq</code> - lightweight YAML parser</p>
</li>
<li>
<p><code>wget</code> - Invoke http requests.</p>
</li>
<li>
<p><code>dirname</code> provides the directory part of a filename.</p>
</li>
<li>
<p><code>readlink</code> provides absolute path of a relative link.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some of these utilities are not installed in macOS or *nix by default but will be available from MacPorts or HomeBrew.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_scripts"><a class="anchor" href="#_scripts"></a>12.2. Scripts</h3>
<div class="paragraph">
<p>These scripts assume you are connected to a Kubernetes cluster and <code>kubectl</code> is available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Arguments</th>
<th class="tableblock halign-left valign-top">Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>start-deploy.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;broker&gt; [scdf-type] [namespace] [release|snapshot]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configures environmental variables needs for the rest of the scripts. <code>BROKER</code>, <code>NS</code> and <code>SCDF_TYPE</code> are set. The default <code>NS</code> is <code>scdf</code>. The namespace will be created if it doesn&#8217;t exist by <code>setup-scdf-repo.sh</code>. The default <code>SCDF_TYPE</code> is <code>oss</code>. <em>release|snapshot</em> and <em>scdf-type</em> will determine the value of <code>PACKAGE_VERSION</code> set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prepare-cluster.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Installs cert-manager, secretgen-controller and kapp-controller</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>carvel-use-template.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[scdf-type] (oss, pro)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Creates <code>scdf-values.yml</code> in current directory based on <code>scdf-pro-values.yml</code> or <code>scdf-oss-values.yml</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setup-scdf-repo.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[scdf-type] (oss, pro)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Creates the namespace and installs the relevant Carvel package and credentials. If the optional <em>scdf-type</em> is not provided the environmental variable <code>SCDF_TYPE</code> will be used.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configure-prometheus-proxy.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;host&gt; &lt;port&gt; [step]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configures Spring Boot Actuator properties for Data Flow, Skipper, Streams and Tasks. Default <code>step</code> is 10s</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configure-database.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;app&gt; &lt;database&gt; &lt;url&gt; &lt;username/secret-name&gt;  [password/secret-username-key] [secret-password-key]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If only <em>secret-name</em> is provided then <em>secret-username-key</em> defaults to <code>username</code> and <em>secret-password-key</em> defaults to <code>password</code>.</p>
</div>
<div class="paragraph">
<p>The following 3 combinations are allowed after the <em>url</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;secret-name&gt;</p>
</li>
<li>
<p>&lt;secret-name&gt; &lt;username-key&gt;
&lt;password-key&gt;</p>
</li>
<li>
<p>&lt;username&gt; &lt;password&gt;</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deploy-scdf.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[app-name]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Deploys the application using the package and <code>scdf-values.yml</code> in the current directory.
The default <em>app-name</em> is <code>scdf-${SCDF_TYPE}</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>update-scdf.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[app-name]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Updated the deployed application using a modified values file.
The default <em>app-name</em> is <code>scdf-${SCDF_TYPE}</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>export-dataflow-ip.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Will print the URL to access dataflow. If you use <code>source ./export-dataflow-ip.sh</code> it will export <code>DATAFLOW_URL</code> to be used by <code>register-apps.sh</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>register-apps.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;broker&gt; [stream-application-version]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>broker</em> must be one of rabbit or kafka.
<em>stream-application-version</em> is optional and will install the latest version. The latest version is 2021.1.2</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Take note that the registration of application in the <em>pro</em> version can take a few minutes since it retrieves all version information and metadata upfront.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_preparation"><a class="anchor" href="#_preparation"></a>12.3. Preparation</h3>
<div class="paragraph">
<p>You will need to prepare a values file named scdf-values.yml
The following steps will provide help.</p>
</div>
<div class="sect3">
<h4 id="_prepare_configuration_parameters"><a class="anchor" href="#_prepare_configuration_parameters"></a>12.3.1. Prepare Configuration parameters</h4>
<div class="paragraph">
<p>Executing the following script will configure the environmental variables needed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">source ./carvel/start-deploy.sh &lt;broker&gt; &lt;namespace&gt; [scdf-type] [release|snapshot]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>broker</code> is one of rabbitmq or kafka</p>
</li>
<li>
<p><code>namespace</code> A valid Kubernetes namespace other than <code>default</code></p>
</li>
<li>
<p><code>scdf-type</code> One of oss or pro. oss is the default.</p>
</li>
<li>
<p><code>release|snapshot</code> and <code>scdf-type</code> will determine the value of <code>PACKAGE_VERSION</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The environmental variables can also be configured manually to override the values.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 54.5454%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PACKAGE_VERSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Carvel package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Release version</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATAFLOW_VERSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Spring Cloud Data Flow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2.10.3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SKIPPER_VERSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Spring Cloud Skipper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2.9.3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REGISTRY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url and repository of package registry. Format <code>&lt;private-registry-host/repo-name&gt;</code>. This will be used to prefix the carvel repo and package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docker.io/springcloud</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of <code>kafka</code> or <code>rabbitmq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rabbitmq</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATABASE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of <code>mariadb</code> or <code>postgresql</code>. The default is <code>postgresql</code>. This will only apply when you <code>deploy-local-database.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>postgresql</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Kubernetes namespace other than <code>default</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scdf</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SCDF_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of <code>oss</code> or <code>pro</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oss</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_prepare_configuration_file"><a class="anchor" href="#_prepare_configuration_file"></a>12.3.2. Prepare Configuration file</h4>
<div class="paragraph">
<p>Create a file name <code>scdf-values.yml</code> by executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/carvel-use-template.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit the file as needed to configure the deployment. The <code>deploy-local-</code> scripts will</p>
</div>
<div class="paragraph">
<p><em>Uses scdf-type previously selected.</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_prepare_cluster_and_add_repository"><a class="anchor" href="#_prepare_cluster_and_add_repository"></a>12.4. Prepare cluster and add repository</h3>
<div class="paragraph">
<p>Login to docker and optionally registry.pivotal.io for Spring Cloud Data Flow Pro.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># When deploying SCDF Pro.
export TANZU_DOCKER_USERNAME="&lt;tanzu-net-username&gt;"
export TANZU_DOCKER_PASSWORD="&lt;tanzu-net-password&gt;"
docker login --username $TANZU_DOCKER_USERNAME --password $TANZU_DOCKER_PASSWORD registry.pivotal.io

# Always required to ensure you don't experience rate limiting with Docker HUB
export DOCKER_HUB_USERNAME="&lt;docker-hub-username&gt;"
export DOCKER_HUB_PASSWORD="&lt;docker-hub-password&gt;"
docker login --username $DOCKER_HUB_USERNAME --password $DOCKER_HUB_PASSWORD index.docker.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install carvel kapp-controller, secretgen-controller and certmanager</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/prepare-cluster.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Load scdf repo package for the <em>scdf-type</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/setup-scdf-repo.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_install_supporting_services"><a class="anchor" href="#_install_supporting_services"></a>12.5. Install supporting services</h3>
<div class="paragraph">
<p>In a production environment you should be using supported database and broker services or operators along with shared observability tools.</p>
</div>
<div class="paragraph">
<p>For local development or demonstration the following can be used to install database, broker and prometheus.</p>
</div>
<div class="sect3">
<h4 id="_deploy_local_database"><a class="anchor" href="#_deploy_local_database"></a>12.5.1. Deploy local database.</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/deploy-local-database.sh &lt;database&gt;  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>database</code> must be one of <code>postgresql</code> or <code>mariadb</code>. Default is postgresql or configure in <code>DATABASE</code> using <code>start-deploy.sh</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This script updates <code>scdf-values.yml</code> with the correct secret name.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_local_message_broker"><a class="anchor" href="#_deploy_local_message_broker"></a>12.5.2. Deploy local message broker.</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/deploy-local-broker.sh</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_local_prometheus_and_proxy"><a class="anchor" href="#_deploy_local_prometheus_and_proxy"></a>12.5.3. Deploy local Prometheus and proxy.</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/deploy-local-prometheus.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>This script also configures the Grafana endpoint in `scdf-values.yml`</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_prometheus_proxy"><a class="anchor" href="#_configure_prometheus_proxy"></a>12.6. Configure Prometheus proxy</h3>
<div class="paragraph">
<p>In the case where and existing prometheus and prometheus proxy is deployed the proxy can be configured using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/configure-prometheus-proxy.sh &lt;host&gt; &lt;port&gt; [step]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_spring_cloud_data_flow"><a class="anchor" href="#_deploy_spring_cloud_data_flow"></a>12.7. Deploy Spring Cloud Data Flow</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./carvel/deploy-scdf.sh
source ./carvel/export-dataflow-ip.sh
# expected output: Dataflow URL: &lt;url-to-access-dataflow&gt;
./carvel/register-apps.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update_deployed_application"><a class="anchor" href="#_update_deployed_application"></a>12.8. Update deployed application.</h3>
<div class="paragraph">
<p>You can modify the values file used during installation and then update the deployment using <code>./carvel/update-scdf.sh</code></p>
</div>
</div>
</div>
</div>
<h1 id="shell" class="sect0"><a class="anchor" href="#shell"></a>Shell</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section covers the options for starting the shell and more advanced functionality relating to how the shell handles whitespace, quotes, and interpretation of SpEL expressions.
The introductory chapters to the
<a href="#spring-cloud-dataflow-stream-intro">Stream DSL</a> and <a href="#spring-cloud-dataflow-composed-tasks">Composed Task DSL</a> are good places to start for the most common usage of shell commands.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-options"><a class="anchor" href="#shell-options"></a>13. Shell Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shell is built upon the <a href="https://projects.spring.io/spring-shell/">Spring Shell</a> project.
Some command-line options come from Spring Shell, and some are specific to Data Flow.
The shell takes the following command line options:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">unix:>java -jar spring-cloud-dataflow-shell-2.11.0.jar --help
Data Flow Options:
  --dataflow.uri=<uri>                              Address of the Data Flow Server [default: http://localhost:9393].
  --dataflow.username=<USER>                        Username of the Data Flow Server [no default].
  --dataflow.password=<PASSWORD>                    Password of the Data Flow Server [no default].
  --dataflow.credentials-provider-command=<COMMAND> Executes an external command which must return an
                                                    OAuth Bearer Token (Access Token prefixed with 'Bearer '),
                                                    e.g. 'Bearer 12345'), [no default].
  --dataflow.skip-ssl-validation=<true|false>       Accept any SSL certificate (even self-signed) [default: no].
  --dataflow.proxy.uri=<PROXY-URI>                  Address of an optional proxy server to use [no default].
  --dataflow.proxy.username=<PROXY-USERNAME>        Username of the proxy server (if required by proxy server) [no default].
  --dataflow.proxy.password=<PROXY-PASSWORD>        Password of the proxy server (if required by proxy server) [no default].
  --spring.shell.historySize=<SIZE>                 Default size of the shell log file [default: 3000].
  --spring.shell.commandFile=<FILE>                 Data Flow Shell executes commands read from the file(s) and then exits.
  --help                                            This message.</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can use the <code>spring.shell.commandFile</code> option to point to an existing file that contains
all the shell commands to deploy one or many related streams and tasks.
Running multiple files is also supported. They should be passed as a comma-delimited string:</p>
</div>
<div class="paragraph">
<p><code>--spring.shell.commandFile=file1.txt,file2.txt</code></p>
</div>
<div class="paragraph">
<p>This option is useful when creating some scripts to help automate deployment.</p>
</div>
<div class="paragraph">
<p>Also, the following shell command helps to modularize a complex script into multiple independent files:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt;script --file &lt;YOUR_AWESOME_SCRIPT&gt;</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-commands"><a class="anchor" href="#shell-commands"></a>14. Listing Available Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typing <code>help</code> at the command prompt gives a listing of all available commands.
Most of the commands are for Data Flow functionality, but a few are general purpose.
The following listing shows the output of the <code>help</code> command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">Built-In Commands
       help: Display help about available commands
       stacktrace: Display the full stacktrace of the last error.
       clear: Clear the shell screen.
       quit, exit: Exit the shell.
       history: Display or save the history of previously run commands
       version: Show version info
       script: Read and execute commands from a file.</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Adding the name of the command to <code>help</code> shows additional information on how to invoke the command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;help stream create
NAME
       stream create - Create a new stream definition

SYNOPSIS
       stream create [--name String] [--definition String] --description String --deploy boolean

OPTIONS
       --name String
       the name to give to the stream
       [Mandatory]

       --definition String
       a stream definition, using the DSL (e.g. "http --port=9000 | hdfs")
       [Mandatory]

       --description String
       a short description about the stream
       [Optional]

       --deploy boolean
       whether to deploy the stream immediately
       [Optional, default = false]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-tab-completion"><a class="anchor" href="#shell-tab-completion"></a>15. Tab Completion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can complete the shell command options in the shell by pressing the <code>TAB</code> key after the leading <code>--</code>. For example, pressing <code>TAB</code> after <code>stream create --</code> results in the following pair of suggestions:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream create --
--definition    --deploy        --description   --name</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you type <code>--de</code> and then press tab, <code>--definition</code> expands.</p>
</div>
<div class="paragraph">
<p>Tab completion is also available inside the stream or composed task DSL expression for application or task properties. You can also use <code>TAB</code> to get hints in a stream DSL expression for the available sources, processors, or sinks that you can use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-white-space"><a class="anchor" href="#shell-white-space"></a>16. Whitespace and Quoting Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need to quote parameter values only if they contain spaces or the <code>|</code> character. The following example passes a SpEL expression (which is applied to any data it encounters) to a transform processor:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">transform --expression='new StringBuilder(payload).reverse()'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If the parameter value needs to embed a single quote, use two single quotes, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">// Query is: Select * from /Customers where name='Smith'
scan --query='Select * from /Customers where name=''Smith'''</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dsl-quotes-escaping"><a class="anchor" href="#dsl-quotes-escaping"></a>16.1. Quotes and Escaping</h3>
<div class="paragraph">
<p>There is a Spring Shell-based client that talks to the Data Flow Server and is responsible for <strong>parsing</strong> the DSL.
In turn, applications may have application properties that rely on embedded languages, such as the <strong>Spring Expression Language</strong>.</p>
</div>
<div class="paragraph">
<p>The Shell, Data Flow DSL parser, and SpEL have rules about how they handle quotes and how syntax escaping works.
When combined together, confusion may arise.
This section explains the rules that apply and provides examples of the most complicated situations you may encounter when all three components are involved.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">It is not always that complicated</div>
<div class="paragraph">
<p>If you do not use the Data Flow Shell (for example, if you use the REST API directly) or if application properties are not SpEL expressions, the escaping rules are simpler.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_shell_rules"><a class="anchor" href="#_shell_rules"></a>16.1.1. Shell Rules</h4>
<div class="paragraph">
<p>Arguably, the most complex component when it comes to quotes is the Shell. The rules can be laid out quite simply, though:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A shell command is made of keys (<code>--something</code>) and corresponding values. There is a special, keyless mapping, though, which is described later.</p>
</li>
<li>
<p>A value cannot normally contain spaces, as space is the default delimiter for commands.</p>
</li>
<li>
<p>Spaces can be added though, by surrounding the value with quotes (either single (<code>'</code>) or double (<code>"</code>) quotes).</p>
</li>
<li>
<p>Values passed inside deployment properties (for example, <code>deployment &lt;stream-name&gt; --properties " &#8230;&#8203;"</code>) should not be quoted again.</p>
</li>
<li>
<p>If surrounded with quotes, a value can embed a literal quote of the same kind by prefixing it with a backslash (<code>\</code>).</p>
</li>
<li>
<p>Other escapes are available, such as <code>\t</code>, <code>\n</code>, <code>\r</code>, <code>\f</code> and unicode escapes of the form <code>\uxxxx</code>.</p>
</li>
<li>
<p>The keyless mapping is handled in a special way such that it does not need quoting to contain spaces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the shell supports the <code>!</code> command to execute native shell commands. The <code>!</code> accepts a single keyless argument. This is why the following example works:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;! rm something</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The argument here is the whole <code>rm something</code> string, which is passed as is to the underlying shell.</p>
</div>
<div class="paragraph">
<p>As another example, the following commands are strictly equivalent, and the argument value is <code>something</code> (without the quotes):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream destroy something
dataflow:&gt;stream destroy --name something
dataflow:&gt;stream destroy "something"
dataflow:&gt;stream destroy --name "something"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_property_files_rules"><a class="anchor" href="#_property_files_rules"></a>16.1.2. Property Files Rules</h4>
<div class="paragraph">
<p>The rules are relaxed when loading the properties from files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The special characters used in property files (both Java and YAML) need to be escaped. For example <code>\</code> should be replaced  by <code>\\</code>, <code>\t</code> by <code>\\t</code> and so forth.</p>
</li>
<li>
<p>For Java property files (<code>--propertiesFile &lt;FILE_PATH&gt;.properties</code>), the property values should not be surrounded by quotes. It is not needed even if they contain spaces.</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">filter.expression=payload &gt; 5</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>For YAML property files (<code>--propertiesFile &lt;FILE_PATH&gt;.yaml</code>), though, the values need to be surrounded by double quotes.</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">app:
    filter:
        filter:
            expression: "payload &gt; 5"</code></pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dsl_parsing_rules"><a class="anchor" href="#_dsl_parsing_rules"></a>16.1.3. DSL Parsing Rules</h4>
<div class="paragraph">
<p>At the parser level (that is, inside the body of a stream or task definition), the rules are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Option values are normally parsed until the first space character.</p>
</li>
<li>
<p>They can be made of literal strings, though, surrounded by single or double quotes.</p>
</li>
<li>
<p>To embed such a quote, use two consecutive quotes of the desired kind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As such, the values of the <code>--expression</code> option to the filter application are semantically equivalent in the following examples:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">filter --expression=payload&gt;5
filter --expression="payload&gt;5"
filter --expression='payload&gt;5'
filter --expression='payload &gt; 5'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Arguably, the last one is more readable. It is made possible thanks to the surrounding quotes. The actual expression is <code>payload &gt; 5</code>.</p>
</div>
<div class="paragraph">
<p>Now, imagine that we want to test against string messages. If we want to compare the payload to the SpEL literal string, <code>"something"</code>, we could use the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">filter --expression=payload=='something'           <i class="conum" data-value="1"></i><b>(1)</b>
filter --expression='payload == ''something'''     <i class="conum" data-value="2"></i><b>(2)</b>
filter --expression='payload == "something"'       <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This works because there are no spaces. It is not very legible, though.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This uses single quotes to protect the whole argument. Hence, the actual single quotes need to be doubled.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>SpEL recognizes String literals with either single or double quotes, so this last method is arguably the most readable.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that the preceding examples are to be considered outside of the shell (for example, when calling the REST API directly).
When entered inside the shell, chances are that the whole stream definition is itself inside double quotes, which would need to be escaped. The whole example then becomes the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream create something --definition "http | filter --expression=payload='something' | log"

dataflow:&gt;stream create something --definition "http | filter --expression='payload == ''something''' | log"

dataflow:&gt;stream create something --definition "http | filter --expression='payload == \"something\"' | log"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spel_syntax_and_spel_literals"><a class="anchor" href="#_spel_syntax_and_spel_literals"></a>16.1.4. SpEL Syntax and SpEL Literals</h4>
<div class="paragraph">
<p>The last piece of the puzzle is about SpEL expressions.
Many applications accept options that are to be interpreted as SpEL expressions, and, as seen earlier, String literals are handled in a special way there, too. The rules are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Literals can be enclosed in either single or double quotes.</p>
</li>
<li>
<p>Quotes need to be doubled to embed a literal quote. Single quotes inside double quotes need no special treatment, and the reverse is also true.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a last example, assume you want to use the <a href="$https://docs.spring.io/stream-applications/docs/current/reference/html/spring-cloud-stream-modules-transform-processor">transform processor</a>.
This processor accepts an <code>expression</code> option which is a SpEL expression. It is to be evaluated against the incoming message, with a default of <code>payload</code> (which forwards the message payload untouched).</p>
</div>
<div class="paragraph">
<p>It is important to understand that the following statements are equivalent:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">transform --expression=payload
transform --expression='payload'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>However, they are different from the following (and variations upon them):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">transform --expression="'payload'"
transform --expression='''payload'''</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The first series evaluates to the message payload, while the latter examples evaluate to the literal string, <code>payload</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_putting_it_all_together"><a class="anchor" href="#_putting_it_all_together"></a>16.1.5. Putting It All Together</h4>
<div class="paragraph">
<p>As a last, complete example, consider how you could force the transformation of all messages to the string literal, <code>hello world</code>, by creating a stream in the context of the Data Flow shell:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>dataflow:&gt;stream create something --definition "http | transform --expression='''hello world''' | log" <i class="conum" data-value="1"></i><b>(1)</b>

dataflow:&gt;stream create something --definition "http | transform --expression='\"hello world\"' | log" <i class="conum" data-value="2"></i><b>(2)</b>

dataflow:&gt;stream create something --definition "http | transform --expression=\"'hello world'\" | log" <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In the first line, single quotes surround the string (at the Data Flow parser level), but they need to be doubled because they are inside a string literal (started by the first single quote after the equals sign).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The second and third lines use single and double quotes, respectively, to encompass the whole string at the Data Flow parser level. Consequently, the other kind of quote can be used inside the string. The whole thing is inside the <code>--definition</code> argument to the shell, though, which uses double quotes. Consequently, double quotes are escaped (at the shell level).</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="spring-cloud-dataflow-streams" class="sect0"><a class="anchor" href="#spring-cloud-dataflow-streams"></a>Streams</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section goes into more detail about how you can create Streams, which are collections of
<a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> applications. It covers topics such as
creating and deploying Streams.</p>
</div>
<div class="paragraph">
<p>If you are just starting out with Spring Cloud Data Flow, you should probably read the
<a href="#getting-started">Getting Started</a> guide before diving into
this section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-intro"><a class="anchor" href="#spring-cloud-dataflow-stream-intro"></a>17. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Stream is a collection of long-lived <a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> applications that communicate with each other over messaging middleware.
A text-based DSL defines the configuration and data flow between the applications. While many applications are provided for you to implement common use-cases, you typically create a custom Spring Cloud Stream application to implement custom business logic.</p>
</div>
<div class="paragraph">
<p>The general lifecycle of a Stream is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register applications.</p>
</li>
<li>
<p>Create a Stream Definition.</p>
</li>
<li>
<p>Deploy the Stream.</p>
</li>
<li>
<p>Undeploy or destroy the Stream.</p>
</li>
<li>
<p>Upgrade or roll back applications in the Stream.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For deploying Streams, the Data Flow Server has to be configured to delegate the deployment to a new server in the Spring Cloud ecosystem named <a href="https://cloud.spring.io/spring-cloud-skipper/">Skipper</a>.</p>
</div>
<div class="paragraph">
<p>Furthermore, you can configure Skipper to deploy applications to one or more Cloud Foundry orgs and spaces, one or more namespaces on a Kubernetes cluster, or to the local machine.
When deploying a stream in Data Flow, you can specify which platform to use at deployment time.
Skipper also provides Data Flow with the ability to perform updates to deployed streams.
There are many ways the applications in a stream can be updated, but one of the most common examples is to upgrade a processor application with new custom business logic while leaving the existing source and sink applications alone.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-intro-dsl"><a class="anchor" href="#spring-cloud-dataflow-stream-intro-dsl"></a>17.1. Stream Pipeline DSL</h3>
<div class="paragraph">
<p>A stream is defined by using a Unix-inspired <a href="https://en.wikipedia.org/wiki/Pipeline_(Unix)">Pipeline syntax</a>.
The syntax uses vertical bars, known as &#8220;pipes&#8221;, to connect multiple commands.
The command <code>ls -l | grep key | less</code> in Unix takes the output of the <code>ls -l</code> process and pipes it to the input of the <code>grep key</code> process.
The output of <code>grep</code> is, in turn, sent to the input of the <code>less</code> process.
Each <code>|</code> symbol connects the standard output of the command on the left to the standard input of the command on the right.
Data flows through the pipeline from left to right.</p>
</div>
<div class="paragraph">
<p>In Data Flow, the Unix command is replaced by a <a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> application and each pipe symbol represents connecting the input and output of applications over messaging middleware, such as RabbitMQ or Apache Kafka.</p>
</div>
<div class="paragraph">
<p>Each Spring Cloud Stream application is registered under a simple name.
The registration process specifies where the application can be obtained (for example, in a Maven Repository or a Docker registry).
In Data Flow, we classify the Spring Cloud Stream applications as Sources, Processors, or Sinks.</p>
</div>
<div class="paragraph">
<p>As a simple example, consider the collection of data from an HTTP Source and writing to a File Sink.
Using the DSL, the stream description is:</p>
</div>
<div class="paragraph">
<p><code>http | file</code></p>
</div>
<div class="paragraph">
<p>A stream that involves some processing would be expressed as:</p>
</div>
<div class="paragraph">
<p><code>http | filter | transform | file</code></p>
</div>
<div class="paragraph">
<p>Stream definitions can be created by using the shell&#8217;s <code>stream create</code> command, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream create --name httpIngest --definition "http | file"</code></p>
</div>
<div class="paragraph">
<p>The Stream DSL is passed in to the <code>--definition</code> command option.</p>
</div>
<div class="paragraph">
<p>The deployment of stream definitions is done through the Shell&#8217;s <code>stream deploy</code> command, as follows:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream deploy --name ticktock</code></p>
</div>
<div class="paragraph">
<p>The <a href="#getting-started">Getting Started</a> section shows you how to start the server and how to start and use the Spring Cloud Data Flow shell.</p>
</div>
<div class="paragraph">
<p>Note that the shell calls the Data Flow Server&#8217;s REST API. For more information on making HTTP requests directly to the server, see the <a href="#api-guide">REST API Guide</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When naming a stream definition, keep in mind that each application in the stream will be created on the platform with the name in the format of <code>&lt;stream name&gt;-&lt;app name&gt;</code>.   Thus, the total length of the generated application name can&#8217;t exceed 58 characters.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-app-dsl"><a class="anchor" href="#spring-cloud-dataflow-stream-app-dsl"></a>17.2. Stream Application DSL</h3>
<div class="paragraph">
<p>You can use the Stream Application DSL to define custom binding properties for each of the Spring Cloud Stream applications.
See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/stream-application-dsl/">Stream Application DSL</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_properties"><a class="anchor" href="#_application_properties"></a>17.3. Application Properties</h3>
<div class="paragraph">
<p>Each application takes properties to customize its behavior.  As an example, the <code>http</code> source module exposes a <code>port</code> setting that lets the data ingestion port be changed from the default value:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "http --port=8090 | log" --name myhttpstream</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This <code>port</code> property is actually the same as the standard Spring Boot <code>server.port</code> property.
Data Flow adds the ability to use the shorthand form <code>port</code> instead of <code>server.port</code>.
You can also specify the longhand version:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "http --server.port=8000 | log" --name myhttpstream</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This shorthand behavior is discussed more in the section on <a href="#spring-cloud-dataflow-application-properties">Stream Application Properties</a>.
If you have <a href="https://dataflow.spring.io/docs/applications/application-metadata/#using-application-metadata">registered application property metadata</a>, you can use tab completion in the shell after typing <code>--</code> to get a list of candidate property names.</p>
</div>
<div class="paragraph">
<p>The shell provides tab completion for application properties. The <code>app info --name &lt;appName&gt; --type &lt;appType&gt;</code> shell command provides additional documentation for all the supported properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Supported Stream <code>&lt;appType&gt;</code> possibilities are: <code>source</code>, <code>processor</code>, and <code>sink</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-lifecycle"><a class="anchor" href="#spring-cloud-dataflow-stream-lifecycle"></a>18. Stream Lifecycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lifecycle of a stream goes through the following stages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register stream definition</p>
</li>
<li>
<p>Create stream using definition</p>
</li>
<li>
<p>Deploy stream</p>
</li>
<li>
<p>Destroy or undeploy stream</p>
</li>
<li>
<p>Upgrade or rollback apps in the stream</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="https://spring.io/projects/spring-cloud-skipper/">Skipper</a> is a server that lets you discover Spring Boot applications and manage their lifecycle on multiple cloud platforms.</p>
</div>
<div class="paragraph">
<p>Applications in Skipper are bundled as packages that contain the application&#8217;s resource location, application properties, and deployment properties.
You can think of Skipper packages as being analogous to packages found in tools such as <code>apt-get</code> or <code>brew</code>.</p>
</div>
<div class="paragraph">
<p>When Data Flow deploys a Stream, it generates and upload a package to Skipper that represents the applications in the Stream.
Subsequent commands to upgrade or roll back the applications within the Stream are passed through to Skipper.
In addition, the Stream definition is reverse-engineered from the package, and the status of the Stream is also delegated to Skipper.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-register-stream-apps"><a class="anchor" href="#spring-cloud-dataflow-register-stream-apps"></a>18.1. Register a Stream Application</h3>
<div class="paragraph">
<p>You can register a versioned stream application by using the <code>app register</code> command. You must provide a unique name, an application type, and a URI that can be resolved to the application artifact.
For the type, specify <code>source</code>, <code>processor</code>, or <code>sink</code>. The version is resolved from the URI. Here are a few examples:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app register --name mysource --type source --uri maven://com.example:mysource:0.0.1
dataflow:&gt;app register --name mysource --type source --uri maven://com.example:mysource:0.0.2
dataflow:&gt;app register --name mysource --type source --uri maven://com.example:mysource:0.0.3

dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │&gt; mysource-0.0.1 &lt;│         │    │    ║
║   │mysource-0.0.2    │         │    │    ║
║   │mysource-0.0.3    │         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝

dataflow:&gt;app register --name myprocessor --type processor --uri file:///Users/example/myprocessor-1.2.3.jar

dataflow:&gt;app register --name mysink --type sink --uri https://example.com/mysink-2.0.1.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The application URI should conform to one the following schema formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven schema:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">maven://&lt;groupId&gt;:&lt;artifactId&gt;[:&lt;extension&gt;[:&lt;classifier&gt;]]:&lt;version&gt;</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>HTTP schema:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">http://&lt;web-path&gt;/&lt;artifactName&gt;-&lt;version&gt;.jar</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>File schema:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">file:///&lt;local-path&gt;/&lt;artifactName&gt;-&lt;version&gt;.jar</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Docker schema:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker:&lt;docker-image-path&gt;/&lt;imageName&gt;:&lt;version&gt;</code></pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The URI <code>&lt;version&gt;</code> part is compulsory for versioned stream applications.
Skipper uses the multi-versioned stream applications to allow upgrading or rolling back those applications at runtime by using the deployment properties.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you would like to register the snapshot versions of the <code>http</code> and <code>log</code>
applications built with the RabbitMQ binder, you could do the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app register --name http --type source --uri maven://org.springframework.cloud.stream.app:http-source-rabbit:3.2.1
dataflow:&gt;app register --name log --type sink --uri maven://org.springframework.cloud.stream.app:log-sink-rabbit:3.2.1</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you would like to register multiple applications at one time, you can store them in a properties file, where the keys are formatted as <code>&lt;type&gt;.&lt;name&gt;</code> and the values are the URIs.</p>
</div>
<div class="paragraph">
<p>For example, to register the snapshot versions of the <code>http</code> and <code>log</code> applications built with the RabbitMQ binder, you could have the following in a properties file (for example, <code>stream-apps.properties</code>):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">source.http=maven://org.springframework.cloud.stream.app:http-source-rabbit:3.2.1
sink.log=maven://org.springframework.cloud.stream.app:log-sink-rabbit:3.2.1</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then, to import the applications in bulk, use the <code>app import</code> command and provide the location of the properties file with the <code>--uri</code> switch, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app import --uri file:///&lt;YOUR_FILE_LOCATION&gt;/stream-apps.properties</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Registering an application by using <code>--type app</code> is the same as registering a <code>source</code>, <code>processor</code> or <code>sink</code>.
Applications of the type <code>app</code> can be used only in the Stream Application DSL (which uses double pipes <code>||</code> instead of single pipes <code>|</code> in the DSL) and instructs Data Flow not to configure the Spring Cloud Stream binding properties of the application.
The application that is registered using <code>--type app</code> does not have to be a Spring Cloud Stream application. It can be any Spring Boot application.
See the <a href="#spring-cloud-dataflow-stream-app-dsl">Stream Application DSL introduction</a> for more about using this application type.</p>
</div>
<div class="paragraph">
<p>You can register multiple versions of the same applications (for example, the same name and type), but you can set only one as the default.
The default version is used for deploying Streams.</p>
</div>
<div class="paragraph">
<p>The first time an application is registered, it is marked as default. The default application version can be altered with the <code>app default</code> command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app default --id source:mysource --version 0.0.2
dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │mysource-0.0.1    │         │    │    ║
║   │&gt; mysource-0.0.2 &lt;│         │    │    ║
║   │mysource-0.0.3    │         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>app list --id &lt;type:name&gt;</code> command lists all versions for a given stream application.</p>
</div>
<div class="paragraph">
<p>The <code>app unregister</code> command has an optional <code>--version</code> parameter to specify the application version to unregister:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app unregister --name mysource --type source --version 0.0.1
dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │&gt; mysource-0.0.2 &lt;│         │    │    ║
║   │mysource-0.0.3    │         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>--version</code> is not specified, the default version is unregistered.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All applications in a stream should have a default version set for the stream to be deployed.
Otherwise, they are treated as unregistered application during the deployment.
Use the <code>app default</code> command to set the defaults.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">app default --id source:mysource --version 0.0.3
dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │mysource-0.0.2    │         │    │    ║
║   │&gt; mysource-0.0.3 &lt;│         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>stream deploy</code> necessitates default application versions being set.
The <code>stream update</code> and <code>stream rollback</code> commands, though, can use all (default and non-default) registered application versions.</p>
</div>
<div class="paragraph">
<p>The following command creates a stream that uses the default mysource version (0.0.3):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream create foo --definition "mysource | log"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then we can update the version to 0.0.2:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream update foo --properties version.mysource=0.0.2</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Only pre-registered applications can be used to <code>deploy</code>, <code>update</code>, or <code>rollback</code> a Stream.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An attempt to update the <code>mysource</code> to version <code>0.0.1</code> (not registered) fails.</p>
</div>
<div class="sect3">
<h4 id="supported-apps-and-tasks"><a class="anchor" href="#supported-apps-and-tasks"></a>18.1.1. Register Out-of-the-Box Applications and Tasks</h4>
<div class="paragraph">
<p>For convenience, we have the static files with application-URIs (for both Maven and Docker) available for all the out-of-the-box stream and task applications.
You can point to this file and import all the application-URIs in bulk.
Otherwise, as explained previously, you can register them individually or have your own  custom property file with only the required application-URIs in it.
We recommend, however, having a &#8220;focused&#8221; list of desired application-URIs in a custom property file.</p>
</div>
<div class="sect4">
<h5 id="ootb-stream-apps"><a class="anchor" href="#ootb-stream-apps"></a>Out-of-the-Box Stream Applications</h5>
<div class="paragraph">
<p>The following table includes the <code>dataflow.spring.io</code> links to the stream applications based on Spring Cloud Stream <code>3.2.x</code> and Spring Boot <code>2.7.x</code>.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Stable Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ + Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/rabbitmq-maven-latest" class="bare">dataflow.spring.io/rabbitmq-maven-latest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/rabbitmq-maven-latest-snapshot" class="bare">dataflow.spring.io/rabbitmq-maven-latest-snapshot</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ + Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/rabbitmq-docker-latest" class="bare">dataflow.spring.io/rabbitmq-docker-latest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/rabbitmq-docker-latest-snapshot" class="bare">dataflow.spring.io/rabbitmq-docker-latest-snapshot</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Kafka + Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/kafka-maven-latest" class="bare">dataflow.spring.io/kafka-maven-latest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/kafka-maven-latest-snapshot" class="bare">dataflow.spring.io/kafka-maven-latest-snapshot</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Kafka + Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/kafka-docker-latest" class="bare">dataflow.spring.io/kafka-docker-latest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/kafka-docker-latest-snapshot" class="bare">dataflow.spring.io/kafka-docker-latest-snapshot</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, the out-of-the-box app&#8217;s actuator endpoints are secured. You can disable security by deploying streams by setting the following property: <code><span class="small">app.*.spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration</span></code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On Kubernetes, see the <a href="#getting-started-kubernetes-probes">Liveness and readiness probes</a> section for how to configure
security for actuator endpoints.</p>
</div>
</div>
<div class="sect4">
<h5 id="ootb-task-apps"><a class="anchor" href="#ootb-task-apps"></a>Out-of-the-Box Task Applications</h5>
<div class="paragraph">
<p>The following table includes the <code>dataflow.spring.io</code> links to the task applications based on Spring Cloud Task <code>2.4.x</code> and Spring Boot <code>2.7.x</code>.</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Stable Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/task-maven-latest" class="bare">dataflow.spring.io/task-maven-latest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/task-maven-latest-snapshot" class="bare">dataflow.spring.io/task-maven-latest-snapshot</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/task-docker-latest" class="bare">dataflow.spring.io/task-docker-latest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/task-docker-latest-snapshot" class="bare">dataflow.spring.io/task-docker-latest-snapshot</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information about the available out-of-the-box stream applications see the <a href="https://cloud.spring.io/spring-cloud-task-app-starters/">Spring Cloud Stream Applications</a> project page.</p>
</div>
<div class="paragraph">
<p>For more information about the available out-of-the-box task applications see <a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/timestamp-task">timestamp-task</a> and <a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/timestamp-batch">timestamp-batch</a> docs.</p>
</div>
<div class="paragraph">
<p>As an example, if you would like to register all out-of-the-box stream applications built with the Kafka binder in bulk, you can use the following command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ dataflow:>app import --uri https://dataflow.spring.io/kafka-maven-latest</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can register all the stream applications with the Rabbit binder, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ dataflow:>app import --uri https://dataflow.spring.io/rabbitmq-maven-latest</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also pass the <code>--local</code> option (which is <code>true</code> by default) to indicate whether the
properties file location should be resolved within the shell process itself. If the location should
be resolved from the Data Flow Server process, specify <code>--local false</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you use either <code>app register</code> or <code>app import</code>, if an application is already registered with
the provided name and type and version, it is, by default, not overridden. If you would like to override the
pre-existing application <code>uri</code> or <code>metadata-uri</code> coordinates, include the <code>--force</code> option.</p>
</div>
<div class="paragraph">
<p>Note, however, that, once downloaded, applications may be cached locally on the Data Flow server, based on the resource
location. If the resource location does not change (even though the actual resource <em>bytes</em> may be different), it
is not re-downloaded. When using <code>maven://</code> resources, on the other hand, using a constant location may still circumvent
caching (if using <code>-SNAPSHOT</code> versions).</p>
</div>
<div class="paragraph">
<p>Moreover, if a stream is already deployed and uses some version of a registered app, then (forcibly) re-registering a
different application has no effect until the stream is deployed again.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In some cases, the resource is resolved on the server side. In others, the
URI is passed to a runtime container instance, where it is resolved. See
the specific documentation of each Data Flow Server for more detail.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="custom-applications"><a class="anchor" href="#custom-applications"></a>18.1.2. Register Custom Applications</h4>
<div class="paragraph">
<p>While Data Flow includes source, processor, sink applications, you can extend these applications or write a custom <a href="https://github.com/spring-cloud/spring-cloud-stream">Spring Cloud Stream</a> application.
You can follow the <a href="https://dataflow.spring.io/docs/stream-developer-guides/streams/standalone-stream-sample">Stream Development</a> guide on the Microsite to create your own custom application.
Once you have created a custom application, you can register it, as described in <a href="#spring-cloud-dataflow-register-stream-apps">Register a Stream Application</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-create-stream"><a class="anchor" href="#spring-cloud-dataflow-create-stream"></a>18.2. Creating a Stream</h3>
<div class="paragraph">
<p>The Spring Cloud Data Flow Server exposes a full RESTful API for managing the lifecycle of stream definitions, but the easiest way to use is it is through the Spring Cloud Data Flow shell. The <a href="#getting-started">Getting Started</a> section describes how to start the shell.</p>
</div>
<div class="paragraph">
<p>New streams are created with the help of stream definitions. The definitions are built from a simple DSL. For example, consider what happens if we run the following shell command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This defines a stream named <code>ticktock</code> that is based off of the DSL expression <code>time | log</code>. The DSL uses the &#8220;pipe&#8221; symbol (<code>|</code>), to connect a source to a sink.</p>
</div>
<div class="paragraph">
<p>The <code>stream info</code> command shows useful information about the stream, as shown (with its output) in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream info ticktock
╔═══════════╤═════════════════╤═══════════╤══════════╗
║Stream Name│Stream Definition│Description│  Status  ║
╠═══════════╪═════════════════╪═══════════╪══════════╣
║ticktock   │time | log       │           │undeployed║
╚═══════════╧═════════════════╧═══════════╧══════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-dataflow-application-properties"><a class="anchor" href="#spring-cloud-dataflow-application-properties"></a>18.2.1. Stream Application Properties</h4>
<div class="paragraph">
<p>Application properties are the properties associated with each application in the stream. When the application is deployed, the application properties are applied to the application through
command-line arguments or environment variables, depending on the underlying deployment implementation.</p>
</div>
<div class="paragraph">
<p>The following stream can have application properties defined at the time of stream creation:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>app info --name &lt;appName&gt; --type &lt;appType&gt;</code> shell command displays the exposed application properties for the application.
For more about exposed properties, see <a href="https://dataflow.spring.io/docs/applications/application-metadata">Application Metadata</a>.</p>
</div>
<div class="paragraph">
<p>The following listing shows the exposed properties for the <code>time</code> application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt; app info --name time --type source
Information about source application 'time':
Version: '3.2.1':
Default application version: 'true':
Resource URI: maven://org.springframework.cloud.stream.app:time-source-rabbit:3.2.1
╔══════════════════════════════╤══════════════════════════════╤══════════════════════════════╤══════════════════════════════╗
║         Option Name          │         Description          │           Default            │             Type             ║
╠══════════════════════════════╪══════════════════════════════╪══════════════════════════════╪══════════════════════════════╣
║spring.integration.poller.max-│Maximum number of messages to │&lt;none&gt;                        │java.lang.Integer             ║
║messages-per-poll             │poll per polling cycle.       │                              │                              ║
║spring.integration.poller.fixe│Polling rate period. Mutually │&lt;none&gt;                        │java.time.Duration            ║
║d-rate                        │exclusive with 'fixedDelay'   │                              │                              ║
║                              │and 'cron'.                   │                              │                              ║
║spring.integration.poller.fixe│Polling delay period. Mutually│&lt;none&gt;                        │java.time.Duration            ║
║d-delay                       │exclusive with 'cron' and     │                              │                              ║
║                              │'fixedRate'.                  │                              │                              ║
║spring.integration.poller.rece│How long to wait for messages │1s                            │java.time.Duration            ║
║ive-timeout                   │on poll.                      │                              │                              ║
║spring.integration.poller.cron│Cron expression for polling.  │&lt;none&gt;                        │java.lang.String              ║
║                              │Mutually exclusive with       │                              │                              ║
║                              │'fixedDelay' and 'fixedRate'. │                              │                              ║
║spring.integration.poller.init│Polling initial delay. Applied│&lt;none&gt;                        │java.time.Duration            ║
║ial-delay                     │for 'fixedDelay' and          │                              │                              ║
║                              │'fixedRate'; ignored for      │                              │                              ║
║                              │'cron'.                       │                              │                              ║
║time.date-format              │Format for the date value.    │MM/dd/yy HH:mm:ss             │java.lang.String              ║
╚══════════════════════════════╧══════════════════════════════╧══════════════════════════════╧══════════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following listing shows the exposed properties for the <code>log</code> application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt; app info --name log --type sink
Information about sink application 'log':
Version: '3.2.1':
Default application version: 'true':
Resource URI: maven://org.springframework.cloud.stream.app:log-sink-rabbit:3.2.1
╔══════════════════════════════╤══════════════════════════════╤══════════════════════════════╤══════════════════════════════╗
║         Option Name          │         Description          │           Default            │             Type             ║
╠══════════════════════════════╪══════════════════════════════╪══════════════════════════════╪══════════════════════════════╣
║log.name                      │The name of the logger to use.│&lt;none&gt;                        │java.lang.String              ║
║log.level                     │The level at which to log     │&lt;none&gt;                        │org.springframework.integratio║
║                              │messages.                     │                              │n.handler.LoggingHandler$Level║
║log.expression                │A SpEL expression (against the│payload                       │java.lang.String              ║
║                              │incoming message) to evaluate │                              │                              ║
║                              │as the logged message.        │                              │                              ║
╚══════════════════════════════╧══════════════════════════════╧══════════════════════════════╧══════════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can specify the application properties for the <code>time</code> and <code>log</code> apps at the time of <code>stream</code> creation, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "time --fixed-delay=5 | log --level=WARN" --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that, in the preceding example, the <code>fixed-delay</code> and <code>level</code> properties defined for the <code>time</code> and <code>log</code> applications are the &#8220;short-form&#8221; property names provided by the shell completion.
These &#8220;short-form&#8221; property names are applicable only for the exposed properties. In all other cases, you should use only fully qualified property names.</p>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-dataflow-global-properties"><a class="anchor" href="#spring-cloud-dataflow-global-properties"></a>18.2.2. Common Application Properties</h4>
<div class="paragraph">
<p>In addition to configuration through DSL, Spring Cloud Data Flow provides a mechanism for setting common properties to all
the streaming applications that are launched by it.
This can be done by adding properties prefixed with <code>spring.cloud.dataflow.applicationProperties.stream</code> when starting
the server.
When doing so, the server passes all the properties, without the prefix, to the instances it launches.</p>
</div>
<div class="paragraph">
<p>For example, all the launched applications can be configured to use a specific Kafka broker by launching the
Data Flow server with the following options:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">--spring.cloud.dataflow.applicationProperties.stream.spring.cloud.stream.kafka.binder.brokers=192.168.1.100:9092
--spring.cloud.dataflow.applicationProperties.stream.spring.cloud.stream.kafka.binder.zkNodes=192.168.1.100:2181</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Doing so causes the <code>spring.cloud.stream.kafka.binder.brokers</code> and <code>spring.cloud.stream.kafka.binder.zkNodes</code> properties
to be passed to all the launched applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties configured with this mechanism have lower precedence than stream deployment properties.
They are overridden if a property with the same key is specified at stream deployment time (for example,
<code>app.http.spring.cloud.stream.kafka.binder.brokers</code> overrides the common property).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-deploy-stream"><a class="anchor" href="#spring-cloud-dataflow-deploy-stream"></a>18.3. Deploying a Stream</h3>
<div class="paragraph">
<p>This section describes how to deploy a Stream when the Spring Cloud Data Flow server is responsible for deploying the stream. It covers the deployment and upgrade of Streams by using the Skipper service. The description of how to set deployment properties applies to both approaches of Stream deployment.</p>
</div>
<div class="paragraph">
<p>Consider the <code>ticktock</code> stream definition:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To deploy the stream, use the following shell command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream deploy --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The Data Flow Server delegates to Skipper the resolution and deployment of the <code>time</code> and <code>log</code> applications.</p>
</div>
<div class="paragraph">
<p>The <code>stream info</code> command shows useful information about the stream, including the deployment properties:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt;stream info --name ticktock
╔═══════════╤═════════════════╤═════════╗
║Stream Name│Stream Definition│  Status ║
╠═══════════╪═════════════════╪═════════╣
║ticktock   │time | log       │deploying║
╚═══════════╧═════════════════╧═════════╝

Stream Deployment properties: {
  "log" : {
    "resource" : "maven://org.springframework.cloud.stream.app:log-sink-rabbit",
    "spring.cloud.deployer.group" : "ticktock",
    "version" : "2.0.1.RELEASE"
  },
  "time" : {
    "resource" : "maven://org.springframework.cloud.stream.app:time-source-rabbit",
    "spring.cloud.deployer.group" : "ticktock",
    "version" : "2.0.1.RELEASE"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There is an important optional command argument (called <code>--platformName</code>) to the <code>stream deploy</code> command.
Skipper can be configured to deploy to multiple platforms.
Skipper is pre-configured with a platform named <code>default</code>, which deploys applications to the local machine where Skipper is running.
The default value of the <code>--platformName</code> command line argument is <code>default</code>.
If you commonly deploy to one platform, when installing Skipper, you can override the configuration of the <code>default</code> platform.
Otherwise, specify the <code>platformName</code> to be one of the values returned by the <code>stream platform-list</code> command.</p>
</div>
<div class="paragraph">
<p>In the preceding example, the time source sends the current time as a message each second, and the log sink outputs it by using the logging framework.
You can tail the <code>stdout</code> log (which has an <code>&lt;instance&gt;</code> suffix). The log files are located within the directory displayed in the Data Flow Server&#8217;s log output, as shown in the following listing:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ tail -f /var/folders/wn/8jxm_tbd1vj28c8vj37n900m0000gn/T/spring-cloud-dataflow-912434582726479179/ticktock-1464788481708/ticktock.log/stdout_0.log
2016-06-01 09:45:11.250  INFO 79194 --- [  kafka-binder-] log.sink    : 06/01/16 09:45:11
2016-06-01 09:45:12.250  INFO 79194 --- [  kafka-binder-] log.sink    : 06/01/16 09:45:12
2016-06-01 09:45:13.251  INFO 79194 --- [  kafka-binder-] log.sink    : 06/01/16 09:45:13</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also create and deploy the stream in one step by passing the <code>--deploy</code> flag when creating the stream, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock --deploy</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>However, it is not common in real-world use cases to create and deploy the stream in one step.
The reason is that when you use the <code>stream deploy</code> command, you can pass in properties that define how to map the applications onto the platform (for example, what is the memory size of the container to use, the number of each application to run, and whether to enable data partitioning features).
Properties can also override application properties that were set when creating the stream.
The next sections cover this feature in detail.</p>
</div>
<div class="sect3">
<h4 id="_deployment_properties"><a class="anchor" href="#_deployment_properties"></a>18.3.1. Deployment Properties</h4>
<div class="paragraph">
<p>When deploying a stream, you can specify properties that can control how applications are deployed and configured. See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/deployment-properties/">Deployment Properties</a> section of the microsite for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-destroy-stream"><a class="anchor" href="#spring-cloud-dataflow-destroy-stream"></a>18.4. Destroying a Stream</h3>
<div class="paragraph">
<p>You can delete a stream by issuing the <code>stream destroy</code> command from the shell, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream destroy --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If the stream was deployed, it is undeployed before the stream definition is deleted.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-undeploy-stream"><a class="anchor" href="#spring-cloud-dataflow-undeploy-stream"></a>18.5. Undeploying a Stream</h3>
<div class="paragraph">
<p>Often, you want to stop a stream but retain the name and definition for future use. In that case, you can <code>undeploy</code> the stream by name:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream undeploy --name ticktock
dataflow:&gt; stream deploy --name ticktock</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can issue the <code>deploy</code> command at a later time to restart it:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream deploy --name ticktock</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-validate-stream"><a class="anchor" href="#spring-cloud-dataflow-validate-stream"></a>18.6. Validating a Stream</h3>
<div class="paragraph">
<p>Sometimes, an application contained within a stream definition contains an invalid URI in its registration.
This can caused by an invalid URI being entered at application registration time or by the application being removed from the repository from which it was to be drawn.
To verify that all the applications contained in a stream are resolve-able, a user can use the <code>validate</code> command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream validate ticktock
╔═══════════╤═════════════════╗
║Stream Name│Stream Definition║
╠═══════════╪═════════════════╣
║ticktock   │time | log       ║
╚═══════════╧═════════════════╝


ticktock is a valid stream.
╔═══════════╤═════════════════╗
║ App Name  │Validation Status║
╠═══════════╪═════════════════╣
║source:time│valid            ║
║sink:log   │valid            ║
╚═══════════╧═════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the user validated their ticktock stream. Both the <code>source:time</code> and <code>sink:log</code> are valid.
Now we can see what happens if we have a stream definition with a registered application with an invalid URI:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream validate bad-ticktock
╔════════════╤═════════════════╗
║Stream Name │Stream Definition║
╠════════════╪═════════════════╣
║bad-ticktock│bad-time | log   ║
╚════════════╧═════════════════╝


bad-ticktock is an invalid stream.
╔═══════════════╤═════════════════╗
║   App Name    │Validation Status║
╠═══════════════╪═════════════════╣
║source:bad-time│invalid          ║
║sink:log       │valid            ║
╚═══════════════╧═════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this case, Spring Cloud Data Flow states that the stream is invalid because <code>source:bad-time</code> has an invalid URI.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-lifecycle-update"><a class="anchor" href="#spring-cloud-dataflow-stream-lifecycle-update"></a>18.7. Updating a Stream</h3>
<div class="paragraph">
<p>To update the stream, use the <code>stream update</code> command, which takes either <code>--properties</code> or <code>--propertiesFile</code> as a command argument.
Skipper has an important new top-level prefix: <code>version</code>.
The following commands deploy <code>http | log</code> stream (and the version of <code>log</code> which registered at the time of deployment was <code>3.2.0</code>):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --name httptest --definition "http --server.port=9000 | log"
dataflow:&gt; stream deploy --name httptest
dataflow:&gt;stream info httptest
╔══════════════════════════════╤══════════════════════════════╤════════════════════════════╗
║             Name             │             DSL              │          Status            ║
╠══════════════════════════════╪══════════════════════════════╪════════════════════════════╣
║httptest                      │http --server.port=9000 | log │deploying                   ║
╚══════════════════════════════╧══════════════════════════════╧════════════════════════════╝

Stream Deployment properties: {
  "log" : {
    "spring.cloud.deployer.indexed" : "true",
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:log-sink-rabbit" : "3.2.0"
  },
  "http" : {
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:http-source-rabbit" : "3.2.0"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then the following command updates the stream to use the <code>3.2.1</code> version of the log application.
Before updating the stream with the specific version of the application, we need to make sure that the application is registered with that version:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app register --name log --type sink --uri maven://org.springframework.cloud.stream.app:log-sink-rabbit:3.2.1
Successfully registered application 'sink:log'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then we can update the application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream update --name httptest --properties version.log=3.2.1</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You can use only pre-registered application versions to <code>deploy</code>, <code>update</code>, or <code>rollback</code> a stream.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To verify the deployment properties and the updated version, we can use <code>stream info</code>, as shown (with its output) in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream info httptest
╔══════════════════════════════╤══════════════════════════════╤════════════════════════════╗
║             Name             │             DSL              │          Status            ║
╠══════════════════════════════╪══════════════════════════════╪════════════════════════════╣
║httptest                      │http --server.port=9000 | log │deploying                   ║
╚══════════════════════════════╧══════════════════════════════╧════════════════════════════╝

Stream Deployment properties: {
  "log" : {
    "spring.cloud.deployer.indexed" : "true",
    "spring.cloud.deployer.count" : "1",
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:log-sink-rabbit" : "3.2.1"
  },
  "http" : {
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:http-source-rabbit" : "3.2.1"
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-lifecycle-force-update"><a class="anchor" href="#spring-cloud-dataflow-stream-lifecycle-force-update"></a>18.8. Forcing an Update of a Stream</h3>
<div class="paragraph">
<p>When upgrading a stream, you can use the <code>--force</code> option to deploy new instances of currently deployed applications even if no application or deployment properties have changed.
This behavior is needed for when configuration information is obtained by the application itself at startup time&#8201;&#8212;&#8201;for example, from Spring Cloud Config Server.
You can specify the applications for which to force an upgrade by using the <code>--app-names</code> option.
If you do not specify any application names, all the applications are forced to upgrade.
You can specify the <code>--force</code> and <code>--app-names</code> options together with the <code>--properties</code> or <code>--propertiesFile</code> options.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stream_versions"><a class="anchor" href="#_stream_versions"></a>18.9. Stream Versions</h3>
<div class="paragraph">
<p>Skipper keeps a history of the streams that were deployed.
After updating a Stream, there is a second version of the stream.
You can query for the history of the versions by using the <code>stream history --name &lt;name-of-stream&gt;</code> command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream history --name httptest
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║2      │Mon Nov 27 22:41:16 EST 2017│DEPLOYED│httptest    │1.0.0          │Upgrade complete║
║1      │Mon Nov 27 22:40:41 EST 2017│DELETED │httptest    │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stream_manifests"><a class="anchor" href="#_stream_manifests"></a>18.10. Stream Manifests</h3>
<div class="paragraph">
<p>Skipper keeps a &#8220;manifest&#8221; of the all of the applications, their application properties, and their deployment properties after all values have been substituted.
This represents the final state of what was deployed to the platform.
You can view the manifest for any of the versions of a Stream by using the following command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream manifest --name &lt;name-of-stream&gt; --releaseVersion &lt;optional-version&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If the <code>--releaseVersion</code> is not specified, the manifest for the last version is returned.</p>
</div>
<div class="paragraph">
<p>The following example shows the use of the manifest:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream manifest --name httptest</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Using the command results in the following output:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># Source: log.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: log
spec:
  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit
  version: 3.2.0
  applicationProperties:
    spring.cloud.dataflow.stream.app.label: log
    spring.cloud.stream.bindings.input.group: httptest
    spring.cloud.dataflow.stream.name: httptest
    spring.cloud.dataflow.stream.app.type: sink
    spring.cloud.stream.bindings.input.destination: httptest.http
  deploymentProperties:
    spring.cloud.deployer.indexed: true
    spring.cloud.deployer.group: httptest
    spring.cloud.deployer.count: 1

---
# Source: http.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: http
spec:
  resource: maven://org.springframework.cloud.stream.app:http-source-rabbit
  version: 3.2.0
  applicationProperties:
    spring.cloud.dataflow.stream.app.label: http
    spring.cloud.stream.bindings.output.producer.requiredGroups: httptest
    server.port: 9000
    spring.cloud.stream.bindings.output.destination: httptest.http
    spring.cloud.dataflow.stream.name: httptest
    spring.cloud.dataflow.stream.app.type: source
  deploymentProperties:
    spring.cloud.deployer.group: httptest</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The majority of the deployment and application properties were set by Data Flow to enable the applications to talk to each other and to send application metrics with identifying labels.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-lifecycle-rollback"><a class="anchor" href="#spring-cloud-dataflow-stream-lifecycle-rollback"></a>18.11. Rollback a Stream</h3>
<div class="paragraph">
<p>You can roll back to a previous version of the stream by using the <code>stream rollback</code> command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream rollback --name httptest</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The optional <code>--releaseVersion</code> command argument adds the version of the stream.
If not specified, the rollback operation goes to the previous stream version.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_count"><a class="anchor" href="#_application_count"></a>18.12. Application Count</h3>
<div class="paragraph">
<p>The application count is a dynamic property of the system used to specify the number of instances of applications. See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/application-count/">Application Count</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_skippers_upgrade_strategy"><a class="anchor" href="#_skippers_upgrade_strategy"></a>18.13. Skipper&#8217;s Upgrade Strategy</h3>
<div class="paragraph">
<p>Skipper has a simple &#8220;red/black&#8221; upgrade strategy. It deploys the new version of the applications, using as many instances as the currently running version, and checks the <code>/health</code> endpoint of the application.
If the health of the new application is good, the previous application is undeployed.
If the health of the new application is bad, all new applications are undeployed, and the upgrade is considered to be not successful.</p>
</div>
<div class="paragraph">
<p>The upgrade strategy is not a rolling upgrade, so, if five instances of the application are running, then, in a sunny-day scenario, five of the new applications are also running before the older version is undeployed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stream_dsl"><a class="anchor" href="#_stream_dsl"></a>19. Stream DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers additional features of the Stream DSL not covered in the  <a href="#spring-cloud-dataflow-stream-intro-dsl">Stream DSL introduction</a>.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-tap"><a class="anchor" href="#spring-cloud-dataflow-stream-dsl-tap"></a>19.1. Tap a Stream</h3>
<div class="paragraph">
<p>Taps can be created at various producer endpoints in a stream. See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/taps/">Tapping a Stream</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-labels"><a class="anchor" href="#spring-cloud-dataflow-stream-dsl-labels"></a>19.2. Using Labels in a Stream</h3>
<div class="paragraph">
<p>When a stream is made up of multiple applications with the same name, they must be qualified with labels.
See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/labels/">Labeling Applications</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-named-destinations"><a class="anchor" href="#spring-cloud-dataflow-stream-dsl-named-destinations"></a>19.3. Named Destinations</h3>
<div class="paragraph">
<p>Instead of referencing a source or sink application, you can use a named destination.
See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/named-destinations/">Named Destinations</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-fanin-fanout"><a class="anchor" href="#spring-cloud-dataflow-stream-dsl-fanin-fanout"></a>19.4. Fan-in and Fan-out</h3>
<div class="paragraph">
<p>By using named destinations, you can support fan-in and fan-out use cases.
See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/fanin-fanout/">Fan-in and Fan-out</a> section of the microsite for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-java-dsl"><a class="anchor" href="#spring-cloud-dataflow-stream-java-dsl"></a>20. Stream Java DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of using the shell to create and deploy streams, you can use the Java-based DSL provided by the <code>spring-cloud-dataflow-rest-client</code> module.
See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/java-dsl/">Java DSL</a> section of the microsite for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-multi-binder"><a class="anchor" href="#spring-cloud-dataflow-stream-multi-binder"></a>21. Stream Applications with Multiple Binder Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some cases, a stream can have its applications bound to multiple spring cloud stream binders when they are required to connect to different messaging
middleware configurations. In those cases, you should make sure the applications are configured appropriately with their binder
configurations. For example, a multi-binder transformer that supports both Kafka and Rabbit binders is the processor in the following stream:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">http | multibindertransform --expression=payload.toUpperCase() | log</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the preceding example, you would write your own <code>multibindertransform</code> application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this stream, each application connects to messaging middleware in the following way:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The HTTP source sends events to RabbitMQ (<code>rabbit1</code>).</p>
</li>
<li>
<p>The Multi-Binder Transform processor receives events from RabbitMQ (<code>rabbit1</code>) and sends the processed events into Kafka (<code>kafka1</code>).</p>
</li>
<li>
<p>The log sink receives events from Kafka (<code>kafka1</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here, <code>rabbit1</code> and <code>kafka1</code> are the binder names given in the Spring Cloud Stream application properties.
Based on this setup, the applications have the following binders in their classpaths with the appropriate configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP: Rabbit binder</p>
</li>
<li>
<p>Transform: Both Kafka and Rabbit binders</p>
</li>
<li>
<p>Log: Kafka binder</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>spring-cloud-stream</code> <code>binder</code> configuration properties can be set within the applications themselves.
If not, they can be passed through <code>deployment</code> properties when the stream is deployed:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream create --definition "http | multibindertransform --expression=payload.toUpperCase() | log" --name mystream

dataflow:&gt;stream deploy mystream --properties "app.http.spring.cloud.stream.bindings.output.binder=rabbit1,app.multibindertransform.spring.cloud.stream.bindings.input.binder=rabbit1,
app.multibindertransform.spring.cloud.stream.bindings.output.binder=kafka1,app.log.spring.cloud.stream.bindings.input.binder=kafka1"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can override any of the binder configuration properties by specifying them through deployment properties.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-function-composition"><a class="anchor" href="#spring-cloud-dataflow-stream-function-composition"></a>22. Function Composition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Function composition lets you attach a functional logic dynamically to an existing event streaming application. See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/function-composition/">Function Composition</a> section of the microsite for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functional_applications"><a class="anchor" href="#_functional_applications"></a>23. Functional Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Spring Cloud Stream 3.x adding <a href="https://docs.spring.io/spring-cloud-stream/docs/3.2.x/reference/html/spring-cloud-stream.html#spring_cloud_function">functional support</a>, you can build <code>Source</code>, <code>Sink</code> and <code>Processor</code> applications merely by implementing the Java Util&#8217;s <code>Supplier</code>, <code>Consumer</code>, and <code>Function</code> interfaces respectively.
See the <a href="https://dataflow.spring.io/docs/recipes/functional-apps/">Functional Application Recipe</a> of the SCDF site for more about this feature.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-examples"><a class="anchor" href="#spring-cloud-dataflow-stream-examples"></a>24. Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter includes the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-dataflow-simple-stream">Simple Stream Processing</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-stream-partitions">Stateful Stream Processing</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-stream-app-types">Other Source and Sink Application Types</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-simple-stream"><a class="anchor" href="#spring-cloud-dataflow-simple-stream"></a>24.1. Simple Stream Processing</h3>
<div class="paragraph">
<p>As an example of a simple processing step, we can transform the payload of the HTTP-posted data to upper case by using the following stream definition:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">http | transform --expression=payload.toUpperCase() | log</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To create this stream, enter the following command in the shell:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "http --server.port=9000 | transform --expression=payload.toUpperCase() | log" --name mystream --deploy</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example uses a shell command to post some data:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; http post --target http://localhost:9000 --data "hello"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example results in an upper-case <code>HELLO</code> in the log, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">2016-06-01 09:54:37.749  INFO 80083 --- [  kafka-binder-] log.sink    : HELLO</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-partitions"><a class="anchor" href="#spring-cloud-dataflow-stream-partitions"></a>24.2. Stateful Stream Processing</h3>
<div class="paragraph">
<p>To demonstrate the data partitioning functionality, the following listing deploys a stream with Kafka as the binder:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;stream create --name words --definition "http --server.port=9900 | splitter --expression=payload.split(' ') | log"
Created new stream 'words'

dataflow:&gt;stream deploy words --properties "app.splitter.producer.partitionKeyExpression=payload,deployer.log.count=2"
Deployed stream 'words'

dataflow:&gt;http post --target http://localhost:9900 --data "How much wood would a woodchuck chuck if a woodchuck could chuck wood"
&gt; POST (text/plain;Charset=UTF-8) http://localhost:9900 How much wood would a woodchuck chuck if a woodchuck could chuck wood
&gt; 202 ACCEPTED


dataflow:&gt;runtime apps
╔════════════════════╤═══════════╤═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║App Id / Instance Id│Unit Status│                                                               No. of Instances / Attributes                                                               ║
╠════════════════════╪═══════════╪═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║words.log-v1        │ deployed  │                                                                             2                                                                             ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 24166                                                                                                                                        ║
║                    │           │        pid = 33097                                                                                                                                        ║
║                    │           │       port = 24166                                                                                                                                        ║
║words.log-v1-0      │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stderr_0.log     ║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stdout_0.log     ║
║                    │           │        url = https://192.168.0.102:24166                                                                                                                   ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1                  ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 41269                                                                                                                                        ║
║                    │           │        pid = 33098                                                                                                                                        ║
║                    │           │       port = 41269                                                                                                                                        ║
║words.log-v1-1      │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stderr_1.log     ║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stdout_1.log     ║
║                    │           │        url = https://192.168.0.102:41269                                                                                                                   ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1                  ║
╟────────────────────┼───────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
║words.http-v1       │ deployed  │                                                                             1                                                                             ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 9900                                                                                                                                         ║
║                    │           │        pid = 33094                                                                                                                                        ║
║                    │           │       port = 9900                                                                                                                                         ║
║words.http-v1-0     │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461054/words.http-v1/stderr_0.log    ║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461054/words.http-v1/stdout_0.log    ║
║                    │           │        url = https://192.168.0.102:9900                                                                                                                    ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461054/words.http-v1                 ║
╟────────────────────┼───────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
║words.splitter-v1   │ deployed  │                                                                             1                                                                             ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 33963                                                                                                                                        ║
║                    │           │        pid = 33093                                                                                                                                        ║
║                    │           │       port = 33963                                                                                                                                        ║
║words.splitter-v1-0 │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803437542/words.splitter-v1/stderr_0.log║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803437542/words.splitter-v1/stdout_0.log║
║                    │           │        url = https://192.168.0.102:33963                                                                                                                   ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803437542/words.splitter-v1             ║
╚════════════════════╧═══════════╧═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When you review the <code>words.log-v1-0</code> logs, you should see the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">2016-06-05 18:35:47.047  INFO 58638 --- [  kafka-binder-] log.sink                                 : How
2016-06-05 18:35:47.066  INFO 58638 --- [  kafka-binder-] log.sink                                 : chuck
2016-06-05 18:35:47.066  INFO 58638 --- [  kafka-binder-] log.sink                                 : chuck</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When you review the <code>words.log-v1-1</code> logs, you should see the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">2016-06-05 18:35:47.047  INFO 58639 --- [  kafka-binder-] log.sink                                 : much
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : wood
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : would
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : a
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : woodchuck
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : if
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : a
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : woodchuck
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : could
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : wood</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This example has shown that payload splits that contain the same word are routed to the same application instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-app-types"><a class="anchor" href="#spring-cloud-dataflow-stream-app-types"></a>24.3. Other Source and Sink Application Types</h3>
<div class="paragraph">
<p>This example shows something a bit more complicated: swapping out the <code>time</code> source for something else. Another supported source type is <code>http</code>, which accepts data for ingestion over HTTP POST requests. Note that the <code>http</code> source accepts data on a different port from the Data Flow Server (default 8080). By default, the port is randomly assigned.</p>
</div>
<div class="paragraph">
<p>To create a stream that uses an <code>http</code> source but still uses the same <code>log</code> sink, we would change the original command in the <a href="#spring-cloud-dataflow-simple-stream">Simple Stream Processing</a> example to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt; stream create --definition "http | log" --name myhttpstream --deploy</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that, this time, we do not see any other output until we actually post some data (by using a shell command). To see the randomly assigned port on which the <code>http</code> source is listening, run the following command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt;runtime apps

╔══════════════════════╤═══════════╤═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ App Id / Instance Id │Unit Status│                                                                    No. of Instances / Attributes                                                                    ║
╠══════════════════════╪═══════════╪═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║myhttpstream.log-v1   │ deploying │                                                                                  1                                                                                  ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                      │           │       guid = 39628                                                                                                                                                  ║
║                      │           │        pid = 34403                                                                                                                                                  ║
║                      │           │       port = 39628                                                                                                                                                  ║
║myhttpstream.log-v1-0 │ deploying │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803867070/myhttpstream.log-v1/stderr_0.log ║
║                      │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803867070/myhttpstream.log-v1/stdout_0.log ║
║                      │           │        url = https://192.168.0.102:39628                                                                                                                             ║
║                      │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803867070/myhttpstream.log-v1              ║
╟──────────────────────┼───────────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
║myhttpstream.http-v1  │ deploying │                                                                                  1                                                                                  ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                      │           │       guid = 52143                                                                                                                                                  ║
║                      │           │        pid = 34401                                                                                                                                                  ║
║                      │           │       port = 52143                                                                                                                                                  ║
║myhttpstream.http-v1-0│ deploying │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803866800/myhttpstream.http-v1/stderr_0.log║
║                      │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803866800/myhttpstream.http-v1/stdout_0.log║
║                      │           │        url = https://192.168.0.102:52143                                                                                                                             ║
║                      │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803866800/myhttpstream.http-v1             ║
╚══════════════════════╧═══════════╧═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You should see that the corresponding <code>http</code> source has a <code>url</code> property that contains the host and port information on which it is listening. You are now ready to post to that url, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:> http post --target http://localhost:1234 --data "hello"
dataflow:> http post --target http://localhost:1234 --data "goodbye"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The stream then funnels the data from the <code>http</code> source to the output log implemented by the <code>log</code> sink, yielding output similar to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">2016-06-01 09:50:22.121  INFO 79654 --- [  kafka-binder-] log.sink    : hello
2016-06-01 09:50:26.810  INFO 79654 --- [  kafka-binder-] log.sink    : goodbye</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We could also change the sink implementation. You could pipe the output to a file (<code>file</code>), to hadoop (<code>hdfs</code>), or to any of the other sink applications that are available. You can also define your own applications.</p>
</div>
</div>
</div>
</div>
<h1 id="streams-dev-guide" class="sect0"><a class="anchor" href="#streams-dev-guide"></a>Stream Developer Guide</h1>
<div class="openblock partintro">
<div class="content">
See the <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream Developer Guides</a> on the microsite for more about how to create, test, and run Spring Cloud Stream applications on your local machine.
</div>
</div>
<h1 id="streams-monitoring" class="sect0"><a class="anchor" href="#streams-monitoring"></a>Stream Monitoring</h1>
<div class="openblock partintro">
<div class="content">
See the <a href="https://dataflow.spring.io/docs/feature-guides/streams/monitoring/">Stream Monitoring Guide</a> on the microsite for more about how to monitor the applications that were deployed as part of a Stream.
</div>
</div>
<h1 id="spring-cloud-dataflow-task" class="sect0"><a class="anchor" href="#spring-cloud-dataflow-task"></a>Tasks</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section goes into more detail about how you can orchestrate <a href="https://cloud.spring.io/spring-cloud-task/">Spring Cloud Task</a> applications on Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>If you are just starting out with Spring Cloud Data Flow, you should probably read the Getting Started guide for  &#8220;<a href="#getting-started-local">Local</a>&#8221; , &#8220;<a href="#getting-started-cloudfoundry">Cloud Foundry</a>&#8221;, or &#8220;<a href="#getting-started-kubernetes">Kubernetes</a>&#8221; before diving into this section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-task-intro"><a class="anchor" href="#spring-cloud-dataflow-task-intro"></a>25. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A task application is short-lived, meaning that it stops running on purpose and can be run on demand or scheduled for later.
One use case might be to scrape a web page and write to the database.</p>
</div>
<div class="paragraph">
<p>The <a href="https://cloud.spring.io/spring-cloud-task/">Spring Cloud Task</a> framework is based on Spring Boot and adds the ability for Boot applications to record the lifecycle events of a short-lived application, such as when it starts, when it ends, and the exit status.
The <a href="https://docs.spring.io/spring-cloud-task/docs/2.4.6/reference/html#features-task-execution-details"><code>TaskExecution</code></a> documentation shows which information is stored in the database.
The entry point for code execution in a Spring Cloud Task application is most often an implementation of Boot&#8217;s <code>CommandLineRunner</code> interface, as shown in this <a href="https://docs.spring.io/spring-cloud-task/docs/2.4.6/reference/html#getting-started-writing-the-code">example</a>.</p>
</div>
<div class="paragraph">
<p>The Spring Batch project is probably what comes to mind for Spring developers writing short-lived applications.
Spring Batch provides a much richer set of functionality than Spring Cloud Task and is recommended when processing large volumes of data.
One use case might be to read many CSV files, transform each row of data, and write each transformed row to a database.
Spring Batch provides its own database schema with a much more rich <a href="https://docs.spring.io/spring-batch/docs/4.3.8/reference/html/schema-appendix.html#metaDataSchema">set of information</a> about the execution of a Spring Batch job.
Spring Cloud Task is integrated with Spring Batch so that, if a Spring Cloud Task application defines a Spring Batch <code>Job</code>, a link between the Spring Cloud Task and Spring Cloud Batch execution tables is created.</p>
</div>
<div class="paragraph">
<p>When running Data Flow on your local machine, Tasks are launched in a separate JVM.
When running on Cloud Foundry, tasks are launched by using <a href="https://docs.cloudfoundry.org/devguide/using-tasks.html">Cloud Foundry&#8217;s Task</a> functionality. When running on Kubernetes, tasks are launched by using either a <code>Pod</code> or a <code>Job</code> resource.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_lifecycle_of_a_task"><a class="anchor" href="#_the_lifecycle_of_a_task"></a>26. The Lifecycle of a Task</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you dive deeper into the details of creating Tasks, you should understand the typical lifecycle for tasks in the context of Spring Cloud Data Flow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#spring-cloud-dataflow-create-task-apps">Creating a Task Application</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-register-task-apps">Registering a Task Application</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-create-task-definition">Creating a Task Definition</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-launch">Launching a Task</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-review-executions">Reviewing Task Executions</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-definition-destroying">Destroying a Task Definition</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-cd">Continuous Deployment</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-create-task-apps"><a class="anchor" href="#spring-cloud-dataflow-create-task-apps"></a>26.1. Creating a Task Application</h3>
<div class="paragraph">
<p>Spring Cloud Dataflow provides a couple of out-of-the-box task applications (<a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/timestamp-task">timestamp-task</a> and <a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/timestamp-batch">timestamp-batch</a>) but most task applications require custom development.</p>
</div>
<div class="paragraph">
<p>To create a custom task application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the <a href="https://start.spring.io">Spring Initializer</a> to create a new project, making sure to select the following starters:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>Cloud Task</code>: This dependency is the <code>spring-cloud-starter-task</code>.</p>
</li>
<li>
<p><code>JDBC</code>: This dependency is the <code>spring-jdbc</code> starter.</p>
</li>
<li>
<p>Select your database dependency: Enter the database dependency that Data Flow is currently using. For example: <code>H2</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Within your new project, create a new class to serve as your main class, as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EnableTask
@SpringBootApplication
public class MyTask {

    public static void main(String[] args) {
		SpringApplication.run(MyTask.class, args);
	}
}
</code></pre>
</div>
</div>
</li>
<li>
<p>With this class, you need one or more <code>CommandLineRunner</code> or <code>ApplicationRunner</code> implementations within your application.  You can either implement your own or use the ones provided by Spring Boot (there is one for running batch jobs, for example).</p>
</li>
<li>
<p>Packaging your application with Spring Boot into an über jar is done through the standard <a href="https://docs.spring.io/spring-boot/docs/2.7.15/reference/htmlsingle/#getting-started.first-application.executable-jar">Spring Boot conventions</a>.
The packaged application can be registered and deployed as noted below.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_task_database_configuration"><a class="anchor" href="#_task_database_configuration"></a>26.1.1. Task Database Configuration</h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
When launching a task application, be sure that the database driver that is being used by Spring Cloud Data Flow is also a dependency on the task application.
For example, if your Spring Cloud Data Flow is set to use Postgresql, be sure that the task application also has Postgresql as a dependency.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When you run tasks externally (that is, from the command line) and you want Spring Cloud Data Flow to show the TaskExecutions in its UI, be sure that common datasource settings are shared among them both.
By default, Spring Cloud Task uses a local H2 instance, and the execution is recorded to the database used by Spring Cloud Data Flow.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-register-task-apps"><a class="anchor" href="#spring-cloud-dataflow-register-task-apps"></a>26.2. Registering a Task Application</h3>
<div class="paragraph">
<p>You can register a Task application with the App Registry by using the Spring Cloud Data Flow Shell <code>app register</code> command.
You must provide a unique name and a URI that can be resolved to the application artifact. For the type, specify <code>task</code>.
The following listing shows three examples:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app register --name task1 --type task --uri maven://com.example:mytask:1.0.2

dataflow:&gt;app register --name task2 --type task --uri file:///Users/example/mytask-1.0.2.jar

dataflow:&gt;app register --name task3 --type task --uri https://example.com/mytask-1.0.2.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When providing a URI with the <code>maven</code> scheme, the format should conform to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">maven://&lt;groupId&gt;:&lt;artifactId&gt;[:&lt;extension&gt;[:&lt;classifier&gt;]]:&lt;version&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you would like to register multiple applications at one time, you can store them in a properties file where the keys are formatted as <code>&lt;type&gt;.&lt;name&gt;</code> and the values are the URIs.
For example, the following listing would be a valid properties file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">task.cat=file:///tmp/cat-1.2.1.BUILD-SNAPSHOT.jar
task.hat=file:///tmp/hat-1.2.1.BUILD-SNAPSHOT.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then you can use the <code>app import</code> command and provide the location of the properties file by using the  <code>--uri</code> option, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">app import --uri file:///tmp/task-apps.properties</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For example, if you would like to register all the task applications that ship with Data Flow in a single operation, you can do so with the following command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;app import --uri https://dataflow.spring.io/task-maven-latest</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also pass the <code>--local</code> option (which is <code>TRUE</code> by default) to indicate whether the properties file location should be resolved within the shell process itself.
If the location should be resolved from the Data Flow Server process, specify <code>--local false</code>.</p>
</div>
<div class="paragraph">
<p>When using either <code>app register</code> or <code>app import</code>, if a task application is already registered with
the provided name and version, it is not overridden by default. If you would like to override the
pre-existing task application with a different <code>uri</code> or <code>uri-metadata</code> location, include the <code>--force</code> option.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In some cases, the resource is resolved on the server side.
In other cases, the URI is passed to a runtime container instance, where it is resolved.
Consult the specific documentation of each Data Flow Server for more detail.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-create-task-definition"><a class="anchor" href="#spring-cloud-dataflow-create-task-definition"></a>26.3. Creating a Task Definition</h3>
<div class="paragraph">
<p>You can create a task definition from a task application by providing a definition name as well as
properties that apply to the task execution. You can create a task definition through
the RESTful API or the shell.  To create a task definition by using the shell, use the
<code>task create</code> command to create the task definition, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task create mytask --definition "timestamp --format=\"yyyy\""
Created new task 'mytask'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can obtain a listing of the current task definitions through the RESTful API or the shell.
To get the task definition list by using the shell, use the <code>task list</code> command.</p>
</div>
<div class="sect3">
<h4 id="_maximum_task_definition_name_length"><a class="anchor" href="#_maximum_task_definition_name_length"></a>26.3.1. Maximum Task Definition Name Length</h4>
<div class="paragraph">
<p>The maximum character length of a task definition name is dependent on the platform.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Consult the platform documents for specifics on resource naming.
The Local platform stores the task definition name in a database column with a maximum size of 255.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Maximum Task Definition Name Character Length by Platform</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kubernetes Bare Pods</th>
<th class="tableblock halign-left valign-top">Kubernetes Jobs</th>
<th class="tableblock halign-left valign-top">Cloud Foundry</th>
<th class="tableblock halign-left valign-top">Local</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">255</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_automating_the_creation_of_task_definitions"><a class="anchor" href="#_automating_the_creation_of_task_definitions"></a>26.3.2. Automating the Creation of Task Definitions</h4>
<div class="paragraph">
<p>As of version 2.3.0, you can configure the Data Flow server to automatically create task definitions by setting <code>spring.cloud.dataflow.task.autocreate-task-definitions</code> to <code>true</code>.
This is not the default behavior but is provided as a convenience.
When this property is enabled, a task launch request can specify the registered task application name as the task name.
If the task application is registered, the server creates a basic task definition that specifies only the application name, as required. This eliminates a manual step similar to:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task create mytask --definition "mytask"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can still specify command-line arguments and deployment properties for each task launch request.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-launch"><a class="anchor" href="#spring-cloud-dataflow-task-launch"></a>26.4. Launching a Task</h3>
<div class="paragraph">
<p>An ad hoc task can be launched through the RESTful API or the shell.
To launch an ad hoc task through the shell, use the <code>task launch</code> command, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task launch mytask
Launched task 'mytask'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When a task is launched, you can set any properties that need to be passed as command-line arguments to the task application when you launch the task, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task launch mytask --arguments "--server.port=8080 --custom=value"</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The arguments need to be passed as space-delimited values.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can pass in additional properties meant for a <code>TaskLauncher</code> itself by using the <code>--properties</code> option.
The format of this option is a comma-separated string of properties prefixed with <code>app.&lt;task definition name&gt;.&lt;property&gt;</code>.
Properties are passed to <code>TaskLauncher</code> as application properties.
It is up to an implementation to choose how those are passed into an actual task application.
If the property is prefixed with <code>deployer</code> instead of <code>app</code>, it is passed to <code>TaskLauncher</code> as a deployment property, and its meaning may be <code>TaskLauncher</code> implementation specific.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task launch mytask --properties "deployer.timestamp.custom1=value1,app.timestamp.custom2=value2"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_application_properties_2"><a class="anchor" href="#_application_properties_2"></a>26.4.1. Application properties</h4>
<div class="paragraph">
<p>Each application takes properties to customize its behavior. For example, the <code>timestamp</code> task <code>format</code> setting establishes an output format that is different from the default value.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; task create --definition "timestamp --format=\"yyyy\"" --name printTimeStamp</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This <code>timestamp</code> property is actually the same as the <code>timestamp.format</code> property specified by the timestamp application.
Data Flow adds the ability to use the shorthand form <code>format</code> instead of <code>timestamp.format</code>.
You can also specify the longhand version as well, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; task create --definition "timestamp --timestamp.format=\"yyyy\"" --name printTimeStamp</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This shorthand behavior is discussed more in the section on <a href="#spring-cloud-dataflow-application-properties">Stream Application Properties</a>.
If you have <a href="https://dataflow.spring.io/docs/applications/application-metadata/#using-application-metadata">registered application property metadata</a>, you can use tab completion in the shell after typing <code>--</code> to get a list of candidate property names.</p>
</div>
<div class="paragraph">
<p>The shell provides tab completion for application properties. The <code>app info --name &lt;appName&gt; --type &lt;appType&gt;</code> shell command provides additional documentation for all the supported properties. The supported task <code>&lt;appType&gt;</code> is <code>task</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When restarting Spring Batch Jobs on Kubernetes, you must use the entry point of <code>shell</code> or <code>boot</code>.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_application_properties_with_sensitive_information_on_kubernetes"><a class="anchor" href="#_application_properties_with_sensitive_information_on_kubernetes"></a>Application Properties With Sensitive Information on Kubernetes</h5>
<div class="paragraph">
<p>When launching task applications where some of the properties may contain sensitive information, use the <code>shell</code> or <code>boot</code> as the <code>entryPointStyle</code>. This is because the <code>exec</code> (default) converts all properties to command-line arguments and, as a result, may not be secure in some environments.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_common_application_properties"><a class="anchor" href="#_common_application_properties"></a>26.4.2. Common application properties</h4>
<div class="paragraph">
<p>In addition to configuration through DSL, Spring Cloud Data Flow provides a mechanism for setting properties that are common to all the task applications that are launched by it.
You can do so by adding properties prefixed with <code>spring.cloud.dataflow.applicationProperties.task</code> when starting the server.
The server then passes all the properties, without the prefix, to the instances it launches.</p>
</div>
<div class="paragraph">
<p>For example, you can configure all the launched applications to use the <code>prop1</code> and <code>prop2</code> properties by launching the Data Flow server with the following options:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">--spring.cloud.dataflow.applicationProperties.task.prop1=value1
--spring.cloud.dataflow.applicationProperties.task.prop2=value2</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This causes the <code>prop1=value1</code> and <code>prop2=value2</code> properties to be passed to all the launched applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties configured by using this mechanism have lower precedence than task deployment properties.
They are overridden if a property with the same key is specified at task launch time (for example, <code>app.trigger.prop2</code>
overrides the common property).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-limit-concurrent-executions"><a class="anchor" href="#spring-cloud-dataflow-task-limit-concurrent-executions"></a>26.5. Limit the number concurrent task launches</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow lets a user limit the maximum number of concurrently running tasks for each configured platform to prevent the saturation of IaaS or hardware resources.
By default, the limit is set to <code>20</code> for all supported platforms. If the number of concurrently running tasks on a platform instance is greater than or equal to the limit, the next task launch request fails, and an error message is returned through the RESTful API, the Shell, or the UI.
You can configure this limit for a platform instance by setting the corresponding deployer property, <code>spring.cloud.dataflow.task.platform.&lt;platform-type&gt;.accounts[&lt;account-name&gt;].maximumConcurrentTasks</code>, where <code>&lt;account-name&gt;</code> is the name of a configured platform account (<code>default</code> if no accounts are explicitly configured).
The <code>&lt;platform-type&gt;</code> refers to one of the currently supported deployers: <code>local</code> or <code>kubernetes</code>. For <code>cloudfoundry</code>, the property is <code>spring.cloud.dataflow.task.platform.&lt;platform-type&gt;.accounts[&lt;account-name&gt;].deployment.maximumConcurrentTasks</code>.  (The difference is that <code>deployment</code> has been added to the path).</p>
</div>
<div class="paragraph">
<p>The <code>TaskLauncher</code> implementation for each supported platform determines the number of currently running tasks by querying the underlying platform&#8217;s runtime state, if possible. The method for identifying a <code>task</code> varies by platform.
For example, launching a task on the local host uses the <code>LocalTaskLauncher</code>. <code>LocalTaskLauncher</code> runs a process for each launch request and keeps track of these processes in memory. In this case, we do not query the underlying OS, as it is impractical to identify tasks this way.
For Cloud Foundry, tasks are a core concept supported by its deployment model. The state of all tasks ) is available directly through the API.
This means that every running task container in the account&#8217;s organization and space is included in the running execution count, whether or not it was launched by using Spring Cloud Data Flow or by invoking the <code>CloudFoundryTaskLauncher</code> directly.
For Kubernetes, launching a task through the <code>KubernetesTaskLauncher</code>, if successful, results in a running pod, which we expect to eventually complete or fail.
In this environment, there is generally no easy way to identify pods that correspond to a task.
For this reason, we count only pods that were launched by the <code>KubernetesTaskLauncher</code>.
Since the task launcher provides <code>task-name</code> label in the pod&#8217;s metadata, we filter all running pods by the presence of this label.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-review-executions"><a class="anchor" href="#spring-cloud-dataflow-task-review-executions"></a>26.6. Reviewing Task Executions</h3>
<div class="paragraph">
<p>Once the task is launched, the state of the task is stored in a relational database. The state
includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Task Name</p>
</li>
<li>
<p>Start Time</p>
</li>
<li>
<p>End Time</p>
</li>
<li>
<p>Exit Code</p>
</li>
<li>
<p>Exit Message</p>
</li>
<li>
<p>Last Updated Time</p>
</li>
<li>
<p>Parameters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can check the status of your task executions through the RESTful API or the shell.
To display the latest task executions through the shell, use the <code>task execution list</code> command.</p>
</div>
<div class="paragraph">
<p>To get a list of task executions for just one task definition, add <code>--name</code> and
the task definition name&#8201;&#8212;&#8201;for example, <code>task execution list --name foo</code>. To retrieve full
details for a task execution, use the <code>task execution status</code> command with the ID of the task execution,
for example <code>task execution status --id 549</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-definition-destroying"><a class="anchor" href="#spring-cloud-dataflow-task-definition-destroying"></a>26.7. Destroying a Task Definition</h3>
<div class="paragraph">
<p>Destroying a task definition removes the definition from the definition repository.
This can be done through the RESTful API or the shell.
To destroy a task through the shell, use the <code>task destroy</code> command, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task destroy mytask
Destroyed task 'mytask'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>task destroy</code> command also has an option to <code>cleanup</code> the task executions of the task being destroyed, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task destroy mytask --cleanup
Destroyed task 'mytask'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>By default, the <code>cleanup</code> option is set to <code>false</code> (that is, by default, the task executions are not cleaned up when the task is destroyed).</p>
</div>
<div class="paragraph">
<p>To destroy all tasks through the shell, use the <code>task all destroy</code> command as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task all destroy
Really destroy all tasks? [y, n]: y
All tasks destroyed</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If need be, you can use the force switch:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task all destroy --force
All tasks destroyed</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The task execution information for previously launched tasks for the definition remains in the task repository.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This does not stop any currently running tasks for this definition. Instead, it removes the task definition from the database.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>task destroy &lt;task-name&gt;</code> deletes only the definition and not the task deployed on Cloud Foundry.
The only way to do delete the task is through the CLI in two steps:</p>
</div>
<div class="paragraph">
<p>+
. Obtain a list of the apps by using the <code>cf apps</code> command.
. Identify the task application to be deleted and run the <code>cf delete &lt;task-name&gt;</code> command.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-validate-task"><a class="anchor" href="#spring-cloud-dataflow-validate-task"></a>26.8. Validating a Task</h3>
<div class="paragraph">
<p>Sometimes, an application contained within a task definition has an invalid URI in its registration.
This can be caused by an invalid URI being entered at application-registration time or the by the application being removed from the repository from which it was to be drawn.
To verify that all the applications contained in a task are resolve-able, use the <code>validate</code> command, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task validate time-stamp
╔══════════╤═══════════════╗
║Task Name │Task Definition║
╠══════════╪═══════════════╣
║time-stamp│timestamp      ║
╚══════════╧═══════════════╝


time-stamp is a valid task.
╔═══════════════╤═════════════════╗
║   App Name    │Validation Status║
╠═══════════════╪═════════════════╣
║task:timestamp │valid            ║
╚═══════════════╧═════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the user validated their time-stamp task. The <code>task:timestamp</code> application is valid.
Now we can see what happens if we have a stream definition with a registered application that has an invalid URI:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task validate bad-timestamp
╔═════════════╤═══════════════╗
║  Task Name  │Task Definition║
╠═════════════╪═══════════════╣
║bad-timestamp│badtimestamp   ║
╚═════════════╧═══════════════╝


bad-timestamp is an invalid task.
╔══════════════════╤═════════════════╗
║     App Name     │Validation Status║
╠══════════════════╪═════════════════╣
║task:badtimestamp │invalid          ║
╚══════════════════╧═════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this case, Spring Cloud Data Flow states that the task is invalid because <code>task:badtimestamp</code> has an invalid URI.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stopping-task-execution"><a class="anchor" href="#spring-cloud-dataflow-stopping-task-execution"></a>26.9. Stopping a Task Execution</h3>
<div class="paragraph">
<p>In some cases, a task that is running on a platform may not stop because of a problem on the platform or the application business logic itself.
For such cases, Spring Cloud Data Flow offers the ability to send a request to the platform to end the task.
To do this, submit a <code>task execution stop</code> for a given set of task executions, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task execution stop --ids 5

Request to stop the task execution with id(s): 5 has been submitted</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With the preceding command, the trigger to stop the execution of <code>id=5</code> is submitted to the underlying deployer implementation. As a result, the operation stops that task. When we view the result for the task execution, we see that the task execution completed with a 0 exit code:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task execution list
╔══════════╤══╤════════════════════════════╤════════════════════════════╤═════════╗
║Task Name │ID│         Start Time         │          End Time          │Exit Code║
╠══════════╪══╪════════════════════════════╪════════════════════════════╪═════════╣
║batch-demo│5 │Mon Jul 15 13:58:41 EDT 2019│Mon Jul 15 13:58:55 EDT 2019│0        ║
║timestamp │1 │Mon Jul 15 09:26:41 EDT 2019│Mon Jul 15 09:26:41 EDT 2019│0        ║
╚══════════╧══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you submit a stop for a task execution that has child task executions associated with it, such as a composed task, a stop request is sent for each of the child task executions.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When stopping a task execution that has a running Spring Batch job, the job is left with a batch status of <code>STARTED</code>.
Each of the supported platforms sends a SIG-INT to the task application when a stop is requested. That allows Spring Cloud Task to capture the state of the app. However, Spring Batch does not handle a SIG-INT and, as a result, the job stops but remains in the STARTED status.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When launching Remote Partitioned Spring Batch Task applications, Spring Cloud Data Flow supports stopping a worker partition task directly for both Cloud Foundry and Kubernetes platforms.  Stopping worker partition task is not supported for the local platform.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_stopping_a_task_execution_that_was_started_outside_of_spring_cloud_data_flow"><a class="anchor" href="#_stopping_a_task_execution_that_was_started_outside_of_spring_cloud_data_flow"></a>26.9.1. Stopping a Task Execution that was Started Outside of Spring Cloud Data Flow</h4>
<div class="paragraph">
<p>You may wish to stop a task that has been launched outside of Spring Cloud Data Flow. An example of this is the worker applications launched by a remote batch partitioned application.
In such cases, the remote batch partitioned application stores the <code>external-execution-id</code> for each of the worker applications. However, no platform information is stored.
So when Spring Cloud Data Flow has to stop a remote batch partitioned application and its worker applications, you need to specify the platform name, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task execution stop --ids 1 --platform myplatform
Request to stop the task execution with id(s): 1 for platform myplatform has been submitted</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-task-events"><a class="anchor" href="#spring-cloud-dataflow-task-events"></a>27. Subscribing to Task and Batch Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also tap into various task and batch events when the task is launched.
If the task is enabled to generate task or batch events (with the additional dependencies of <code>spring-cloud-task-stream</code> and, in the case of Kafka as the binder, <code>spring-cloud-stream-binder-kafka</code>), those events are published during the task lifecycle.
By default, the destination names for those published events on the broker (Rabbit, Kafka, and others) are the event names themselves (for instance: <code>task-events</code>, <code>job-execution-events</code>, and so on).</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>task create myTask --definition "myBatchJob"
dataflow:>stream create task-event-subscriber1 --definition ":task-events > log" --deploy
dataflow:>task launch myTask</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can control the destination name for those events by specifying explicit names when launching the task, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:>stream create task-event-subscriber2 --definition ":myTaskEvents > log" --deploy
dataflow:>task launch myTask --properties "app.myBatchJob.spring.cloud.stream.bindings.task-events.destination=myTaskEvents"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following table lists the default task and batch event and destination names on the broker:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Task and Batch Event Destinations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Destination</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Task events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job Execution events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>job-execution-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step Execution events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>step-execution-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Read events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>item-read-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Process events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>item-process-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Write events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>item-write-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip-events</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-composed-tasks"><a class="anchor" href="#spring-cloud-dataflow-composed-tasks"></a>28. Composed Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow lets you create a directed graph, where each node of the graph is a task application.
This is done by using the DSL for composed tasks.
You can create a composed task through the RESTful API, the Spring Cloud Data Flow Shell, or the Spring Cloud Data Flow UI.</p>
</div>
<div class="sect2">
<h3 id="_the_composed_task_runner"><a class="anchor" href="#_the_composed_task_runner"></a>28.1. The Composed Task Runner</h3>
<div class="paragraph">
<p>Composed tasks are run through a task application called the Composed Task Runner. The Spring Cloud Data Flow server automatically deploys the Composed Task Runner when launching a composed task.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_composed_task_runner"><a class="anchor" href="#_configuring_the_composed_task_runner"></a>28.1.1. Configuring the Composed Task Runner</h4>
<div class="paragraph">
<p>The composed task runner application has a <code>dataflow-server-uri</code> property that is used for validation and for launching child tasks.
This defaults to <code><a href="http://localhost:9393" class="bare">localhost:9393</a></code>. If you run a distributed Spring Cloud Data Flow server, as you would if you deploy the server on Cloud Foundry or Kubernetes, you need to provide the URI that can be used to access the server.
You can either provide this by setting the <code>dataflow-server-uri</code> property for the composed task runner application when launching a composed task or by setting the <code>spring.cloud.dataflow.server.uri</code> property for the Spring Cloud Data Flow server when it is started.
For the latter case, the <code>dataflow-server-uri</code> composed task runner application property is automatically set when a composed task is launched.</p>
</div>
<div class="sect4">
<h5 id="_configuration_options"><a class="anchor" href="#_configuration_options"></a>Configuration Options</h5>
<div class="paragraph">
<p>The <code>ComposedTaskRunner</code> task has the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>composed-task-arguments</code>
The command line arguments to be used for each of the tasks. (String, default: &lt;none&gt;).</p>
</li>
<li>
<p><code>increment-instance-enabled</code>
Allows a single <code>ComposedTaskRunner</code> instance to be run again without changing the parameters by adding a incremented number job parameter based on <code>run.id</code> from the previous execution. (Boolean, default: <code>true</code>).
ComposedTaskRunner is built by using <a href="https://github.com/spring-projects/spring-batch">Spring Batch</a>. As a result, upon a successful execution, the batch job is considered to be complete.
To launch the same <code>ComposedTaskRunner</code> definition multiple times, you must set  either <code>increment-instance-enabled</code> or <code>uuid-instance-enabled</code> property to <code>true</code> or change the parameters for the definition for each launch.
When using this option, it must be applied for all task launches for the desired application, including the first launch.</p>
</li>
<li>
<p><code>uuid-instance-enabled</code>
Allows a single <code>ComposedTaskRunner</code> instance to be run again without changing the parameters by adding a UUID to the <code>ctr.id</code> job parameter. (Boolean, default: <code>false</code>).
ComposedTaskRunner is built by using <a href="https://github.com/spring-projects/spring-batch">Spring Batch</a>. As a result, upon a successful execution, the batch job is considered to be complete.
To launch the same <code>ComposedTaskRunner</code> definition multiple times, you must set  either <code>increment-instance-enabled</code> or <code>uuid-instance-enabled</code> property to <code>true</code> or change the parameters for the definition for each launch.
When using this option, it must be applied for all task launches for the desired application, including the first launch. This option when set to true will override the value of <code>increment-instance-id</code>.
Set this option to <code>true</code> when running multiple instances of the same composed task definition at the same time.</p>
</li>
<li>
<p><code>interval-time-between-checks</code>
The amount of time, in milliseconds, that the <code>ComposedTaskRunner</code> waits between checks of the database to see if a task has completed. (Integer, default: <code>10000</code>).
<code>ComposedTaskRunner</code> uses the datastore to determine the status of each child tasks. This interval indicates to <code>ComposedTaskRunner</code> how often it should check the status its child tasks.</p>
</li>
<li>
<p><code>transaction-isolation-level</code>
Establish the transaction isolation level for the Composed Task Runner.
A list of available transaction isolation levels can be found  <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/TransactionDefinition.html">here</a>.
Default is <code>ISOLATION_REPEATABLE_READ</code>.</p>
</li>
<li>
<p><code>max-wait-time</code>
The maximum amount of time, in milliseconds, that an individual step can run before the execution of the Composed task is failed (Integer, default: 0).
Determines the maximum time each child task is allowed to run before the CTR ends with a failure. The default of <code>0</code> indicates no timeout.</p>
</li>
<li>
<p><code>split-thread-allow-core-thread-timeout</code>
Specifies whether to allow split core threads to timeout. (Boolean, default: <code>false</code>)
Sets the policy governing whether core threads may timeout and terminate if no tasks arrive within the keep-alive time, being replaced if needed when new tasks arrive.</p>
</li>
<li>
<p><code>split-thread-core-pool-size</code>
Split&#8217;s core pool size. (Integer, default: <code>1</code>)
Each child task contained in a split requires a thread in order to execute. So, for example, a definition such as <code>&lt;AAA || BBB || CCC&gt; &amp;&amp; &lt;DDD || EEE&gt;</code> would require a <code>split-thread-core-pool-size</code> of <code>3</code>.
This is because the largest split contains three child tasks. A count of <code>2</code> would mean that <code>AAA</code> and <code>BBB</code> would run in parallel, but CCC would wait until either <code>AAA</code> or <code>BBB</code> finish in order to run.
Then <code>DDD</code> and <code>EEE</code> would run in parallel.</p>
</li>
<li>
<p><code>split-thread-keep-alive-seconds</code>
Split&#8217;s thread keep alive seconds. (Integer, default: <code>60</code>)
If the pool currently has more than <code>corePoolSize</code> threads, excess threads are stopped if they have been idle for more than the <code>keepAliveTime</code>.</p>
</li>
<li>
<p><code>split-thread-max-pool-size</code>
Split&#8217;s maximum pool size. (Integer, default: <code>Integer.MAX_VALUE</code>).
Establish the maximum number of threads allowed for the thread pool.</p>
</li>
<li>
<p><strong>split-thread-queue-capacity</strong>
Capacity for Split&#8217;s <code>BlockingQueue</code>. (Integer, default: <code>Integer.MAX_VALUE</code>)</p>
<div class="ulist">
<ul>
<li>
<p>If fewer than <code>corePoolSize</code> threads are running, the <code>Executor</code> always prefers adding a new thread rather than queuing.</p>
</li>
<li>
<p>If <code>corePoolSize</code> or more threads are running, the <code>Executor</code> always prefers queuing a request rather than adding a new thread.</p>
</li>
<li>
<p>If a request cannot be queued, a new thread is created unless this would exceed <code>maximumPoolSize</code>. In that case, the task is rejected.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>split-thread-wait-for-tasks-to-complete-on-shutdown</code>
Whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and running all tasks in the queue. (Boolean, default: <code>false</code>)</p>
</li>
<li>
<p><code>dataflow-server-uri</code>
The URI for the Data Flow server that receives task launch requests. (String, default: <code><a href="http://localhost:9393" class="bare">localhost:9393</a></code>)</p>
</li>
<li>
<p><code>dataflow-server-username</code>
The optional username for the Data Flow server that receives task launch requests.
Used to access the the Data Flow server by using Basic Authentication. Not used if 	<code>dataflow-server-access-token</code> is set.</p>
</li>
<li>
<p><code>dataflow-server-password</code>
The optional password for the Data Flow server that receives task launch requests.
Used to access the the Data Flow server by using Basic Authentication. Not used if 	<code>dataflow-server-access-token</code> is set.</p>
</li>
<li>
<p><code>dataflow-server-access-token</code>
This property sets an optional OAuth2 Access Token.
Typically, the value is automatically set by using the token from the currently logged-in user, if available.
However, for special use-cases, this value can also be set explicitly.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>A special boolean property, <code>dataflow-server-use-user-access-token</code>, exists for when you want to use the access token of the currently logged-in user and propagate it to the Composed Task Runner. This property is used
by Spring Cloud Data Flow and, if set to <code>true</code>, auto-populates the <code>dataflow-server-access-token</code> property. When using <code>dataflow-server-use-user-access-token</code>, it must be passed for each task execution.
In some cases, it may be preferred that the user&#8217;s <code>dataflow-server-access-token</code> must be passed for each composed task launch by default.
In this case, set the Spring Cloud Data Flow <code>spring.cloud.dataflow.task.useUserAccessToken</code> property to <code>true</code>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>To set a property for Composed Task Runner you will need to prefix the property with <code>app.composed-task-runner.</code>.
For example to set the <code>dataflow-server-uri</code> property the property will look like <code>app.composed-task-runner.dataflow-server-uri</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_lifecycle_of_a_composed_task"><a class="anchor" href="#_the_lifecycle_of_a_composed_task"></a>28.2. The Lifecycle of a Composed Task</h3>
<div class="paragraph">
<p>The lifecycle of a composed task has three parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-data-flow-composed-task-creating">Creating a Composed Task</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-composed-task-stopping">Stopping a Composed Task</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-composed-task-restarting">Restarting a Composed Task</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-composed-task-creating"><a class="anchor" href="#spring-cloud-data-flow-composed-task-creating"></a>28.2.1. Creating a Composed Task</h4>
<div class="paragraph">
<p>The DSL for the composed tasks is used when creating a task definition through the task create command, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:> app register --name timestamp --type task --uri maven://org.springframework.cloud.task.app:timestamp-task:<DESIRED_VERSION>
dataflow:> app register --name mytaskapp --type task --uri file:///home/tasks/mytask.jar
dataflow:> task create my-composed-task --definition "mytaskapp && timestamp"
dataflow:> task launch my-composed-task</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, we assume that the applications to be used by our composed task have not yet been registered.
Consequently, in the first two steps, we register two task applications.
We then create our composed task definition by using the <code>task create</code> command.
The composed task DSL in the preceding example, when launched, runs <code>mytaskapp</code> and then runs the timestamp application.</p>
</div>
<div class="paragraph">
<p>But before we launch the <code>my-composed-task</code> definition, we can view what Spring Cloud Data Flow generated for us.
This can be done by using the task list command, as shown (including its output) in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt;task list
╔══════════════════════════╤══════════════════════╤═══════════╗
║        Task Name         │   Task Definition    │Task Status║
╠══════════════════════════╪══════════════════════╪═══════════╣
║my-composed-task          │mytaskapp &amp;&amp; timestamp│unknown    ║
║my-composed-task-mytaskapp│mytaskapp             │unknown    ║
║my-composed-task-timestamp│timestamp             │unknown    ║
╚══════════════════════════╧══════════════════════╧═══════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the example, Spring Cloud Data Flow created three task definitions, one for each of the applications that makes up our composed task (<code>my-composed-task-mytaskapp</code> and <code>my-composed-task-timestamp</code>) as well as the composed task (<code>my-composed-task</code>) definition.
We also see that each of the generated names for the child tasks is made up of the name of the composed task and the name of the application, separated by a hyphen <code>-</code> (as in <em>my-composed-task</em> <code>-</code> <em>mytaskapp</em>).</p>
</div>
<div class="sect4">
<h5 id="_task_application_parameters"><a class="anchor" href="#_task_application_parameters"></a>Task Application Parameters</h5>
<div class="paragraph">
<p>The task applications that make up the composed task definition can also contain parameters, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; task create my-composed-task --definition "mytaskapp --displayMessage=hello &amp;&amp; timestamp --format=YYYY"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_launching_a_composed_task"><a class="anchor" href="#_launching_a_composed_task"></a>28.2.2. Launching a Composed Task</h4>
<div class="paragraph">
<p>Launching a composed task is done in the same way as launching a stand-alone task, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task launch my-composed-task</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once the task is launched, and assuming all the tasks complete successfully, you can see three task executions when you run a <code>task execution list</code>, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt;task execution list
╔══════════════════════════╤═══╤════════════════════════════╤════════════════════════════╤═════════╗
║        Task Name         │ID │         Start Time         │          End Time          │Exit Code║
╠══════════════════════════╪═══╪════════════════════════════╪════════════════════════════╪═════════╣
║my-composed-task-timestamp│713│Wed Apr 12 16:43:07 EDT 2017│Wed Apr 12 16:43:07 EDT 2017│0        ║
║my-composed-task-mytaskapp│712│Wed Apr 12 16:42:57 EDT 2017│Wed Apr 12 16:42:57 EDT 2017│0        ║
║my-composed-task          │711│Wed Apr 12 16:42:55 EDT 2017│Wed Apr 12 16:43:15 EDT 2017│0        ║
╚══════════════════════════╧═══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, we see that <code>my-compose-task</code> launched and that the other tasks were also launched in sequential order.
Each of them ran successfully with an <code>Exit Code</code> as <code>0</code>.</p>
</div>
<div class="sect4">
<h5 id="_passing_properties_to_the_child_tasks"><a class="anchor" href="#_passing_properties_to_the_child_tasks"></a>Passing Properties to the Child Tasks</h5>
<div class="paragraph">
<p>To set the properties for child tasks in a composed task graph at task launch time,
use the following format: <code>app.&lt;child task app name&gt;.&lt;property&gt;</code>.
The following listing shows a composed task definition as an example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt; task create my-composed-task --definition "mytaskapp  &amp;&amp; mytimestamp"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To have <code>mytaskapp</code> display 'HELLO' and set the <code>mytimestamp</code> timestamp format to <code>YYYY</code> for the composed task definition, use the following task launch format:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task launch my-composed-task --properties "app.mytaskapp.displayMessage=HELLO,app.mytimestamp.timestamp.format=YYYY"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Similar to application properties, you can also set the <code>deployer</code> properties for child tasks by using the following format: <code>deployer.&lt;child task app name&gt;.&lt;deployer-property&gt;</code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task launch my-composed-task --properties "deployer.mytaskapp.memory=2048m,app.mytimestamp.timestamp.format=HH:mm:ss"
Launched task 'a1'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_passing_arguments_to_the_composed_task_runner"><a class="anchor" href="#_passing_arguments_to_the_composed_task_runner"></a>Passing Arguments to the Composed Task Runner</h5>
<div class="paragraph">
<p>You can pass command-line arguments for the composed task runner by using the <code>--arguments</code> option:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task create my-composed-task --definition "&lt;aaa: timestamp || bbb: timestamp&gt;"
Created new task 'my-composed-task'

dataflow:&gt;task launch my-composed-task --arguments "--increment-instance-enabled=true --max-wait-time=50000 --split-thread-core-pool-size=4" --properties "app.bbb.timestamp.format=dd/MM/yyyy HH:mm:ss"
Launched task 'my-composed-task'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exit_statuses"><a class="anchor" href="#_exit_statuses"></a>Exit Statuses</h5>
<div class="paragraph">
<p>The following list shows how the exit status is set for each step (task) contained in the composed task following each step execution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code>TaskExecution</code> has an <code>ExitMessage</code>, that is used as the <code>ExitStatus</code>.</p>
</li>
<li>
<p>If no <code>ExitMessage</code> is present and the <code>ExitCode</code> is set to zero, the <code>ExitStatus</code> for the step is <code>COMPLETED</code>.</p>
</li>
<li>
<p>If no <code>ExitMessage</code> is present and the <code>ExitCode</code> is set to any non-zero number, the <code>ExitStatus</code> for the step is <code>FAILED</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_destroying_a_composed_task"><a class="anchor" href="#_destroying_a_composed_task"></a>28.2.3. Destroying a Composed Task</h4>
<div class="paragraph">
<p>The command used to destroy a stand-alone task is the same as the command used to destroy a composed task.
The only difference is that destroying a composed task also destroys the child tasks associated with it.
The following example shows the task list before and after using the <code>destroy</code> command:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt;task list
╔══════════════════════════╤══════════════════════╤═══════════╗
║        Task Name         │   Task Definition    │Task Status║
╠══════════════════════════╪══════════════════════╪═══════════╣
║my-composed-task          │mytaskapp &amp;&amp; timestamp│COMPLETED  ║
║my-composed-task-mytaskapp│mytaskapp             │COMPLETED  ║
║my-composed-task-timestamp│timestamp             │COMPLETED  ║
╚══════════════════════════╧══════════════════════╧═══════════╝
...
dataflow:&gt;task destroy my-composed-task
dataflow:&gt;task list
╔═════════╤═══════════════╤═══════════╗
║Task Name│Task Definition│Task Status║
╚═════════╧═══════════════╧═══════════╝</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-composed-task-stopping"><a class="anchor" href="#spring-cloud-data-flow-composed-task-stopping"></a>28.2.4. Stopping a Composed Task</h4>
<div class="paragraph">
<p>In cases where a composed task execution needs to be stopped, you can do so through the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RESTful API</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To stop a composed task through the dashboard, select the <strong>Jobs</strong> tab and click the *Stop() button next to the job execution that you want to stop.</p>
</div>
<div class="paragraph">
<p>The composed task run is stopped when the currently running child task completes.
The step associated with the child task that was running at the time that the composed task was stopped is marked as <code>STOPPED</code> as well as the composed task job execution.</p>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-composed-task-restarting"><a class="anchor" href="#spring-cloud-data-flow-composed-task-restarting"></a>28.2.5. Restarting a Composed Task</h4>
<div class="paragraph">
<p>In cases where a composed task fails during execution and the status of the composed task is <code>FAILED</code>, the task can be restarted.
You can do so through the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RESTful API</p>
</li>
<li>
<p>The shell</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To restart a composed task through the shell, launch the task with the same parameters.
To restart a composed task through the dashboard, select the <strong>Jobs</strong> tab and click the <strong>Restart</strong> button next to the job execution that you want to restart.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Restarting a composed task job that has been stopped (through the Spring Cloud Data Flow Dashboard or RESTful API) relaunches the <code>STOPPED</code> child task and then launches the remaining (unlaunched) child tasks in the specified order.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_composed_tasks_dsl"><a class="anchor" href="#_composed_tasks_dsl"></a>29. Composed Tasks DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Composed tasks can be run in three ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-data-flow-conditional-execution">Conditional Execution</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-transitional-execution">Transitional Execution</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-split-execution">Split Execution</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="spring-cloud-data-flow-conditional-execution"><a class="anchor" href="#spring-cloud-data-flow-conditional-execution"></a>29.1. Conditional Execution</h3>
<div class="paragraph">
<p>Conditional execution is expressed by using a double ampersand symbol (<code>&amp;&amp;</code>).
This lets each task in the sequence be launched only if the previous task
successfully completed, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-composed-task --definition "task1 &amp;&amp; task2"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When the composed task called <code>my-composed-task</code> is launched, it launches the task called <code>task1</code> and, if <code>task1</code> completes successfully, the task called <code>task2</code> is launched.
If <code>task1</code> fails, <code>task2</code> does not launch.</p>
</div>
<div class="paragraph">
<p>You can also use the Spring Cloud Data Flow Dashboard to create your conditional execution, by using the designer to drag and drop applications that are required and connecting them together to create your directed graph, as shown in the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-conditional-execution.png" alt="Composed Task Conditional Execution">
</div>
<div class="title">Figure 2. Conditional Execution</div>
</div>
<div class="paragraph">
<p>The preceding diagram is a screen capture of the directed graph as it being created by using the Spring Cloud Data Flow Dashboard.
You can see that four components in the diagram comprise a conditional execution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Start</strong> icon: All directed graphs start from this symbol. There is only one.</p>
</li>
<li>
<p><strong>Task</strong> icon: Represents each task in the directed graph.</p>
</li>
<li>
<p><strong>End</strong> icon: Represents the end of a directed graph.</p>
</li>
<li>
<p>Solid line arrow: Represents the flow conditional execution flow between:</p>
<div class="ulist">
<ul>
<li>
<p>Two applications.</p>
</li>
<li>
<p>The start control node and an application.</p>
</li>
<li>
<p>An application and the end control node.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>End</strong> icon: All directed graphs end at this symbol.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can view a diagram of your directed graph by clicking the <strong>Detail</strong> button next to the composed task definition on the Definitions tab.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-data-flow-transitional-execution"><a class="anchor" href="#spring-cloud-data-flow-transitional-execution"></a>29.2. Transitional Execution</h3>
<div class="paragraph">
<p>The DSL supports fine-grained control over the transitions taken during the execution of the directed graph.
Transitions are specified by providing a condition for equality that is based on the exit status of the previous task.
A task transition is represented by the following symbol <code>-&gt;</code>.</p>
</div>
<div class="sect3">
<h4 id="_basic_transition"><a class="anchor" href="#_basic_transition"></a>29.2.1. Basic Transition</h4>
<div class="paragraph">
<p>A basic transition would look like the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-transition-composed-task --definition "foo 'FAILED' -&gt; bar 'COMPLETED' -&gt; baz"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, <code>foo</code> would launch, and, if it had an exit status of <code>FAILED</code>, the <code>bar</code> task would launch.
If the exit status of <code>foo</code> was <code>COMPLETED</code>, <code>baz</code> would launch.
All other statuses returned by <code>cat</code> have no effect, and the task would end normally.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;basic transition&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-transition-basic.png" alt="Composed Task Basic Transition">
</div>
<div class="title">Figure 3. Basic Transition</div>
</div>
<div class="paragraph">
<p>The preceding diagram is a screen capture of the directed graph as it being created in the Spring Cloud Data Flow Dashboard.
Notice that there are two different types of connectors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dashed line: Represents transitions from the application to one of the possible destination applications.</p>
</li>
<li>
<p>Solid line: Connects applications in a conditional execution or a connection between the application and a control node (start or end).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create a transitional connector:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When creating a transition, link the application to each possible destination by using the connector.</p>
</li>
<li>
<p>Once complete, go to each connection and select it by clicking it.</p>
</li>
<li>
<p>A bolt icon appears.</p>
</li>
<li>
<p>Click that icon.</p>
</li>
<li>
<p>Enter the exit status required for that connector.</p>
</li>
<li>
<p>The solid line for that connector turns to a dashed line.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_transition_with_a_wildcard"><a class="anchor" href="#_transition_with_a_wildcard"></a>29.2.2. Transition With a Wildcard</h4>
<div class="paragraph">
<p>Wildcards are supported for transitions by the DSL, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-transition-composed-task --definition "foo 'FAILED' -&gt; bar '*' -&gt; baz"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, <code>foo</code> would launch, and, if it had an exit status of <code>FAILED</code>, <code>bar</code> task would launch.
For any exit status of <code>cat</code> other than <code>FAILED</code>, <code>baz</code> would launch.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;transition with wildcard&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-transition-basic-wildcard.png" alt="Composed Task Basic Transition with Wildcard">
</div>
<div class="title">Figure 4. Basic Transition With Wildcard</div>
</div>
</div>
<div class="sect3">
<h4 id="_transition_with_a_following_conditional_execution"><a class="anchor" href="#_transition_with_a_following_conditional_execution"></a>29.2.3. Transition With a Following Conditional Execution</h4>
<div class="paragraph">
<p>A transition can be followed by a conditional execution, so long as the wildcard
is not used, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-transition-conditional-execution-task --definition "foo 'FAILED' -&gt; bar 'UNKNOWN' -&gt; baz &amp;&amp; qux &amp;&amp; quux"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, <code>foo</code> would launch, and, if it had an exit status of <code>FAILED</code>, the <code>bar</code> task would launch.
If <code>foo</code> had an exit status of <code>UNKNOWN</code>, <code>baz</code> would launch.
For any exit status of <code>foo</code> other than <code>FAILED</code> or <code>UNKNOWN</code>, <code>qux</code> would launch and, upon successful completion, <code>quux</code> would launch.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;transition with conditional execution&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-transition-conditional-execution.png" alt="Composed Task Transition with Conditional Execution">
</div>
<div class="title">Figure 5. Transition With Conditional Execution</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this diagram, the dashed line (transition) connects the <code>foo</code> application to the target applications, but a solid line connects the conditional executions between <code>foo</code>, <code>qux</code>, and  <code>quux</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_ignoring_exit_message"><a class="anchor" href="#_ignoring_exit_message"></a>29.2.4. Ignoring Exit Message</h4>
<div class="paragraph">
<p>If any child task within a split returns an <code>ExitMessage</code> other than <code>COMPLETED</code> the split
will have an <code>ExitStatus</code> of <code>FAILED</code>.  To ignore the  <code>ExitMessage</code> of a child task,
add the <code>ignoreExitMessage=true</code> for each app that will return an <code>ExitMessage</code>
within the split.  When using this flag, the <code>ExitStatus</code> of the task will be
<code>COMPLETED</code> if the <code>ExitCode</code> of the child task is zero.  The split will have an
<code>ExitStatus</code> of <code>FAILED</code> if the <code>ExitCode`s is non zero.  There are 2 ways to
set the `ignoreExitMessage</code> flag:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Setting the property for each of the apps that need to have their exitMessage
ignored within the split.  For example a split like <code>&lt;AAA || BBB&gt;</code> where <code>BBB</code>
will return an <code>exitMessage</code>, you would set the <code>ignoreExitMessage</code> property like
<code>app.BBB.ignoreExitMessage=true</code></p>
</li>
<li>
<p>You can also set it for all apps using the composed-task-arguments property,
for example: <code>--composed-task-arguments=--ignoreExitMessage=true</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-data-flow-split-execution"><a class="anchor" href="#spring-cloud-data-flow-split-execution"></a>29.3. Split Execution</h3>
<div class="paragraph">
<p>Splits let multiple tasks within a composed task be run in parallel.
It is denoted by using angle brackets (<code>&lt;&gt;</code>) to group tasks and flows that are to be run in parallel.
These tasks and flows are separated by the double pipe <code>||</code> symbol, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-split-task --definition "&lt;foo || bar || baz&gt;"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example launches tasks <code>foo</code>, <code>bar</code> and <code>baz</code> in parallel.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;split execution&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-split.png" alt="Composed Task Split">
</div>
<div class="title">Figure 6. Split</div>
</div>
<div class="paragraph">
<p>With the task DSL, you can also run multiple split groups in succession, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-split-task --definition "&lt;foo || bar || baz&gt; &amp;&amp; &lt;qux || quux&gt;"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>foo</code>, <code>bar</code>, and <code>baz</code> tasks are launched in parallel.
Once they all complete, then the <code>qux</code> and <code>quux</code> tasks are launched in parallel.
Once they complete, the composed task ends.
However, if <code>foo</code>, <code>bar</code>, or <code>baz</code> fails, the split containing <code>qux</code> and <code>quux</code> does not launch.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;split with multiple groups&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-multiple-splits.png" alt="Composed Task Split">
</div>
<div class="title">Figure 7. Split as a part of a conditional execution</div>
</div>
<div class="paragraph">
<p>Notice that there is a <code>SYNC</code> control node that is inserted by the designer when
connecting two consecutive splits.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Tasks that are used in a split should not set the their <code>ExitMessage</code>. Setting the <code>ExitMessage</code> is only to be used
with  <a href="#spring-cloud-data-flow-transitional-execution">transitions</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_split_containing_conditional_execution"><a class="anchor" href="#_split_containing_conditional_execution"></a>29.3.1. Split Containing Conditional Execution</h4>
<div class="paragraph">
<p>A split can also have a conditional execution within the angle brackets, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">task create my-split-task --definition "&lt;foo &amp;&amp; bar || baz&gt;"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, we see that <code>foo</code> and <code>baz</code> are launched in parallel.
However, <code>bar</code> does not launch until <code>foo</code> completes successfully.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same " <code>split containing conditional execution</code> " resembles the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-split-contains-conditional.png" alt="Composed Task Split With Conditional Execution">
</div>
<div class="title">Figure 8. Split with conditional execution</div>
</div>
</div>
<div class="sect3">
<h4 id="_establishing_the_proper_thread_count_for_splits"><a class="anchor" href="#_establishing_the_proper_thread_count_for_splits"></a>29.3.2. Establishing the Proper Thread Count for Splits</h4>
<div class="paragraph">
<p>Each child task contained in a split requires a thread in order to run. To set this properly, you want to look at your graph and find the split that has the largest number of child tasks. The number of child tasks in that split is the number of threads you need.
To set the thread count, use the <code>split-thread-core-pool-size property</code> (defaults to <code>1</code>). So, for example, a definition such as <code>&lt;AAA || BBB || CCC&gt; &amp;&amp; &lt;DDD || EEE&gt;</code> requires a <code>split-thread-core-pool-size</code> of <code>3</code>.
This is because the largest split contains three child tasks. A count of two would mean that <code>AAA</code> and <code>BBB</code> would run in parallel but CCC would wait for either <code>AAA</code> or <code>BBB</code> to finish in order to run.
Then <code>DDD</code> and <code>EEE</code> would run in parallel.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-launch-tasks-from-stream"><a class="anchor" href="#spring-cloud-dataflow-launch-tasks-from-stream"></a>30. Launching Tasks from a Stream</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can launch a task from a stream by using the <a href="https://github.com/spring-cloud/spring-cloud-dataflow/tree/main/spring-cloud-dataflow-tasklauncher/README.adoc"><code>task-launcher-dataflow</code></a> sink which is provided as a part of the Spring Cloud Data Flow project.
The sink connects to a Data Flow server and uses its REST API to launch any defined task.
The sink accepts a <a href="https://github.com/spring-cloud/spring-cloud-dataflow/tree/main/spring-cloud-dataflow-tasklauncher/README.adoc#payload">JSON payload</a> representing a <code>task launch request</code>, which provides the name of the task to launch and may include command line arguments and deployment properties.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/spring-cloud/stream-applications/tree/main/functions/function/task-launch-request-function/README.adoc"><code>task-launch-request-function</code></a> component, in conjunction with Spring Cloud Stream <a href="https://docs.spring.io/spring-cloud-stream/docs/current-snapshot/reference/htmlsingle/#_functional_composition">functional composition</a>, can transform the output of any source or processor to a task launch request.</p>
</div>
<div class="paragraph">
<p>Adding a dependency to <code>task-launch-request-function</code> auto-configures a <code>java.util.function.Function</code> implementation, registered through <a href="https://cloud.spring.io/spring-cloud-function/">Spring Cloud Function</a> as a <code>taskLaunchRequest</code>.</p>
</div>
<div class="paragraph">
<p>For example, you can start with the <a href="https://github.com/spring-cloud/stream-applications/tree/main/applications/source/time-source">time</a> source, add the following dependency, build it, and register it as a custom source.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud.stream.app&lt;/groupId&gt;
    &lt;artifactId&gt;app-starters-task-launch-request-common&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To build the application follow the instructions <a href="https://github.com/spring-cloud/stream-applications#building-stream-applications">here</a>.</p>
</div>
<div class="paragraph">
<p>This will create an <code>apps</code> directory that contains  <code>time-source-rabbit</code> and <code>time-source-kafka</code> directories in the <code>&lt;stream app project&gt;/applications/source/time-source</code> directory.   In each of these you will see a target directory that contains a <code>time-source-&lt;binder&gt;-&lt;version&gt;.jar</code>. Now  register the <code>time-source</code> jar (use the appropriate binder jar) with SCDF as a time source named <code>timestamp-tlr</code>.</p>
</div>
<div class="paragraph">
<p>Next, register the <code>task-launcher-dataflow</code> sink with SCDF and create a task definition <code>timestamp-task</code>.   Once this is complete create the stream definition as shown below:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream create --name task-every-minute --definition 'timestamp-tlr --fixed-delay=60000 --task.launch.request.task-name=timestamp-task --spring.cloud.function.definition=\"timeSupplier|taskLaunchRequestFunction\"| tasklauncher-sink'   --deploy</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding stream produces a task launch request every minute. The request provides the name of the task to launch: <code>{"name":"timestamp-task"}</code>.</p>
</div>
<div class="paragraph">
<p>The following stream definition illustrates the use of command line arguments. It produces messages such as <code>{"args":["foo=bar","time=12/03/18 17:44:12"],"deploymentProps":{},"name":"timestamp-task"}</code> to provide command-line arguments to the task:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream create --name task-every-second --definition 'timestamp-tlr --task.launch.request.task-name=timestamp-task --spring.cloud.function.definition=\"timeSupplier|taskLaunchRequestFunction\" --task.launch.request.args=foo=bar --task.launch.request.arg-expressions=time=payload | tasklauncher-sink'   --deploy</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note the use of SpEL expressions to map each message payload to the <code>time</code> command-line argument, along with a static argument (<code>foo=bar</code>).</p>
</div>
<div class="paragraph">
<p>You can then see the list of task executions by using the shell command <code>task execution list</code>, as shown (with its output) in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">dataflow:&gt;task execution list
╔══════════════╤═══╤════════════════════════════╤════════════════════════════╤═════════╗
║  Task Name   │ID │         Start Time         │          End Time          │Exit Code║
╠══════════════╪═══╪════════════════════════════╪════════════════════════════╪═════════╣
║timestamp-task│581│Thu Sep 08 11:38:33 EDT 2022│Thu Sep 08 11:38:33 EDT 2022│0        ║
║timestamp-task│580│Thu Sep 08 11:38:31 EDT 2022│Thu Sep 08 11:38:31 EDT 2022│0        ║
║timestamp-task│579│Thu Sep 08 11:38:29 EDT 2022│Thu Sep 08 11:38:29 EDT 2022│0        ║
║timestamp-task│578│Thu Sep 08 11:38:26 EDT 2022│Thu Sep 08 11:38:26 EDT 2022│0        ║
╚══════════════╧═══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this example, we have shown how to use the <code>time</code> source to launch a task at a fixed rate.
This pattern may be applied to any source to launch a task in response to any event.</p>
</div>
<div class="sect2">
<h3 id="_launching_a_composed_task_from_a_stream"><a class="anchor" href="#_launching_a_composed_task_from_a_stream"></a>30.1. Launching a Composed Task From a Stream</h3>
<div class="paragraph">
<p>A composed task can be launched with the <code>task-launcher-dataflow</code> sink, as discussed <a href="#spring-cloud-dataflow-launch-tasks-from-stream">here</a>.
Since we use the <code>ComposedTaskRunner</code> directly, we need to set up the task definitions for the composed task runner itself, along with the composed tasks, prior to the creation of the composed task launching stream.
Suppose we wanted to create the following composed task definition: <code>AAA &amp;&amp; BBB</code>.
The first step would be to create the task definition, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>task create --name composed-task-sample --definition "AAA: timestamp &amp;&amp; BBB: timestamp"</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Now that the task definition we need for composed task definition is ready, we need to create a stream that launches <code>composed-task-sample</code>.
We create a stream with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>timestamp-tlr</code> source customized to emit task launch requests, as shown <a href="#spring-cloud-dataflow-launch-tasks-from-stream">earlier</a>.</p>
</li>
<li>
<p>The <code>task-launcher</code> sink that launches the <code>composed-task-sample</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The stream should resemble the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>stream create --name ctr-stream --definition "timestamp-tlr --fixed-delay=30000 --spring.cloud.function.definition=\"timeSupplier|taskLaunchRequestFunction\" --task.launch.request.task-name=composed-task-sample | tasklauncher-sink" --deploy</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sharing-spring-cloud-dataflows-datastore-with-tasks"><a class="anchor" href="#sharing-spring-cloud-dataflows-datastore-with-tasks"></a>31. Sharing Spring Cloud Data Flow&#8217;s Datastore with Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As discussed in the <a href="#spring-cloud-dataflow-task">Tasks</a> documentation, Spring
Cloud Data Flow lets you view Spring Cloud Task application executions. So, in
this section, we discuss what is required for a task application and Spring
Cloud Data Flow to share the task execution information.</p>
</div>
<div class="sect2">
<h3 id="a-common-datastore-dependency"><a class="anchor" href="#a-common-datastore-dependency"></a>31.1. A Common DataStore Dependency</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow supports many databases out-of-the-box,
so all you typically need to do is declare the <code>spring_datasource_*</code> environment variables
to establish what data store Spring Cloud Data Flow needs.
Regardless of which database you decide to use for Spring Cloud Data Flow, make sure that your task also
includes that database dependency in its <code>pom.xml</code> or <code>gradle.build</code> file. If the database dependency
that is used by Spring Cloud Data Flow is not present in the Task Application, the task fails
and the task execution is not recorded.</p>
</div>
</div>
<div class="sect2">
<h3 id="a-common-datastore"><a class="anchor" href="#a-common-datastore"></a>31.2. A Common Data Store</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow and your task application must access the same datastore instance.
This is so that the task executions recorded by the task application can be read by Spring Cloud Data Flow to list them in the Shell and Dashboard views.
Also, the task application must have read and write privileges to the task data tables that are used by Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>Given this understanding of the datasource dependency between Task applications and Spring Cloud Data Flow, you can now review how to apply them in various Task orchestration scenarios.</p>
</div>
<div class="sect3">
<h4 id="datasource-simple-task-launch"><a class="anchor" href="#datasource-simple-task-launch"></a>31.2.1. Simple Task Launch</h4>
<div class="paragraph">
<p>When launching a task from Spring Cloud Data Flow, Data Flow adds its datasource
properties (<code>spring.datasource.url</code>, <code>spring.datasource.driverClassName</code>, <code>spring.datasource.username</code>, <code>spring.datasource.password</code>)
to the application properties of the task being launched. Thus, a task application
records its task execution information to the Spring Cloud Data Flow repository.</p>
</div>
</div>
<div class="sect3">
<h4 id="_composed_task_runner"><a class="anchor" href="#_composed_task_runner"></a>31.2.2. Composed Task Runner</h4>
<div class="paragraph">
<p>Spring Cloud Data Flow lets you create a directed graph where each node
of the graph is a task application. This is done through the
<a href="https://github.com/spring-cloud-task-app-starters/composed-task-runner/blob/master/spring-cloud-starter-task-composedtaskrunner/README.adoc">composed task runner</a>.
In this case, the rules that applied to a <a href="#datasource-simple-task-launch">simple task launch</a>
or task launcher sink apply to the composed task runner as well.
All child applications must also have access to the datastore that is being used by the composed task runner.
Also, all child applications must have the same database dependency as the composed task runner enumerated in their <code>pom.xml</code> or <code>gradle.build</code> file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launching_a_task_externally_from_spring_cloud_data_flow"><a class="anchor" href="#_launching_a_task_externally_from_spring_cloud_data_flow"></a>31.2.3. Launching a Task Externally from Spring Cloud Data Flow</h4>
<div class="paragraph">
<p>You can launch Spring Cloud Task applications by using another method (scheduler, for example) but still track the task execution in Spring Cloud Data Flow.
You can do so, provided the task applications observe the rules specified <a href="#a-common-datastore-dependency">here</a> and <a href="#a-common-datastore">here</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you want to use Spring Cloud Data Flow to view your
<a href="https://projects.spring.io/spring-batch/">Spring Batch</a> jobs, make sure that
your batch application uses the <code>@EnableTask</code> annotation and follow the rules enumerated <a href="#a-common-datastore-dependency">here</a> and <a href="#a-common-datastore">here</a>.
More information is available <a href="https://github.com/spring-projects/spring-batch-admin/blob/master/MIGRATION.md">here</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-schedule-launch-tasks"><a class="anchor" href="#spring-cloud-dataflow-schedule-launch-tasks"></a>32. Scheduling Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow lets you schedule the execution of tasks with a <code>cron</code> expression.
You can create a schedule through the RESTful API or the Spring Cloud Data Flow UI.</p>
</div>
<div class="sect2">
<h3 id="_the_scheduler"><a class="anchor" href="#_the_scheduler"></a>32.1. The Scheduler</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow schedules the execution of its tasks through a scheduling agent that is available on the cloud platform.
When using the Cloud Foundry platform, Spring Cloud Data Flow uses the <a href="https://www.cloudfoundry.org/the-foundry/scheduler/">PCF Scheduler</a>.
When using Kubernetes, a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/">CronJob</a> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Scheduled tasks do not implement the continuous deployment feature. Any changes to application version or properties for a task definition in Spring Cloud Data Flow will not affect scheduled tasks.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-scheduling-architecture.png" alt="Scheduler Architecture Overview">
</div>
<div class="title">Figure 9. Architectural Overview</div>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_scheduling"><a class="anchor" href="#_enabling_scheduling"></a>32.2. Enabling Scheduling</h3>
<div class="paragraph">
<p>By default, Spring Cloud Data Flow leaves the scheduling feature disabled. To enable the scheduling feature, set the following feature properties to <code>true</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.cloud.dataflow.features.schedules-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.tasks-enabled</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_lifecycle_of_a_schedule"><a class="anchor" href="#_the_lifecycle_of_a_schedule"></a>32.3. The Lifecycle of a Schedule</h3>
<div class="paragraph">
<p>The lifecycle of a schedule has three parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-data-flow-schedule-scheduling">Scheduling a Task Execution</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-schedule-unscheduling">Deleting a Schedule</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-schedule-list">Listing Schedules</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-schedule-scheduling"><a class="anchor" href="#spring-cloud-data-flow-schedule-scheduling"></a>32.3.1. Scheduling a Task Execution</h4>
<div class="paragraph">
<p>You can schedule a task execution via the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spring Cloud Data Flow Shell</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
<li>
<p>Spring Cloud Data Flow RESTful API</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduling_a_task"><a class="anchor" href="#_scheduling_a_task"></a>32.3.2. Scheduling a Task</h4>
<div class="paragraph">
<p>To schedule a task using the shell, use the <code>task schedule create</code> command to create the schedule, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task schedule create --definitionName mytask --name mytaskschedule --expression '*/1 * * * *'
Created schedule 'mytaskschedule'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the earlier example, we created a schedule called <code>mytaskschedule</code> for the task definition called <code>mytask</code>.  This schedule launches <code>mytask</code> once a minute.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If using Cloud Foundry, the <code>cron</code> expression above would be: <code>*/1 * ? * *</code>. This is because Cloud Foundry uses the Quartz <code>cron</code> expression format.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_maximum_length_for_a_schedule_name"><a class="anchor" href="#_maximum_length_for_a_schedule_name"></a>Maximum Length for a Schedule Name</h5>
<div class="paragraph">
<p>The maximum character length of a schedule name is dependent on the platform.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Maximum Schedule Name Character Length by Platform</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kubernetes</th>
<th class="tableblock halign-left valign-top">Cloud Foundry</th>
<th class="tableblock halign-left valign-top">Local</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">52</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-schedule-unscheduling"><a class="anchor" href="#spring-cloud-data-flow-schedule-unscheduling"></a>32.3.3. Deleting a Schedule</h4>
<div class="paragraph">
<p>You can delete a schedule by using the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spring Cloud Data Flow Shell</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
<li>
<p>Spring Cloud Data Flow RESTful API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To delete a task schedule by using the shell, use the <code>task schedule destroy</code> command, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">dataflow:&gt;task schedule destroy --name mytaskschedule
Deleted task schedule 'mytaskschedule'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-schedule-list"><a class="anchor" href="#spring-cloud-data-flow-schedule-list"></a>32.3.4. Listing Schedules</h4>
<div class="paragraph">
<p>You can view the available schedules by using the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spring Cloud Data Flow Shell</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
<li>
<p>Spring Cloud Data Flow RESTful API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To view your schedules from the shell, use the <code>task schedule list</code> command, as shown in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bas" data-lang="bas">dataflow:&gt;task schedule list
╔══════════════════════════╤════════════════════╤════════════════════════════════════════════════════╗
║      Schedule Name       │Task Definition Name│                     Properties                     ║
╠══════════════════════════╪════════════════════╪════════════════════════════════════════════════════╣
║mytaskschedule            │mytask              │spring.cloud.scheduler.cron.expression = */1 * * * *║
╚══════════════════════════╧════════════════════╧════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Instructions to create, delete, and list schedules by using the Spring Cloud Data Flow UI can be found <a href="https://dataflow.spring.io/docs/feature-guides/batch/scheduling/">here</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-task-cd"><a class="anchor" href="#spring-cloud-dataflow-task-cd"></a>33. Continuous Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As task applications evolve, you want to get your updates to production. This section walks through the capabilities that Spring Cloud Data Flow provides around being able to update task applications.</p>
</div>
<div class="paragraph">
<p>When a task application is registered (see <a href="#spring-cloud-dataflow-register-task-apps">Registering a Task Application</a>), a version is associated with it.  A task application can have multiple versions associated with it, with one selected as the default. The following image illustrates an application with multiple versions associated with it (see the timestamp entry).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-application-versions.png" alt="Task Application Versions">
</div>
</div>
<div class="paragraph">
<p>Versions of an application are managed by registering multiple applications with the same name and coordinates, <em>except</em> the version. For example, if you were to register an application with the following values, you would get one application registered with two versions (2.1.0.RELEASE and 2.1.1.RELEASE):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application 1</p>
<div class="ulist">
<ul>
<li>
<p>Name: <code>timestamp</code></p>
</li>
<li>
<p>Type: <code>task</code></p>
</li>
<li>
<p>URI: <code>maven://org.springframework.cloud.task.app:timestamp-task:2.1.0.RELEASE</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Application 2</p>
<div class="ulist">
<ul>
<li>
<p>Name: <code>timestamp</code></p>
</li>
<li>
<p>Type: <code>task</code></p>
</li>
<li>
<p>URI: <code>maven://org.springframework.cloud.task.app:timestamp-task:2.1.1.RELEASE</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Besides having multiple versions, Spring Cloud Data Flow needs to know which version to run on the next launch. This is indicated by setting a version to be the default version. Whatever version of a task application is configured as the default version is the one to be run on the next launch request. You can see which version is the default in the UI, as this image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-default-version.png" alt="Task Application Default Version">
</div>
</div>
<div class="sect2">
<h3 id="_task_launch_lifecycle"><a class="anchor" href="#_task_launch_lifecycle"></a>33.1. Task Launch Lifecycle</h3>
<div class="paragraph">
<p>In previous versions of Spring Cloud Data Flow, when the request to launch a task was received, Spring Cloud Data Flow would deploy the application (if needed) and run it. If the application was being run on a platform that did not need to have the application deployed every time (CloudFoundry, for example), the previously deployed application was used. This flow has changed in 2.3. The following image shows what happens when a task launch request comes in now:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-launch-flow.png" alt="Flow For Launching A Task">
</div>
</div>
<div class="paragraph">
<p>There are three main flows to consider in the preceding diagram. Launching the first time or launching with no changes is one. The other two are launching when there are changes but the appliction is not currently and launching when there are changes and the application is running. We look at the flow with no changes first.</p>
</div>
<div class="sect3">
<h4 id="_launching_a_task_with_no_changes"><a class="anchor" href="#_launching_a_task_with_no_changes"></a>33.1.1. Launching a Task With No Changes</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A launch request comes into Data Flow. Data Flow determines that an upgrade is not required, since nothing has changed (no properties, deployment properties, or versions have changed since the last execution).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>On platforms that cache a deployed artifact (CloudFoundry, at this writing), Data Flow checks whether the application was previously deployed.</p>
</li>
<li>
<p>If the application needs to be deployed, Data Flow deploys the task application.</p>
</li>
<li>
<p>Data Flow launches the application.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This flow is the default behavior and, if nothing has changed, occurs every time a request comes in. Note that this is the same flow that Data Flow has always use for launching tasks.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launching_a_task_with_changes_that_is_not_currently_running"><a class="anchor" href="#_launching_a_task_with_changes_that_is_not_currently_running"></a>33.1.2. Launching a Task With Changes That Is Not Currently Running</h4>
<div class="paragraph">
<p>The second flow to consider when launching a task is when a task is not running but there is a change in any of the task application version, application properties, or deployment properties. In this case, the following flow is executed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A launch request comes into Data Flow. Data Flow determines that an upgrade is required, since there was a change in the task application version, the application properties, or the deployment properties.</p>
</li>
<li>
<p>Data Flow checks to see whether another instance of the task definition is currently running.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>If there is no other instance of the task definition currently running, the old deployment is deleted.</p>
</li>
<li>
<p>On platforms that cache a deployed artifact (CloudFoundry, at this writing), Data Flow checks whether the application was previously deployed (this check evaluates to <code>false</code> in this flow, since the old deployment was deleted).</p>
</li>
<li>
<p>Data Flow does the deployment of the task application with the updated values (new application version, new merged properties, and new merged deployment properties).</p>
</li>
<li>
<p>Data Flow launches the application.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This flow is what fundamentally enables continuous deployment for Spring Cloud Data Flow.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launch_a_task_with_changes_while_another_instance_is_running"><a class="anchor" href="#_launch_a_task_with_changes_while_another_instance_is_running"></a>33.1.3. Launch a Task With Changes While Another Instance Is Running</h4>
<div class="paragraph">
<p>The last main flow is when a launch request comes to Spring Cloud Data Flow to do an upgrade but the task definition is currently running. In this case, the launch is blocked due to the requirement to delete the current application. On some platforms (CloudFoundry, at this writing), deleting the application causes all currently running applications to be shut down. This feature prevents that from happening. The following process describes what happens when a task changes while another instance is running:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A launch request comes into Data Flow. Data Flow determines that an upgrade is required, since there was a change in the task application version, the application properties, or the deployment properties.</p>
</li>
<li>
<p>Data Flow checks to see whether another instance of the task definition is currently running.</p>
</li>
<li>
<p>Data Flow prevents the launch from happening, because other instances of the task definition are running.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any launch that requires an upgrade of a task definition that is running at the time of the request is blocked from running due to the need to delete any currently running tasks.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<h1 id="task-dev-guide" class="sect0"><a class="anchor" href="#task-dev-guide"></a>Task Developer Guide</h1>
<div class="openblock partintro">
<div class="content">
See the <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch Developer</a> section of the microsite for more about how to create, test, and run Spring Cloud Task applications on your local machine.
</div>
</div>
<h1 id="tasks-monitoring" class="sect0"><a class="anchor" href="#tasks-monitoring"></a>Task Monitoring</h1>
<div class="openblock partintro">
<div class="content">
See the <a href="https://dataflow.spring.io/docs/feature-guides/batch/monitoring/">Task Monitoring</a> Guide of the microsite for more about how to monitor the applications that were deployed as part of a task.
</div>
</div>
<h1 id="dashboard" class="sect0"><a class="anchor" href="#dashboard"></a>Dashboard</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section describes how to use the dashboard of Spring Cloud Data Flow.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-introduction"><a class="anchor" href="#dashboard-introduction"></a>34. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow provides a browser-based GUI called the Dashboard to manage the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Apps</strong>: The <strong>Apps</strong> tab lists all available applications and provides the controls to register and unregister them.</p>
</li>
<li>
<p><strong>Runtime</strong>: The <strong>Runtime</strong> tab provides the list of all running applications.</p>
</li>
<li>
<p><strong>Streams</strong>: The <strong>Streams</strong> tab lets you list, design, create, deploy, and destroy Stream Definitions.</p>
</li>
<li>
<p><strong>Tasks</strong>: The <strong>Tasks</strong> tab lets you list, create, launch, schedule, and destroy Task Definitions.</p>
</li>
<li>
<p><strong>Jobs</strong>: The <strong>Jobs</strong> tab lets you perform batch job related functions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upon starting Spring Cloud Data Flow, the dashboard is available at:</p>
</div>
<div class="paragraph">
<p><code><a href="http://&lt;host&gt;:&lt;port&gt;/dashboard" class="bare">&lt;host&gt;:&lt;port&gt;/dashboard</a></code></p>
</div>
<div class="paragraph">
<p>For example, if Spring Cloud Data Flow is running locally, the dashboard is available at <code><a href="http://localhost:9393/dashboard" class="bare">localhost:9393/dashboard</a></code>.</p>
</div>
<div class="paragraph">
<p>If you have enabled HTTPS, the dashboard is available at <code><a href="https://localhost:9393/dashboard" class="bare">localhost:9393/dashboard</a></code>.
If you have enabled security, a login form is available at <code><a href="http://localhost:9393/dashboard/#/login" class="bare">localhost:9393/dashboard/#/login</a></code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default Dashboard server port is <code>9393</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows the opening page of the Spring Cloud Data Flow dashboard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-dashboard-about.png" alt="The Spring Cloud Data Flow Dashboard">
</div>
<div class="title">Figure 10. The Spring Cloud Data Flow Dashboard</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-apps"><a class="anchor" href="#dashboard-apps"></a>35. Apps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Applications</strong> tab of the dashboard lists all the available applications and provides the controls to register and unregister them (if applicable).
You can import a number of applications at once by using the Bulk Import Applications action.</p>
</div>
<div class="paragraph">
<p>The following image shows a typical list of available applications within the dashboard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-available-apps-list.png" alt="List of available applications">
</div>
<div class="title">Figure 11. List of Available Applications</div>
</div>
<div class="sect2">
<h3 id="_bulk_import_of_applications"><a class="anchor" href="#_bulk_import_of_applications"></a>35.1. Bulk Import of Applications</h3>
<div class="paragraph">
<p>Applications can be imported in numerous ways which are available on the "Applications" page.
For bulk import, the application definitions are expected to be expressed in a properties style, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">&lt;type&gt;.&lt;name&gt; = &lt;coordinates&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following examples show typical application definitions:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>task.timestamp=maven://org.springframework.cloud.task.app:timestamp-task:1.2.0.RELEASE
processor.transform=maven://org.springframework.cloud.stream.app:transform-processor-rabbit:1.2.0.RELEASE</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the "Import application coordinates from an HTTP URI location" section, you can specify a URI that points to a properties file stored elsewhere, it should contain properties formatted as shown in the previous example.
Alternatively, by using the <strong>Apps as Properties</strong> textbox in the "Import application coordinates from a properties file" section , you can directly list each property string. Finally, if the properties are stored in a local file, the <strong>Import a File</strong> option opens a local file browser to select the file.
After setting your definitions through one of these routes, click <strong>Import Application(s)</strong>.</p>
</div>
<div class="paragraph">
<p>The following image shows an example page of one way to bulk import applications:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-bulk-import-applications.png" alt="Bulk Import Applications">
</div>
<div class="title">Figure 12. Bulk Import Applications</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-runtime"><a class="anchor" href="#dashboard-runtime"></a>36. Runtime</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Runtime</strong> tab of the Dashboard application shows the list of all running applications.
For each runtime applicaiton, the state of the deployment and the number of deployed instances is shown.
A list of the used deployment properties is available by clicking on the application ID.</p>
</div>
<div class="paragraph">
<p>The following image shows an example of the <strong>Runtime</strong> tab in use:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-runtime.png" alt="List of running applications">
</div>
<div class="title">Figure 13. List of Running Applications</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-streams"><a class="anchor" href="#dashboard-streams"></a>37. Streams</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Streams</strong> tab has two child tabs: <strong>Definitions</strong> and <strong>Create Stream</strong>. The following topics describe how to work with each one:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#dashboard-stream-definitions">Working with Stream Definitions</a></p>
</li>
<li>
<p><a href="#dashboard-flo-streams-designer">Creating a Stream</a></p>
</li>
<li>
<p><a href="#dashboard-stream-deploy">Deploying a Stream</a></p>
</li>
<li>
<p><a href="#dashboard-stream-logs">Accessing Stream Logs</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="dashboard-stream-definitions"><a class="anchor" href="#dashboard-stream-definitions"></a>37.1. Working with Stream Definitions</h3>
<div class="paragraph">
<p>The <strong>Streams</strong> section of the Dashboard includes the <strong>Definitions</strong> tab that provides a listing of stream definitions.
There you have the option to deploy or undeploy those stream definitions.
Additionally, you can remove the definition by clicking on <strong>Destroy</strong>.
Each row includes an arrow on the left, which you can click to see a visual representation of the definition.
Hovering over the boxes in the visual representation shows more details about the applications, including any options passed to them.</p>
</div>
<div class="paragraph">
<p>In the following screenshot, the <code>timer</code> stream has been expanded to show the visual representation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-streams-list-definitions.png" alt="List of Stream Definitions">
</div>
<div class="title">Figure 14. List of Stream Definitions</div>
</div>
<div class="paragraph">
<p>If you click the details button, the view changes to show a visual representation of that stream and any related streams.
In the preceding example, if you click details for the <code>timer</code> stream, the view changes to the following view, which clearly shows the relationship between the three streams (two of them are tapping into the <code>timer</code> stream):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-details.png" alt="Stream Details Page">
</div>
<div class="title">Figure 15. Stream Details Page</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-flo-streams-designer"><a class="anchor" href="#dashboard-flo-streams-designer"></a>37.2. Creating a Stream</h3>
<div class="paragraph">
<p>The <strong>Streams</strong> section of the Dashboard includes the <strong>Create Stream</strong> tab, which makes the <a href="https://github.com/spring-projects/spring-flo">Spring Flo</a> designer available. The designer is a canvas application that offers an interactive graphical interface for creating data pipelines.</p>
</div>
<div class="paragraph">
<p>In this tab, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create, manage, and visualize stream pipelines by using DSL, a graphical canvas, or both</p>
</li>
<li>
<p>Write pipelines by using DSL with content-assist and auto-complete</p>
</li>
<li>
<p>Use auto-adjustment and grid-layout capabilities in the GUI for simpler and interactive organization of pipelines</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should watch this <a href="https://www.youtube.com/watch?v=78CgV46OstI">screencast</a> that highlights some of the "Flo for Spring Cloud Data Flow" capabilities.
The Spring Flo <a href="https://github.com/spring-projects/spring-flo/wiki">wiki</a> includes more detailed content on core Flo capabilities.</p>
</div>
<div class="paragraph">
<p>The following image shows the Flo designer in use:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-create-stream.png" alt="Flo for Spring Cloud Data Flo">
</div>
<div class="title">Figure 16. Flo for Spring Cloud Data Flow</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-stream-deploy"><a class="anchor" href="#dashboard-stream-deploy"></a>37.3. Deploying a Stream</h3>
<div class="paragraph">
<p>The stream deploy page includes tabs that provide different ways to set up the deployment properties and deploy the stream.
The following screenshots show the stream deploy page for <code>foobar</code> (<code>time | log</code>).</p>
</div>
<div class="paragraph">
<p>You can define deployments properties by using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Form builder tab: a builder that helps you to define deployment properties (deployer, application properties, and so on)</p>
</li>
<li>
<p>Free text tab: a free text area (for key-value pairs)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can switch between both views.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The form builder offers stronger validation of the inputs.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-deploy-builder.png" alt="Form builder">
</div>
<div class="title">Figure 17. The following image shows the form builder</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-deploy-freetext.png" alt="Free text">
</div>
<div class="title">Figure 18. The following image shows the same properties in the free text</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-stream-logs"><a class="anchor" href="#dashboard-stream-logs"></a>37.4. Accessing Stream Logs</h3>
<div class="paragraph">
<p>Once the stream applications are deployed, their logs can be accessed from the Stream <code>summary</code> page, as the following image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-logs.png" alt="Stream Logs">
</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-flo-streams-designer-fanin-fanout"><a class="anchor" href="#dashboard-flo-streams-designer-fanin-fanout"></a>37.5. Creating Fan-In and Fan-Out Streams</h3>
<div class="paragraph">
<p>In the <a href="#spring-cloud-dataflow-stream-dsl-fanin-fanout">Fan-in and Fan-out</a> chapter, you can learn how to support fan-in and fan-out use cases by  using <a href="#spring-cloud-dataflow-stream-dsl-named-destinations">named destinations</a>.
The UI provides dedicated support for named destinations as well:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-create-stream-fanin-fanout.png" alt="Fan-in and Fan-out example">
</div>
<div class="title">Figure 19. Flo for Spring Cloud Data Flow</div>
</div>
<div class="paragraph">
<p>In this example, we have data from an <em>HTTP Source</em> and a <em>JDBC Source</em> that is being sent to the
<em>sharedData</em> channel, which represents a fan-in use case.
On the other end we have a <em>Cassandra Sink</em> and a <em>File Sink</em> subscribed to the <em>sharedData</em> channel, which represents a fan-out use case.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_tap_stream"><a class="anchor" href="#_creating_a_tap_stream"></a>37.6. Creating a Tap Stream</h3>
<div class="paragraph">
<p>Creating taps by using the Dashboard is straightforward.
Suppose you have a stream consisting of an <em>HTTP Source</em> and a <em>File Sink</em> and you would like to tap into the stream
to also send data to a <em>JDBC Sink</em>.
To create the tap stream, connect the output connector of the <em>HTTP Source</em> to the <em>JDBC Sink</em>.
The connection is displayed as a dotted line, indicating that you created a tap stream.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-create-tap-stream.png" alt="Tap stream example">
</div>
<div class="title">Figure 20. Creating a Tap Stream</div>
</div>
<div class="paragraph">
<p>The primary stream (<em>HTTP Source</em> to <em>File Sink</em>) will be automatically named, in case you did not provide a name for the stream, yet.
When creating tap streams, the primary stream must always be explicitly named.
In the preceding image, the primary stream was named <em>HTTP_INGEST</em>.</p>
</div>
<div class="paragraph">
<p>By using the Dashboard, you can also switch the primary stream so that it becomes the secondary tap stream.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-tap-stream-switch-to-primary-stream.png" alt="Switch tap stream to primary stream">
</div>
<div class="title">Figure 21. Change Primary Stream to Secondary Tap Stream</div>
</div>
<div class="paragraph">
<p>Hover over the existing primary stream, the line between <em>HTTP Source</em> and <em>File Sink</em>.
Several control icons appear, and, by clicking on the icon labeled <em>Switch to/from tap</em>,
you change the primary stream into a tap stream.
Do the same for the tap stream and switch it to a primary stream.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-tap-stream-switch-to-primary-stream-result.png" alt="End result of switching the tap stream to a primary stream">
</div>
<div class="title">Figure 22. End Result of Switching the Primary Stream</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When interacting directly with <a href="#spring-cloud-dataflow-stream-dsl-named-destinations">named destinations</a>,
there can be "n" combinations (Inputs/Outputs). This allows you to create complex topologies involving a
wide variety of data sources and destinations.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_import_and_export_streams"><a class="anchor" href="#_import_and_export_streams"></a>37.7. Import and Export Streams</h3>
<div class="paragraph">
<p>The <strong>Import/Export</strong> tab of the Dashboard includes a page that provides the option to import and export streams.</p>
</div>
<div class="paragraph">
<p>The following image shows the streams export page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-streams-utils-export.png" alt="Stream Utils Export">
</div>
<div class="title">Figure 23. Stream Utils Export page</div>
</div>
<div class="paragraph">
<p>When importing the streams, you have to import from a valid JSON file. You can either manually draft the file or export the file from the streams export page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-streams-utils-import.png" alt="Stream Utils Import">
</div>
<div class="title">Figure 24. Stream Utils Import page</div>
</div>
<div class="paragraph">
<p>After importing the file, you get confirmation of whether the operation completed successfully.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-streams-utils-import-result.png" alt="Stream Utils Import Result">
</div>
<div class="title">Figure 25. Stream Utils Import Result page</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-tasks"><a class="anchor" href="#dashboard-tasks"></a>38. Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Tasks</strong> tab of the Dashboard currently has three tabs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#dashboard-tasks-apps">Apps</a></p>
</li>
<li>
<p><a href="#dashboard-task-definition">Definitions</a></p>
</li>
<li>
<p><a href="#dashboard-tasks-executions">Executions</a></p>
</li>
<li>
<p><a href="#dashboard-task-scheduling">Scheduling</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="dashboard-tasks-apps"><a class="anchor" href="#dashboard-tasks-apps"></a>38.1. Apps</h3>
<div class="paragraph">
<p>Each application encapsulates a unit of work into a reusable component.
Within the Data Flow runtime environment, applications let you create definitions for streams as well as tasks.
Consequently, the <strong>Apps</strong> tab within the <strong>Tasks</strong> tab lets you create task definitions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also use this tab to create Batch Jobs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows a typical list of task applications:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-apps-list.png" alt="List of Task Apps">
</div>
<div class="title">Figure 26. List of Task Apps</div>
</div>
<div class="paragraph">
<p>On this screen, you can perform the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View details, such as the task application options.</p>
</li>
<li>
<p>Create a task definition from the respective application.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_view_task_application_details"><a class="anchor" href="#_view_task_application_details"></a>38.1.1. View Task Application Details</h4>
<div class="paragraph">
<p>On this page, you can view the details of a selected task application, including the list of available options (properties) for that application.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-task-definition"><a class="anchor" href="#dashboard-task-definition"></a>38.2. Definitions</h3>
<div class="paragraph">
<p>This page lists the Data Flow task definitions and provides actions to launch or destroy those tasks.</p>
</div>
<div class="paragraph">
<p>The following image shows the Definitions page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-definitions-list.png" alt="List of Task Definitions">
</div>
<div class="title">Figure 27. List of Task Definitions</div>
</div>
<div class="sect3">
<h4 id="_create_a_task_definition"><a class="anchor" href="#_create_a_task_definition"></a>38.2.1. Create a Task Definition</h4>
<div class="paragraph">
<p>The following image shows a task definition composed of the timestamp application as well as the list of task applications that can be used to create a task definiton:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-definition-create.png" alt="List of Task Applications">
</div>
</div>
<div class="paragraph">
<p>On this page, you can also specify various properties that are used during the deployment of the application.
Once you are satisfied with the task definition, you can click the <strong>CREATE TASK</strong> button.  A dialog box then asks for a task definition name and description. At a minimum, you must provide a name for the new definition.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_composed_task_definitions"><a class="anchor" href="#_creating_composed_task_definitions"></a>38.2.2. Creating Composed Task Definitions</h4>
<div class="paragraph">
<p>The dashboard includes the <strong>Create Composed Task</strong> tab, which provides an interactive graphical interface for creating composed tasks.</p>
</div>
<div class="paragraph">
<p>In this tab, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create and visualize composed tasks by using DSL, a graphical canvas, or both.</p>
</li>
<li>
<p>Use auto-adjustment and grid-layout capabilities in the GUI for simpler and interactive organization of the composed task.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On the <strong>Create Composed Task</strong> screen, you can define one or more task parameters by entering both the parameter key and the parameter value.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Task parameters are not typed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows the composed task designer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-flo-tab.png" alt="Composed Task Designer">
</div>
<div class="title">Figure 28. Composed Task Designer</div>
</div>
</div>
<div class="sect3">
<h4 id="_launching_tasks"><a class="anchor" href="#_launching_tasks"></a>38.2.3. Launching Tasks</h4>
<div class="paragraph">
<p>Once the task definition has been created, you can launch the tasks through the dashboard.
To do so, click the <strong>Tasks</strong> tab and select the task you want to launch by pressing <code>Launch</code>.
The following image shows the Task Launch page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-launch.png" alt="Task Launch">
</div>
<div class="title">Figure 29. Task Launch Page</div>
</div>
</div>
<div class="sect3">
<h4 id="_importexport_tasks"><a class="anchor" href="#_importexport_tasks"></a>38.2.4. Import/Export Tasks</h4>
<div class="paragraph">
<p>The <strong>Import/Export</strong> page  provides the option to import and export tasks.  This is done by clicking the <strong>Import/Export</strong> option on the left side of page.  From here, click the <strong>Export task(s): Create a JSON file with the selected tasks</strong> option. The <code>Export Tasks(s)</code> page appears.</p>
</div>
<div class="paragraph">
<p>The following image shows the tasks export page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-tasks-utils-export.png" alt="Tasks Utils Export">
</div>
<div class="title">Figure 30. Tasks Utils Export page</div>
</div>
<div class="paragraph">
<p>Similarly, you can import task definitions. To do so, click the <strong>Import/Export</strong> option on the left side of page. From here, click the <strong>Import task(s): Import tasks from a JSON file</strong> option to show the <strong>Import Tasks</strong> page.  On the <strong>Import Tasks</strong> page, you have to import from a valid JSON file. You can either manually draft the file or export the file from the <strong>Tasks Export</strong> page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-tasks-utils-import.png" alt="Tasks Utils Import">
</div>
<div class="title">Figure 31. Tasks Utils Import page</div>
</div>
<div class="paragraph">
<p>After importing the file, you get confirmation on whether the operation completed successfully.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-tasks-utils-import-result.png" alt="Tasks Utils Import Result">
</div>
<div class="title">Figure 32. Tasks Utils Import Result page</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-tasks-executions"><a class="anchor" href="#dashboard-tasks-executions"></a>38.3. Executions</h3>
<div class="paragraph">
<p>The <strong>Task Executions</strong> tab shows the current running and completed task executions. From this page, you can drill down into the <strong>Task Execution</strong> details page. Furthermore, you can relaunch a <strong>Task Execution</strong> or stop a running execution.</p>
</div>
<div class="paragraph">
<p>Finally, you can clean up one or more task executions. This operation removes any associated task or batch job from the underlying persistence store. This operation can only be triggered for <em>parent</em> task executions and cascades down to the child task executions (if there are any).</p>
</div>
<div class="paragraph">
<p>The following image shows the <strong>Executions</strong> tab:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-executions-list.png" alt="List of Task Executions">
</div>
<div class="title">Figure 33. List of Task Executions</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-tasks-execution-detail"><a class="anchor" href="#dashboard-tasks-execution-detail"></a>38.4. Execution Detail</h3>
<div class="paragraph">
<p>For each task execution on the <strong>Task Executions</strong> tab, you can retrieve detailed information about a specific execution by clicking the <strong>Execution ID</strong> of the task execution.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-execution-detail.png" alt="List of Task Executions">
</div>
</div>
<div class="paragraph">
<p>On this screen, you can view not only the information from the task executions page but also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Task Arguments</p>
</li>
<li>
<p>External Execution ID</p>
</li>
<li>
<p>Batch Job Indicator (indicates if the task execution contained Spring Batch jobs.)</p>
</li>
<li>
<p>Job Execution IDs links (Clicking the Job Execution Id will take you to the <a href="#dashboard-job-executions-details">Job Execution Details</a> for that Job Execution ID.)</p>
</li>
<li>
<p>Task Execution Duration</p>
</li>
<li>
<p>Task Execution Exit Message</p>
</li>
<li>
<p>Logging output from the Task Execution</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, you can trigger the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Relaunch a task</p>
</li>
<li>
<p>Stop a running task</p>
</li>
<li>
<p>Task execution cleanup (for parent task executions only)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_stop_executing_tasks"><a class="anchor" href="#_stop_executing_tasks"></a>38.4.1. Stop Executing Tasks</h4>
<div class="paragraph">
<p>To submit a stop task execution request to the platform, click the drop down button next to the task execution that needs to be stopped.
Now click the <strong>Stop task</strong> option. The dashboard presents a dialog box asking if you are sure that you want to stop the task execution. If so, click <code>Stop Task Execution(s)</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-execution-stop.png" alt="Stop Executing Tasks">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Child Spring Cloud Task applications launched via Spring Batch applications that use remote partitioning are not stopped.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-jobs"><a class="anchor" href="#dashboard-jobs"></a>39. Jobs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Job Executions</strong> tab of the Dashboard lets you inspect batch jobs.
The main section of the screen provides a list of job executions.
Batch jobs are tasks that each execute one or more batch jobs.
Each job execution has a reference to the task execution ID (in the Task ID column).</p>
</div>
<div class="paragraph">
<p>The list of job executions also shows the state of the underlying Job Definition.
Thus, if the underlying definition has been deleted, &#8220;No definition found&#8221; appears in the <strong>Status</strong> column.</p>
</div>
<div class="paragraph">
<p>You can take the following actions for each job:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Restart (for failed jobs).</p>
</li>
<li>
<p>Stop (for running jobs).</p>
</li>
<li>
<p>View execution details.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Clicking the stop button actually sends a stop request to the running job, which may not immediately stop.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows the <strong>Jobs</strong> tab:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-job-executions-list.png" alt="List of Job Executions">
</div>
<div class="title">Figure 34. List of Job Executions</div>
</div>
<div class="sect2">
<h3 id="dashboard-job-executions-details"><a class="anchor" href="#dashboard-job-executions-details"></a>39.1. Job Execution Details</h3>
<div class="paragraph">
<p>After you have launched a batch job, the Job Execution Details page shows information about the job.</p>
</div>
<div class="paragraph">
<p>The following image shows the Job Execution Details page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-jobs-job-execution-details.png" alt="Job Execution Details">
</div>
<div class="title">Figure 35. Job Execution Details</div>
</div>
<div class="paragraph">
<p>The Job Execution Details page contains a list of the executed steps.
You can further drill into the details of each step&#8217;s execution by clicking the magnifying glass icon.</p>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-job-executions-steps"><a class="anchor" href="#dashboard-job-executions-steps"></a>39.2. Step Execution Details</h3>
<div class="paragraph">
<p>The Step Execution Details page provides information about an individual step within a job.</p>
</div>
<div class="paragraph">
<p>The following image shows the Step Execution Details page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-step-execution-history.png" alt="Step Execution History">
</div>
<div class="title">Figure 36. Step Execution Details</div>
</div>
<div class="paragraph">
<p>The Step Execution Details screen provides a complete list of all Step Execution Context key-value pairs.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For exceptions, the <strong>Exit Description</strong> field contains additional error information.
However, this field can have a maximum of 2500 characters.
Therefore, in the case of long exception stack traces, trimming of error messages may occur.
When that happens, check the server log files for further details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-job-executions-steps-progress"><a class="anchor" href="#dashboard-job-executions-steps-progress"></a>39.3. Step Execution History</h3>
<div class="paragraph">
<p>Under <strong>Step Execution History</strong>, you can also view various metrics associated with the selected step, such as duration, read counts, write counts, and others across all of its executions.
For each metric there are 5 attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Count - The number of step executions that the metric could have participated.  It is not a count for the number of times the event occurred during each step execution.</p>
</li>
<li>
<p>Min - The minimum value for the metric across all the executions for this step.</p>
</li>
<li>
<p>Max - The maximum value for the metric across all the executions for this step.</p>
</li>
<li>
<p>Mean - The mean value for the metric across all the executions for this step.</p>
</li>
<li>
<p>Standard Deviation - The standard deviation for the metric across all the executions for this step.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Step Execution contains the following metrics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Commit Count - The max, min, mean, and standard deviation for the number of commits of all the executions for the given step.</p>
</li>
<li>
<p>Duration - The max, min, mean, and standard deviation for the duration of all the executions for the given step.</p>
</li>
<li>
<p>Duration Per Read - The max, min, mean, and standard deviation for the duration per read of all the executions for the given step.</p>
</li>
<li>
<p>FilterCount - The max, min, mean, and standard deviation for the number of filters of all the executions for the given step.</p>
</li>
<li>
<p>Process Skip Count - The max, min, mean, and standard deviation for the process skips of all the executions for the given step.</p>
</li>
<li>
<p>Read Count - The max, min, mean, and standard deviation for the number of reads of all the executions for the given step.</p>
</li>
<li>
<p>Read Skip Count - The max, min, mean, and standard deviation for the number of read skips of all the executions for the given step.</p>
</li>
<li>
<p>Rollback Count - The max, min, mean, and standard deviation for the number of rollbacks of all the executions for the given step.</p>
</li>
<li>
<p>Write Count - The max, min, mean, and standard deviation for the number of writes of all the executions for the given step.</p>
</li>
<li>
<p>Write Skip Count - The max, min, mean, and standard deviation for the number of skips of all the executions for the given step.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-task-scheduling"><a class="anchor" href="#dashboard-task-scheduling"></a>40. Scheduling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create schedules from the SCDF Dashboard for the Task Definitions. See the <a href="https://dataflow.spring.io/docs/feature-guides/batch/scheduling/">Scheduling Batch Jobs</a> section of the microsite for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-auditing"><a class="anchor" href="#dashboard-auditing"></a>41. Auditing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Auditing page of the Dashboard gives you access to recorded audit events. Audit events
are recorded for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams</p>
<div class="ulist">
<ul>
<li>
<p>Create</p>
</li>
<li>
<p>Delete</p>
</li>
<li>
<p>Deploy</p>
</li>
<li>
<p>Undeploy</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tasks</p>
<div class="ulist">
<ul>
<li>
<p>Create</p>
</li>
<li>
<p>Delete</p>
</li>
<li>
<p>Launch</p>
</li>
</ul>
</div>
</li>
<li>
<p>Scheduling of Tasks</p>
<div class="ulist">
<ul>
<li>
<p>Create Schedule</p>
</li>
<li>
<p>Delete Schedule</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following image shows the Audit Records page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-audit-records-list.png" alt="List of available audit records">
</div>
<div class="title">Figure 37. List Overview of Audit Records</div>
</div>
<div class="paragraph">
<p>By clicking the <em>show details</em> icon (the &#8220;i&#8221; in a circle on the right), you can obtain further details regarding
the auditing details:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/main/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-audit-records-details.png" alt="Details of a single audit record">
</div>
<div class="title">Figure 38. List Details of an Audit Record</div>
</div>
<div class="paragraph">
<p>Generally, auditing provides the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When was the record created?</p>
</li>
<li>
<p>The name of the user who triggered the audit event (if security is enabled)</p>
</li>
<li>
<p>Audit operation (Schedule, Stream, or Task)</p>
</li>
<li>
<p>The performed action (Create, Delete, Deploy, Rollback, Undeploy, or Update)</p>
</li>
<li>
<p>Correlation ID, such as the Stream or Task name</p>
</li>
<li>
<p>Audit Data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The written value of the <em>audit data</em> property depends on the performed <em>audit operation</em> and the <em>action type</em>.
For example, when a schedule is being created, the name of the task definition,
task definition properties, deployment properties, and command line arguments are written
to the persistence store.</p>
</div>
<div class="paragraph">
<p>Sensitive information is sanitized prior to saving the Audit Record, in a best-effort manner.
Any of the following keys are being detected and their sensitive values are
masked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>password</p>
</li>
<li>
<p>secret</p>
</li>
<li>
<p>key</p>
</li>
<li>
<p>token</p>
</li>
<li>
<p>.*credentials.*</p>
</li>
<li>
<p>vcap_services</p>
</li>
</ul>
</div>
</div>
</div>
<h1 id="api-guide" class="sect0"><a class="anchor" href="#api-guide"></a>REST API Guide</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section describes the Spring Cloud Data Flow REST API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-overview"><a class="anchor" href="#api-guide-overview"></a>42. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow provides a REST API that lets you access all aspects of the server.
In fact, the Spring Cloud Data Flow shell is a first-class consumer of that API.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you plan to use the REST API with Java, you should consider using the
provided Java client (<code>DataflowTemplate</code>) that uses the REST API internally.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-version"><a class="anchor" href="#api-guide-version"></a>42.1. HTTP Version</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow establishes a RESTful API version that is updated when there is a breaking change to the API.
The API version can be seen at the end of the home page of Spring Cloud Data Flow as shown in the example below:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "_links": {
      "dashboard": { "href" : "http://localhost:9393/dashboard" },
      ...
  },
  "api.revision":15
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The table below shows the SCDF Release version and its current RESTful API version.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SCDF Version</th>
<th class="tableblock halign-left valign-top">API Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.11.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.10.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.9.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.8.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.7.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-http-verbs"><a class="anchor" href="#api-guide-overview-http-verbs"></a>42.2. HTTP verbs</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow tries to adhere as closely as possible to standard HTTP and REST conventions in its use of HTTP verbs, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Verb</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to retrieve a resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to create a new resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to update an existing resource, including partial updates. Also used for
resources that imply the concept of <code>restarts</code>, such as tasks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to delete an existing resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-http-status-codes"><a class="anchor" href="#api-guide-overview-http-status-codes"></a>42.3. HTTP Status Codes</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow tries to adhere as closely as possible to standard HTTP and REST conventions in its use of HTTP status codes, as shown in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200 OK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request completed successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>201 Created</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A new resource has been created successfully. The resource&#8217;s URI is available from the response&#8217;s <code>Location</code> header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>204 No Content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An update to an existing resource has been applied successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>400 Bad Request</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was malformed. The response body includes an error description that provides further information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>404 Not Found</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested resource did not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>409 Conflict</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested resource already exists. For example, the task already exists or the stream was already being deployed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>422 Unprocessable Entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returned in cases where the job execution cannot be stopped or restarted.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-headers"><a class="anchor" href="#api-guide-overview-headers"></a>42.4. Headers</h3>
<div class="paragraph">
<p>Every response has the following headers:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Content-Type of the payload, e.g. <code>application/hal+json</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-errors"><a class="anchor" href="#api-guide-overview-errors"></a>42.5. Errors</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP error that occurred, e.g. <code>Bad Request</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A description of the cause of the error</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to which the request was made</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP status code, e.g. <code>400</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time, in milliseconds, at which the error occurred</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-hypermedia"><a class="anchor" href="#api-guide-overview-hypermedia"></a>42.6. Hypermedia</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow uses hypermedia, and resources include links to other resources
in their responses.
Responses are in the <a href="http://stateless.co/hal_specification.html">Hypertext Application from resource-to-resource Language (HAL)</a> format.
Links can be found beneath the <code>_links</code> key.
Users of the API should not create URIs themselves.
Instead, they should use the above-described links to navigate.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-resources"><a class="anchor" href="#api-guide-resources"></a>43. Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The API includes the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-index">Index</a></p>
</li>
<li>
<p><a href="#resources-about">Server Meta Information</a></p>
</li>
<li>
<p><a href="#api-guide-resources-schema-info">Schema Information</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records">Audit Records</a></p>
</li>
<li>
<p><a href="#resources-registered-applications">Registered Applications</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions">Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment">Stream Deployments</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validate">Stream Validation</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-definitions">Task Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions">Task Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-scheduler">Task Scheduler</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validate">Task Validation</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions">Job Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances">Job Instances</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions">Job Step Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications">Runtime Information about Applications</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-logs">Stream Logs</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-logs">Task Logs</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="api-guide-resources-index"><a class="anchor" href="#api-guide-resources-index"></a>43.1. Index</h3>
<div class="paragraph">
<p>The index provides the entry point into Spring Cloud Data Flow&#8217;s REST API.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-index-access">Accessing the index</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-response-structure">Response Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-example-response">Example Response</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-links">Links</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-index-access"><a class="anchor" href="#api-guide-resources-index-access"></a>43.1.1. Accessing the index</h4>
<div class="paragraph">
<p>Use a <code>GET</code> request to access the index.</p>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-request-structure"><a class="anchor" href="#api-guide-resources-index-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET / HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-example-request"><a class="anchor" href="#api-guide-resources-index-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-response-structure"><a class="anchor" href="#api-guide-resources-index-response-structure"></a>Response Structure</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to other resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>['api.revision']</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incremented each time a change is implemented in this REST API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.audit-records.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the audit records</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.dashboard.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the dashboard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.schema/versions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the schema/versions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.schema/targets.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the schema/targets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/definitions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/definitions/definition.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/definitions/definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/definitions/definition.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/definitions/definition is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}/instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps/{appId}/instances is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}/instances/{instanceId}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps/{appId}/instances/{instanceId} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}/post.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}/instances/{instanceId}/post</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}/post.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps/{appId}/instances/{instanceId}/post is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}/actuator[].href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}/instances/{instanceId}/actuator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}/actuator[].templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps/{appId}/instances/{instanceId}/actuator is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/streams.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/streams</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/streams.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/streams is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/streams/{streamNames}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/streams/{streamNames}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/streams/{streamNames}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/streams/{streamNames} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/logs.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/logs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/logs/{streamName}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/logs/{streamName}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/logs/{streamName}/{appName}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/logs/{streamName}/{appName}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/logs/{streamName}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/logs/{streamName} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/logs/{streamName}/{appName}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/logs/{streamName}/{appName} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to streams/deployments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to streams/deployments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}{?reuse-deployment-properties}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}{?reuse-deployment-properties}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/deployment.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/deployment.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/deployment is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/manifest/{name}/{version}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/manifest/{name}/{version}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/manifest/{name}/{version}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/manifest/{name}/{version} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/history/{name}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/history/{name}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/history/{name}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/history is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/rollback/{name}/{version}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/rollback/{name}/{version}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/rollback/{name}/{version}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/rollback/{name}/{version} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/update/{name}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/update/{name}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/update/{name}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/update/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/platform/list.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/platform/list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/scale/{streamName}/{appName}/instances/{count}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/scale/{streamName}/{appName}/instances/{count}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/scale/{streamName}/{appName}/instances/{count}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/scale/{streamName}/{appName}/instances/{count} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/validation.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/validation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/validation.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/validation is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/platforms.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/platforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/definitions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/definitions/definition.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/definitions/definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/definitions/definition.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/definitions/definition is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/launch.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to tasks/executions/launch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/launch.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that Link tasks/executions/launch is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/executions/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/current.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/current</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/execution.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/execution.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/executions/execution is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/external.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/external</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/external.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/executions/external is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/info/executions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/info/executions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/info/executions.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/info is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/logs.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/logs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/logs.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/logs is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/schedules.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/schedules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/schedules/instances.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/schedules/instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/schedules/instances.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/schedules/instances is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/validation.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/validation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/validation.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/validation is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/thinexecutions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/status.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/status.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/status is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/thinexecutions/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/jobInstanceId.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/thinexecutions/jobInstanceId</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/jobInstanceId.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/jobInstanceId is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/taskExecutionId.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/thinexecutions/taskExecutionId</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/taskExecutionId.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/taskExecutionId is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution/steps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution/steps is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution/steps/step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution/steps/step is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step/progress.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution/steps/step/progress</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step/progress.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution/steps/step/progress is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/instances/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/instances/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/instance.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/instances/instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/instance.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/instances/instance is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tools/parseTaskTextToGraph.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tools/parseTaskTextToGraph</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tools/convertTaskGraphToText.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tools/convertTaskGraphToText</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.apps.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the apps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.about.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the about</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/stream.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the completions/stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/stream.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link completions/stream is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/task.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the completions/task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/task.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link completions/task is templated</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-example-response"><a class="anchor" href="#api-guide-resources-index-example-response"></a>Example Response</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 8122

{
  "_links" : {
    "dashboard" : {
      "href" : "http://localhost:9393/dashboard"
    },
    "audit-records" : {
      "href" : "http://localhost:9393/audit-records"
    },
    "schema/versions" : {
      "href" : "http://localhost:9393/schema/versions"
    },
    "schema/targets" : {
      "href" : "http://localhost:9393/schema/targets"
    },
    "streams/definitions" : {
      "href" : "http://localhost:9393/streams/definitions"
    },
    "streams/definitions/definition" : {
      "href" : "http://localhost:9393/streams/definitions/{name}",
      "templated" : true
    },
    "streams/validation" : {
      "href" : "http://localhost:9393/streams/validation/{name}",
      "templated" : true
    },
    "runtime/streams" : {
      "href" : "http://localhost:9393/runtime/streams{?names}",
      "templated" : true
    },
    "runtime/streams/{streamNames}" : {
      "href" : "http://localhost:9393/runtime/streams/{streamNames}",
      "templated" : true
    },
    "runtime/apps" : {
      "href" : "http://localhost:9393/runtime/apps"
    },
    "runtime/apps/{appId}" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}",
      "templated" : true
    },
    "runtime/apps/{appId}/instances" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances",
      "templated" : true
    },
    "runtime/apps/{appId}/instances/{instanceId}" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances/{instanceId}",
      "templated" : true
    },
    "runtime/apps/{appId}/instances/{instanceId}/actuator" : [ {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances/{instanceId}/actuator?endpoint={endpoint}",
      "templated" : true
    }, {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances/{instanceId}/actuator",
      "templated" : true
    } ],
    "runtime/apps/{appId}/instances/{instanceId}/post" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances/{instanceId}/post",
      "templated" : true
    },
    "streams/deployments" : {
      "href" : "http://localhost:9393/streams/deployments"
    },
    "streams/deployments/{name}{?reuse-deployment-properties}" : {
      "href" : "http://localhost:9393/streams/deployments/{name}?reuse-deployment-properties=false",
      "templated" : true
    },
    "streams/deployments/{name}" : {
      "href" : "http://localhost:9393/streams/deployments/{name}",
      "templated" : true
    },
    "streams/deployments/history/{name}" : {
      "href" : "http://localhost:9393/streams/deployments/history/{name}",
      "templated" : true
    },
    "streams/deployments/manifest/{name}/{version}" : {
      "href" : "http://localhost:9393/streams/deployments/manifest/{name}/{version}",
      "templated" : true
    },
    "streams/deployments/platform/list" : {
      "href" : "http://localhost:9393/streams/deployments/platform/list"
    },
    "streams/deployments/rollback/{name}/{version}" : {
      "href" : "http://localhost:9393/streams/deployments/rollback/{name}/{version}",
      "templated" : true
    },
    "streams/deployments/update/{name}" : {
      "href" : "http://localhost:9393/streams/deployments/update/{name}",
      "templated" : true
    },
    "streams/deployments/deployment" : {
      "href" : "http://localhost:9393/streams/deployments/{name}",
      "templated" : true
    },
    "streams/deployments/scale/{streamName}/{appName}/instances/{count}" : {
      "href" : "http://localhost:9393/streams/deployments/scale/{streamName}/{appName}/instances/{count}",
      "templated" : true
    },
    "streams/logs" : {
      "href" : "http://localhost:9393/streams/logs"
    },
    "streams/logs/{streamName}" : {
      "href" : "http://localhost:9393/streams/logs/{streamName}",
      "templated" : true
    },
    "streams/logs/{streamName}/{appName}" : {
      "href" : "http://localhost:9393/streams/logs/{streamName}/{appName}",
      "templated" : true
    },
    "tasks/platforms" : {
      "href" : "http://localhost:9393/tasks/platforms"
    },
    "tasks/definitions" : {
      "href" : "http://localhost:9393/tasks/definitions"
    },
    "tasks/definitions/definition" : {
      "href" : "http://localhost:9393/tasks/definitions/{name}",
      "templated" : true
    },
    "tasks/executions" : {
      "href" : "http://localhost:9393/tasks/executions"
    },
    "tasks/executions/external" : {
      "href" : "http://localhost:9393/tasks/executions/external/{externalExecutionId}{?platform}",
      "templated" : true
    },
    "tasks/executions/launch" : {
      "href" : "http://localhost:9393/tasks/executions/launch?name={name}{&amp;properties,arguments}",
      "templated" : true
    },
    "tasks/executions/name" : {
      "href" : "http://localhost:9393/tasks/executions{?name}",
      "templated" : true
    },
    "tasks/executions/current" : {
      "href" : "http://localhost:9393/tasks/executions/current"
    },
    "tasks/executions/execution" : {
      "href" : "http://localhost:9393/tasks/executions/{id}{?schemaTarget}",
      "templated" : true
    },
    "tasks/validation" : {
      "href" : "http://localhost:9393/tasks/validation/{name}",
      "templated" : true
    },
    "tasks/info/executions" : {
      "href" : "http://localhost:9393/tasks/info/executions{?completed,name,days}",
      "templated" : true
    },
    "tasks/logs" : {
      "href" : "http://localhost:9393/tasks/logs/{taskExternalExecutionId}{?platformName,schemaTarget}",
      "templated" : true
    },
    "tasks/schedules" : {
      "href" : "http://localhost:9393/tasks/schedules"
    },
    "tasks/schedules/instances" : {
      "href" : "http://localhost:9393/tasks/schedules/instances/{taskDefinitionName}",
      "templated" : true
    },
    "jobs/executions" : {
      "href" : "http://localhost:9393/jobs/executions"
    },
    "jobs/executions/name" : {
      "href" : "http://localhost:9393/jobs/executions{?name}",
      "templated" : true
    },
    "jobs/executions/status" : {
      "href" : "http://localhost:9393/jobs/executions{?status}",
      "templated" : true
    },
    "jobs/executions/execution" : {
      "href" : "http://localhost:9393/jobs/executions/{id}",
      "templated" : true
    },
    "jobs/executions/execution/steps" : {
      "href" : "http://localhost:9393/jobs/executions/{jobExecutionId}/steps",
      "templated" : true
    },
    "jobs/executions/execution/steps/step" : {
      "href" : "http://localhost:9393/jobs/executions/{jobExecutionId}/steps/{stepId}",
      "templated" : true
    },
    "jobs/executions/execution/steps/step/progress" : {
      "href" : "http://localhost:9393/jobs/executions/{jobExecutionId}/steps/{stepId}/progress",
      "templated" : true
    },
    "jobs/instances/name" : {
      "href" : "http://localhost:9393/jobs/instances{?name}",
      "templated" : true
    },
    "jobs/instances/instance" : {
      "href" : "http://localhost:9393/jobs/instances/{id}",
      "templated" : true
    },
    "tools/parseTaskTextToGraph" : {
      "href" : "http://localhost:9393/tools"
    },
    "tools/convertTaskGraphToText" : {
      "href" : "http://localhost:9393/tools"
    },
    "jobs/thinexecutions" : {
      "href" : "http://localhost:9393/jobs/thinexecutions"
    },
    "jobs/thinexecutions/name" : {
      "href" : "http://localhost:9393/jobs/thinexecutions{?name}",
      "templated" : true
    },
    "jobs/thinexecutions/jobInstanceId" : {
      "href" : "http://localhost:9393/jobs/thinexecutions{?jobInstanceId}",
      "templated" : true
    },
    "jobs/thinexecutions/taskExecutionId" : {
      "href" : "http://localhost:9393/jobs/thinexecutions{?taskExecutionId}",
      "templated" : true
    },
    "apps" : {
      "href" : "http://localhost:9393/apps"
    },
    "about" : {
      "href" : "http://localhost:9393/about"
    },
    "completions/stream" : {
      "href" : "http://localhost:9393/completions/stream{?start,detailLevel}",
      "templated" : true
    },
    "completions/task" : {
      "href" : "http://localhost:9393/completions/task{?start,detailLevel}",
      "templated" : true
    }
  },
  "api.revision" : 14
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-links"><a class="anchor" href="#api-guide-resources-index-links"></a>Links</h5>
<div class="paragraph">
<p>The main element of the index are the links, as they let you traverse the API
and execute the desired functionality:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>about</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access meta information, including enabled features, security info, version information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dashboard</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access the dashboard UI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>audit-records</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides audit trail information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle registered applications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>completions/stream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the DSL completion features for Stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>completions/task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the DSL completion features for Task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the JobExecution resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/thinexecutions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the JobExecution thin resource with no step executions included</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides details for a specific JobExecution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution/steps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the steps for a JobExecution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution/steps/step</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the details for a specific step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution/steps/step/progress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides progress information for a specific step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Job name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Job status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/thinexecutions/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Job name with no step executions included</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/thinexecutions/jobInstanceId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Job Instance Id with no step executions included</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/thinexecutions/taskExecutionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Task Execution Id with no step executions included</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/instances/instance</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the job instance resource for a specific job instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/instances/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the Job instance resource for a specific job name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/streams</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes stream runtime status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/streams/{streamNames}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes streams runtime status for a given stream names</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the runtime application resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the runtime status for a specific app</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}/instances</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the status for app instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}/instances/{instanceId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the status for specific app instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}/instances/{instanceId}/actuator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXPERIMENTAL: Allows invoking Actuator endpoint on specific app instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}/instances/{instanceId}/post</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXPERIMENTAL: Allows POST on http sink</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/definitions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the task definition resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/definitions/definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides details for a specific task definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/validation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the validation for a task definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns Task executions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/launch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides for launching a Task execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/external</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns Task execution by external id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/current</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the current count of running tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/info/executions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the task executions info</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/schedules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides schedule information of tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/schedules/instances</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides schedule information of a specific task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns all task executions for a given Task name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/execution</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides details for a specific task execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/platforms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides platform accounts for launching tasks.  The results can be filtered to show the platforms that support scheduling by adding a request parameter of 'schedulesEnabled=true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/logs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve the task application log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schema/versions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Spring Boot related schemas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schema/targets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of schema targets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/definitions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the Streams resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/definitions/definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle a specific Stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/validation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the validation for a stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides Stream deployment operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request deployment info for a stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/{name}{?reuse-deployment-properties}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request deployment info for a stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/deployment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request (un-)deployment of an existing stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/manifest/{name}/{version}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a manifest info of a release version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/history/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get stream&#8217;s deployment history as list or Releases for this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/rollback/{name}/{version}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rollback the stream to the previous or a specific version of the stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/update/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the stream.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/platform/list</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of supported deployment platforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/scale/{streamName}/{appName}/instances/{count}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scale up or down number of application instances for a selected stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/logs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve application logs of the stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/logs/{streamName}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve application logs of the stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/logs/{streamName}/{appName}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a specific application log of the stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tools/parseTaskTextToGraph</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse a task definition into a graph structure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tools/convertTaskGraphToText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert a graph format into DSL text format</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-about"><a class="anchor" href="#resources-about"></a>43.2. Server Meta Information</h3>
<div class="paragraph">
<p>The server meta information endpoint provides more information about the server itself.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-server-meta-retrieving">Retrieving information about the server</a></p>
</li>
<li>
<p><a href="#api-guide-resources-server-meta-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-server-meta-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-server-meta-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-server-meta-retrieving"><a class="anchor" href="#api-guide-resources-server-meta-retrieving"></a>43.2.1. Retrieving information about the server</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns meta information for Spring Cloud Data Flow, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Runtime environment information</p>
</li>
<li>
<p>Information regarding which features are enabled</p>
</li>
<li>
<p>Dependency information of Spring Cloud Data Flow Server</p>
</li>
<li>
<p>Security information</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-server-meta-request-structure"><a class="anchor" href="#api-guide-resources-server-meta-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /about HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-server-meta-example-request"><a class="anchor" href="#api-guide-resources-server-meta-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/about' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-server-meta-response-structure"><a class="anchor" href="#api-guide-resources-server-meta-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 2139

{
  "featureInfo" : {
    "analyticsEnabled" : true,
    "streamsEnabled" : true,
    "tasksEnabled" : true,
    "schedulesEnabled" : true,
    "monitoringDashboardType" : "NONE"
  },
  "versionInfo" : {
    "implementation" : {
      "name" : "${info.app.name}",
      "version" : "${info.app.version}"
    },
    "core" : {
      "name" : "Spring Cloud Data Flow Core",
      "version" : "2.11.0"
    },
    "dashboard" : {
      "name" : "Spring Cloud Dataflow UI",
      "version" : "3.4.0"
    },
    "shell" : {
      "name" : "Spring Cloud Data Flow Shell",
      "version" : "2.11.0",
      "url" : "https://repo.maven.apache.org/maven2/org/springframework/cloud/spring-cloud-dataflow-shell/2.11.0/spring-cloud-dataflow-shell-2.11.0.jar"
    }
  },
  "securityInfo" : {
    "authenticationEnabled" : false,
    "authenticated" : false,
    "username" : null,
    "roles" : [ ]
  },
  "runtimeEnvironment" : {
    "appDeployer" : {
      "deployerImplementationVersion" : "Test Version",
      "deployerName" : "Test Server",
      "deployerSpiVersion" : "2.11.0",
      "javaVersion" : "1.8.0_382",
      "platformApiVersion" : "",
      "platformClientVersion" : "",
      "platformHostVersion" : "",
      "platformSpecificInfo" : {
        "default" : "local"
      },
      "platformType" : "Skipper Managed",
      "springBootVersion" : "2.7.15",
      "springVersion" : "5.3.29"
    },
    "taskLaunchers" : [ {
      "deployerImplementationVersion" : "unknown",
      "deployerName" : "LocalTaskLauncher",
      "deployerSpiVersion" : "unknown",
      "javaVersion" : "1.8.0_382",
      "platformApiVersion" : "Linux 6.2.0-1011-azure",
      "platformClientVersion" : "6.2.0-1011-azure",
      "platformHostVersion" : "6.2.0-1011-azure",
      "platformSpecificInfo" : { },
      "platformType" : "Local",
      "springBootVersion" : "2.7.15",
      "springVersion" : "5.3.29"
    } ]
  },
  "monitoringDashboardInfo" : {
    "url" : "",
    "refreshInterval" : 15,
    "dashboardType" : "NONE",
    "source" : "default-scdf-source"
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/about"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-registered-applications"><a class="anchor" href="#resources-registered-applications"></a>43.3. Registered Applications</h3>
<div class="paragraph">
<p>The registered applications endpoint provides information about the applications that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#resources-app-registry-list">Listing Applications</a></p>
</li>
<li>
<p><a href="#resources-app-registry-get">Getting Information on a Particular Application</a></p>
</li>
<li>
<p><a href="#resources-app-registry-post">Registering a New Application</a></p>
</li>
<li>
<p><a href="#resources-app-registry-post-versioned">Registering a New Application with version</a></p>
</li>
<li>
<p><a href="#resources-app-registry-bulk">Registering Applications in Bulk</a></p>
</li>
<li>
<p><a href="#resources-app-registry-default">Set the Default Application Version</a></p>
</li>
<li>
<p><a href="#resources-app-registry-delete">Unregistering an Application</a></p>
</li>
<li>
<p><a href="#resources-app-registry-delete-all">Unregistering all Applications</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="resources-app-registry-list"><a class="anchor" href="#resources-app-registry-list"></a>43.3.1. Listing Applications</h4>
<div class="paragraph">
<p>A <code>GET</code> request lists all of the applications known to Spring Cloud Data Flow.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /apps?search=&amp;type=source&amp;defaultVersion=true&amp;page=0&amp;size=10&amp;sort=name%2CASC HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-request-parameters"><a class="anchor" href="#api-guide-resources-app-registry-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restrict the returned apps to the type of the app. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The boolean flag to set to retrieve only the apps of the default versions (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-example-request"><a class="anchor" href="#api-guide-resources-app-registry-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps?search=&amp;type=source&amp;defaultVersion=true&amp;page=0&amp;size=10&amp;sort=name%2CASC' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1151

{
  "_embedded" : {
    "appRegistrationResourceList" : [ {
      "name" : "http",
      "type" : "source",
      "uri" : "maven://org.springframework.cloud.stream.app:http-source-rabbit:1.2.0.RELEASE",
      "version" : "1.2.0.RELEASE",
      "defaultVersion" : true,
      "bootVersion" : "2",
      "versions" : [ "1.2.0.RELEASE" ],
      "label" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/apps/source/http/1.2.0.RELEASE"
        }
      }
    }, {
      "name" : "time",
      "type" : "source",
      "uri" : "maven://org.springframework.cloud.stream.app:time-source-rabbit:1.2.0.RELEASE",
      "version" : "1.2.0.RELEASE",
      "defaultVersion" : true,
      "bootVersion" : "2",
      "versions" : [ "1.2.0.RELEASE" ],
      "label" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/apps/source/time/1.2.0.RELEASE"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/apps?page=0&amp;size=10&amp;sort=name,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-get"><a class="anchor" href="#resources-app-registry-get"></a>43.3.2. Getting Information on a Particular Application</h4>
<div class="paragraph">
<p>A <code>GET</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;</code> gets info on a particular application.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-get-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-get-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-get-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-get-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-get-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /apps/source/http?exhaustive=false HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-request-parameters"><a class="anchor" href="#api-guide-resources-app-registry-get-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exhaustive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return all application properties, including common Spring Boot properties</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-path-parameters"><a class="anchor" href="#api-guide-resources-app-registry-get-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to query. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to query</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-example-request"><a class="anchor" href="#api-guide-resources-app-registry-get-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http?exhaustive=false' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-get-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 382

{
  "name" : "http",
  "type" : "source",
  "uri" : "maven://org.springframework.cloud.stream.app:http-source-rabbit:1.2.0.RELEASE",
  "version" : "1.2.0.RELEASE",
  "defaultVersion" : true,
  "bootVersion" : "2",
  "versions" : null,
  "label" : null,
  "options" : [ ],
  "shortDescription" : null,
  "inboundPortNames" : [ ],
  "outboundPortNames" : [ ],
  "optionGroups" : { }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-post"><a class="anchor" href="#resources-app-registry-post"></a>43.3.3. Registering a New Application</h4>
<div class="paragraph">
<p>A <code>POST</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;</code> allows registration of a new application.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-post-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-post-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /apps/source/http?bootVersion=2 HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-request-parameters"><a class="anchor" href="#api-guide-resources-app-registry-post-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application bits reside</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata-uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application metadata jar can be found</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Spring Boot version of the application.Default is 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be true if a registration with the same name and type already exists, otherwise an error will occur</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-path-parameters"><a class="anchor" href="#api-guide-resources-app-registry-post-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to register. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to register</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-example-request"><a class="anchor" href="#api-guide-resources-app-registry-post-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http?bootVersion=2' -i -X POST \
    -d 'uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-post-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-post-versioned"><a class="anchor" href="#resources-app-registry-post-versioned"></a>43.3.4. Registering a New Application with version</h4>
<div class="paragraph">
<p>A <code>POST</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;/&lt;version&gt;</code> allows registration of a new application.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-post-versioned-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /apps/source/http/1.1.0.RELEASE?bootVersion=2 HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-request-parameters"><a class="anchor" href="#api-guide-resources-app-registry-post-versioned-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application bits reside</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata-uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application metadata jar can be found</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be true if a registration with the same name and type already exists, otherwise an error will occur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bootVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Boot version. Value of 2 or 3. Must be supplied of greater than 2.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-path-parameters"><a class="anchor" href="#api-guide-resources-app-registry-post-versioned-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}/{version:.+}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to register. One of [app, source, processor, sink, task] (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to register</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application to register</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-example-request"><a class="anchor" href="#api-guide-resources-app-registry-post-versioned-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http/1.1.0.RELEASE?bootVersion=2' -i -X POST \
    -d 'uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-post-versioned-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-bulk"><a class="anchor" href="#resources-app-registry-bulk"></a>43.3.5. Registering Applications in Bulk</h4>
<div class="paragraph">
<p>A <code>POST</code> request on <code>/apps</code> allows registering multiple applications at once.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-bulk-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /apps HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

apps=source.http%3Dmaven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE&amp;force=false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-request-parameters"><a class="anchor" href="#api-guide-resources-app-registry-bulk-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where a properties file containing registrations can be fetched. Exclusive with <code>apps</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inline set of registrations. Exclusive with <code>uri</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be true if a registration with the same name and type already exists, otherwise an error will occur</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-example-request"><a class="anchor" href="#api-guide-resources-app-registry-bulk-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps' -i -X POST \
    -d 'apps=source.http%3Dmaven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE&amp;force=false'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-bulk-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/hal+json
Content-Length: 685

{
  "_embedded" : {
    "appRegistrationResourceList" : [ {
      "name" : "http",
      "type" : "source",
      "uri" : "maven://org.springframework.cloud.stream.app:http-source-rabbit:1.1.0.RELEASE",
      "version" : "1.1.0.RELEASE",
      "defaultVersion" : true,
      "bootVersion" : "2",
      "versions" : null,
      "label" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/apps/source/http/1.1.0.RELEASE"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-default"><a class="anchor" href="#resources-app-registry-default"></a>43.3.6. Set the Default Application Version</h4>
<div class="paragraph">
<p>For an application with the same <code>name</code> and <code>type</code>, you can register multiple versions.
In this case, you can choose one of the versions as the default application.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-default-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-default-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-default-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-default-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-default-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">PUT /apps/source/http/1.2.0.RELEASE HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-path-parameters"><a class="anchor" href="#api-guide-resources-app-registry-default-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}/{version:.+}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-example-request"><a class="anchor" href="#api-guide-resources-app-registry-default-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http/1.2.0.RELEASE' -i -X PUT \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-default-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 202 Accepted</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-delete"><a class="anchor" href="#resources-app-registry-delete"></a>43.3.7. Unregistering an Application</h4>
<div class="paragraph">
<p>A <code>DELETE</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;</code> unregisters a previously registered application.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-delete-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-delete-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /apps/source/http/1.2.0.RELEASE HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-path-parameters"><a class="anchor" href="#api-guide-resources-app-registry-delete-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}/{version}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to unregister. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to unregister</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application to unregister (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-example-request"><a class="anchor" href="#api-guide-resources-app-registry-delete-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http/1.2.0.RELEASE' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-delete-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-delete-all"><a class="anchor" href="#resources-app-registry-delete-all"></a>43.3.8. Unregistering all Applications</h4>
<div class="paragraph">
<p>A <code>DELETE</code> request on <code>/apps</code> unregisters all the applications.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-delete-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-all-request-structure"><a class="anchor" href="#api-guide-resources-app-registry-delete-all-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /apps HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-all-example-request"><a class="anchor" href="#api-guide-resources-app-registry-delete-all-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/apps' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-all-response-structure"><a class="anchor" href="#api-guide-resources-app-registry-delete-all-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-schema-info"><a class="anchor" href="#api-guide-resources-schema-info"></a>43.4. Schema Information</h3>
<div class="paragraph">
<p>The schema information endpoint provides information about the supported Spring Boot schema versions for Task and Batch applications and the available Schema Targets.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-schema-info-versions">List All Schema Versions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-schema-info-targets">List All Schema Targets</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-schema-info-versions"><a class="anchor" href="#api-guide-resources-schema-info-versions"></a>43.4.1. List All Schema Versions</h4>
<div class="paragraph">
<p>The schema endpoint provides for listing supported Spring Boot versions.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-schema-info-versions-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-schema-info-versions-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-schema-info-versions-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-schema-info-versions-request-structure"><a class="anchor" href="#api-guide-resources-schema-info-versions-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /schema/versions HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-schema-info-versions-example-request"><a class="anchor" href="#api-guide-resources-schema-info-versions-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/schema/versions' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-schema-info-versions-response-structure"><a class="anchor" href="#api-guide-resources-schema-info-versions-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 63

{
  "defaultSchemaVersion" : "2",
  "versions" : [ "2", "3" ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-schema-info-targets"><a class="anchor" href="#api-guide-resources-schema-info-targets"></a>43.4.2. List All Schema Targets</h4>
<div class="paragraph">
<p>The schema endpoint provides for listing supported Schema Targets.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-schema-info-targets-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-schema-info-targets-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-schema-info-targets-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-schema-info-targets-request-structure"><a class="anchor" href="#api-guide-resources-schema-info-targets-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /schema/targets HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-schema-info-targets-example-request"><a class="anchor" href="#api-guide-resources-schema-info-targets-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/schema/targets' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-schema-info-targets-response-structure"><a class="anchor" href="#api-guide-resources-schema-info-targets-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 660

{
  "defaultSchemaTarget" : "boot2",
  "schemas" : [ {
    "name" : "boot3",
    "schemaVersion" : "3",
    "taskPrefix" : "BOOT3_TASK_",
    "batchPrefix" : "BOOT3_BATCH_",
    "datasource" : null,
    "_links" : {
      "self" : {
        "href" : "http://localhost:9393/schema/targets/boot3"
      }
    }
  }, {
    "name" : "boot2",
    "schemaVersion" : "2",
    "taskPrefix" : "TASK_",
    "batchPrefix" : "BATCH_",
    "datasource" : null,
    "_links" : {
      "self" : {
        "href" : "http://localhost:9393/schema/targets/boot2"
      }
    }
  } ],
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/schema/targets"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-audit-records"><a class="anchor" href="#api-guide-resources-audit-records"></a>43.5. Audit Records</h3>
<div class="paragraph">
<p>The audit records endpoint provides information about the audit records. The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-records-list">List All Audit Records</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get">Retrieve Audit Record Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-action-types">List all the Audit Action Types</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-operation-types">List all the Audit Operation Types</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-records-list"><a class="anchor" href="#api-guide-resources-audit-records-list"></a>43.5.1. List All Audit Records</h4>
<div class="paragraph">
<p>The audit records endpoint lets you retrieve audit trail information.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-records-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-request-structure"><a class="anchor" href="#api-guide-resources-audit-records-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /audit-records?page=0&amp;size=10&amp;operations=STREAM&amp;actions=CREATE&amp;fromDate=2000-01-01T00%3A00%3A00&amp;toDate=2099-01-01T00%3A00%3A00 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-request-parameters"><a class="anchor" href="#api-guide-resources-audit-records-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of Audit Operations (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>actions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of Audit Actions (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fromDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">From date filter (ex.: 2019-02-03T00:00:30) (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To date filter (ex.: 2019-02-03T00:00:30) (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-example-request"><a class="anchor" href="#api-guide-resources-audit-records-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/audit-records?page=0&amp;size=10&amp;operations=STREAM&amp;actions=CREATE&amp;fromDate=2000-01-01T00%3A00%3A00&amp;toDate=2099-01-01T00%3A00%3A00' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-response-structure"><a class="anchor" href="#api-guide-resources-audit-records-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 680

{
  "_embedded" : {
    "auditRecordResourceList" : [ {
      "auditRecordId" : 5,
      "createdBy" : null,
      "correlationId" : "timelog",
      "auditData" : "time --format='YYYY MM DD' | log",
      "createdOn" : "2023-09-21T00:47:14.494Z",
      "auditAction" : "CREATE",
      "auditOperation" : "STREAM",
      "platformName" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/audit-records/5"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/audit-records?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-record-get"><a class="anchor" href="#api-guide-resources-audit-record-get"></a>43.5.2. Retrieve Audit Record Detail</h4>
<div class="paragraph">
<p>The audit record endpoint lets you get a single audit record. The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-record-get-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-request-structure"><a class="anchor" href="#api-guide-resources-audit-record-get-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /audit-records/5 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-path-parameters"><a class="anchor" href="#api-guide-resources-audit-record-get-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/audit-records/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of the audit record to query (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-example-request"><a class="anchor" href="#api-guide-resources-audit-record-get-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/audit-records/5' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-response-structure"><a class="anchor" href="#api-guide-resources-audit-record-get-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 354

{
  "auditRecordId" : 5,
  "createdBy" : null,
  "correlationId" : "timelog",
  "auditData" : "time --format='YYYY MM DD' | log",
  "createdOn" : "2023-09-21T00:47:14.494Z",
  "auditAction" : "CREATE",
  "auditOperation" : "STREAM",
  "platformName" : null,
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/audit-records/5"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-action-types"><a class="anchor" href="#api-guide-resources-audit-action-types"></a>43.5.3. List all the Audit Action Types</h4>
<div class="paragraph">
<p>The audit record endpoint lets you get the action types. The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-action-types-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-action-types-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-action-types-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-action-types-request-structure"><a class="anchor" href="#api-guide-resources-audit-action-types-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /audit-records/audit-action-types HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-action-types-example-request"><a class="anchor" href="#api-guide-resources-audit-action-types-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/audit-records/audit-action-types' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-action-types-response-structure"><a class="anchor" href="#api-guide-resources-audit-action-types-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1111

[ {
  "id" : 100,
  "name" : "Create",
  "description" : "Create an Entity",
  "nameWithDescription" : "Create (Create an Entity)",
  "key" : "CREATE"
}, {
  "id" : 200,
  "name" : "Delete",
  "description" : "Delete an Entity",
  "nameWithDescription" : "Delete (Delete an Entity)",
  "key" : "DELETE"
}, {
  "id" : 300,
  "name" : "Deploy",
  "description" : "Deploy an Entity",
  "nameWithDescription" : "Deploy (Deploy an Entity)",
  "key" : "DEPLOY"
}, {
  "id" : 400,
  "name" : "Rollback",
  "description" : "Rollback an Entity",
  "nameWithDescription" : "Rollback (Rollback an Entity)",
  "key" : "ROLLBACK"
}, {
  "id" : 500,
  "name" : "Undeploy",
  "description" : "Undeploy an Entity",
  "nameWithDescription" : "Undeploy (Undeploy an Entity)",
  "key" : "UNDEPLOY"
}, {
  "id" : 600,
  "name" : "Update",
  "description" : "Update an Entity",
  "nameWithDescription" : "Update (Update an Entity)",
  "key" : "UPDATE"
}, {
  "id" : 700,
  "name" : "SuccessfulLogin",
  "description" : "Successful login",
  "nameWithDescription" : "SuccessfulLogin (Successful login)",
  "key" : "LOGIN_SUCCESS"
} ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-operation-types"><a class="anchor" href="#api-guide-resources-audit-operation-types"></a>43.5.4. List all the Audit Operation Types</h4>
<div class="paragraph">
<p>The audit record endpoint lets you get the operation types. The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-operation-types-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-operation-types-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-operation-types-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-operation-types-request-structure"><a class="anchor" href="#api-guide-resources-audit-operation-types-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /audit-records/audit-operation-types HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-operation-types-example-request"><a class="anchor" href="#api-guide-resources-audit-operation-types-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/audit-records/audit-operation-types' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-operation-types-response-structure"><a class="anchor" href="#api-guide-resources-audit-operation-types-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 315

[ {
  "id" : 100,
  "name" : "App Registration",
  "key" : "APP_REGISTRATION"
}, {
  "id" : 200,
  "name" : "Schedule",
  "key" : "SCHEDULE"
}, {
  "id" : 300,
  "name" : "Stream",
  "key" : "STREAM"
}, {
  "id" : 400,
  "name" : "Task",
  "key" : "TASK"
}, {
  "id" : 500,
  "name" : "Login",
  "key" : "LOGIN"
} ]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-definitions"><a class="anchor" href="#api-guide-resources-stream-definitions"></a>43.6. Stream Definitions</h3>
<div class="paragraph">
<p>The registered applications endpoint provides information about the stream definitions that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-create">Creating a New Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list">List All Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related">List Related Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get">Retrieve Stream Definition Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one">Delete a Single Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all">Delete All Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-deploy">Deploying Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy">Undeploy Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy-all">Undeploy All Stream Definitions</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-create"><a class="anchor" href="#api-guide-resources-stream-definitions-create"></a>43.6.1. Creating a New Stream Definition</h4>
<div class="paragraph">
<p>Creating a stream definition is achieved by creating a POST request to the stream definitions endpoint.
A curl request for a <code>ticktock</code> stream might resemble the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -X POST -d "name=ticktock&amp;definition=time | log" localhost:9393/streams/definitions?deploy=false</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A stream definition can also contain additional parameters.
For instance, in the example shown under &#8220;<a href="#api-guide-resources-stream-definitions-create-request-structure">Request Structure</a>&#8221;, we also provide the date-time format.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-create-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /streams/definitions HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=timelog&amp;definition=time+--format%3D%27YYYY+MM+DD%27+%7C+log&amp;description=Demo+stream+for+testing&amp;deploy=false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-create-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the created task definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The definition for the stream, using Data Flow DSL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The description of the stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deploy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, the stream is deployed upon creation (default is false)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-create-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions' -i -X POST \
    -d 'name=timelog&amp;definition=time+--format%3D%27YYYY+MM+DD%27+%7C+log&amp;description=Demo+stream+for+testing&amp;deploy=false'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-create-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/hal+json
Content-Length: 410

{
  "name" : "timelog",
  "dslText" : "time --format='YYYY MM DD' | log",
  "originalDslText" : "time --format='YYYY MM DD' | log",
  "status" : "undeployed",
  "description" : "Demo stream for testing",
  "statusDescription" : "The app or group is known to the system, but is not currently deployed",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions/timelog"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-list"><a class="anchor" href="#api-guide-resources-stream-definitions-list"></a>43.6.2. List All Stream Definitions</h4>
<div class="paragraph">
<p>The streams endpoint lets you list all the stream definitions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/definitions?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1160

{
  "_embedded" : {
    "streamDefinitionResourceList" : [ {
      "name" : "mysamplestream",
      "dslText" : "time | log",
      "originalDslText" : "time | log",
      "status" : "undeployed",
      "description" : "",
      "statusDescription" : "The app or group is known to the system, but is not currently deployed",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/streams/definitions/mysamplestream"
        }
      }
    }, {
      "name" : "timelog",
      "dslText" : "time --format='YYYY MM DD' | log",
      "originalDslText" : "time --format='YYYY MM DD' | log",
      "status" : "undeployed",
      "description" : "Demo stream for testing",
      "statusDescription" : "The app or group is known to the system, but is not currently deployed",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/streams/definitions/timelog"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions?page=0&amp;size=10&amp;sort=name,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-list-related"><a class="anchor" href="#api-guide-resources-stream-definitions-list-related"></a>43.6.3. List Related Stream Definitions</h4>
<div class="paragraph">
<p>The streams endpoint lets you list related stream definitions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-list-related-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/definitions/timelog/related?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10&amp;nested=true HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-list-related-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nested</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should we recursively findByTaskNameContains for related stream definitions (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-list-related-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions/timelog/related?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10&amp;nested=true' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-list-related-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 769

{
  "_embedded" : {
    "streamDefinitionResourceList" : [ {
      "name" : "timelog",
      "dslText" : "time --format='YYYY MM DD' | log",
      "originalDslText" : "time --format='YYYY MM DD' | log",
      "status" : "undeployed",
      "description" : "Demo stream for testing",
      "statusDescription" : "The app or group is known to the system, but is not currently deployed",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/streams/definitions/timelog"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions/timelog/related?page=0&amp;size=10&amp;sort=name,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definition-get"><a class="anchor" href="#api-guide-resources-stream-definition-get"></a>43.6.4. Retrieve Stream Definition Detail</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you get a single stream definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definition-get-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-request-structure"><a class="anchor" href="#api-guide-resources-stream-definition-get-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/definitions/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-path-parameters"><a class="anchor" href="#api-guide-resources-stream-definition-get-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/streams/definitions/{name}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the stream definition to query (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-example-request"><a class="anchor" href="#api-guide-resources-stream-definition-get-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions/timelog' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-response-structure"><a class="anchor" href="#api-guide-resources-stream-definition-get-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 410

{
  "name" : "timelog",
  "dslText" : "time --format='YYYY MM DD' | log",
  "originalDslText" : "time --format='YYYY MM DD' | log",
  "status" : "undeployed",
  "description" : "Demo stream for testing",
  "statusDescription" : "The app or group is known to the system, but is not currently deployed",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions/timelog"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-delete-one"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-one"></a>43.6.5. Delete a Single Stream Definition</h4>
<div class="paragraph">
<p>The streams endpoint lets you delete a single stream definition.
(See also: <a href="#api-guide-resources-stream-definitions-delete-all">Delete All Stream Definitions</a>.)
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-one-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /streams/definitions/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-one-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-one-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions/timelog' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-one-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-delete-all"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-all"></a>43.6.6. Delete All Stream Definitions</h4>
<div class="paragraph">
<p>The streams endpoint lets you delete all single stream definitions.
(See also: <a href="#api-guide-resources-stream-definitions-delete-one">Delete a Single Stream Definition</a>.)
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-all-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /streams/definitions HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-all-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-all-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-delete-all-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-validate"><a class="anchor" href="#api-guide-resources-stream-validate"></a>43.7. Stream Validation</h3>
<div class="paragraph">
<p>The stream validation endpoint lets you validate the apps in a stream definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-validation-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validation-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validation-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validation-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-request-structure"><a class="anchor" href="#api-guide-resources-stream-validation-request-structure"></a>43.7.1. Request Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/validation/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-path-parameters"><a class="anchor" href="#api-guide-resources-stream-validation-path-parameters"></a>43.7.2. Path Parameters</h4>
<div class="paragraph">
<p>/streams/validation/{name}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a stream definition to be validated (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-example-request"><a class="anchor" href="#api-guide-resources-stream-validation-example-request"></a>43.7.3. Example Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/validation/timelog' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-response-structure"><a class="anchor" href="#api-guide-resources-stream-validation-response-structure"></a>43.7.4. Response Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 197

{
  "appName" : "timelog",
  "dsl" : "time --format='YYYY MM DD' | log",
  "description" : "Demo stream for testing",
  "appStatuses" : {
    "source:time" : "valid",
    "sink:log" : "valid"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-deployment"><a class="anchor" href="#api-guide-resources-stream-deployment"></a>43.8. Stream Deployments</h3>
<div class="paragraph">
<p>The deployment definitions endpoint provides information about the deployments that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-deployment-deploy">Deploying Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy">Undeploy Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy-all">Undeploy All Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-update">Update Deployed Stream</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-rollback">Rollback Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-manifest">Get Manifest</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-history">Get Deployment History</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-platform-list">Get Deployment Platforms</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-scale">Scale Stream Definition</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-deploy"><a class="anchor" href="#api-guide-resources-stream-deployment-deploy"></a>43.8.1. Deploying Stream Definition</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you deploy a single stream definition.
Optionally, you can pass application parameters as properties in the request body.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-deploy-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /streams/deployments/timelog HTTP/1.1
Content-Type: application/json
Content-Length: 36
Host: localhost:9393

{"app.time.timestamp.format":"YYYY"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/{timelog}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timelog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-deploy-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-deploy-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/timelog' -i -X POST \
    -H 'Content-Type: application/json' \
    -d '{"app.time.timestamp.format":"YYYY"}'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-deploy-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-undeploy"><a class="anchor" href="#api-guide-resources-stream-deployment-undeploy"></a>43.8.2. Undeploy Stream Definition</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you undeploy a single stream definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /streams/deployments/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/{timelog}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timelog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/timelog' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-undeploy-all"><a class="anchor" href="#api-guide-resources-stream-deployment-undeploy-all"></a>43.8.3. Undeploy All Stream Definitions</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you undeploy all single stream definitions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /streams/deployments HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-all-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-undeploy-all-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-update"><a class="anchor" href="#api-guide-resources-stream-deployment-update"></a>43.8.4. Update Deployed Stream</h4>
<div class="paragraph">
<p>Thanks to Skipper, you can update deployed streams, and provide additional deployment properties.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-update-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /streams/deployments/update/timelog1 HTTP/1.1
Content-Type: application/json
Content-Length: 196
Host: localhost:9393

{"releaseName":"timelog1","packageIdentifier":{"repositoryName":"test","packageName":"timelog1","packageVersion":"1.0.0"},"updateProperties":{"app.time.timestamp.format":"YYYYMMDD"},"force":false}</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/update/{timelog1}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timelog1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-update-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-update-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/update/timelog1' -i -X POST \
    -H 'Content-Type: application/json' \
    -d '{"releaseName":"timelog1","packageIdentifier":{"repositoryName":"test","packageName":"timelog1","packageVersion":"1.0.0"},"updateProperties":{"app.time.timestamp.format":"YYYYMMDD"},"force":false}'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-update-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-rollback"><a class="anchor" href="#api-guide-resources-stream-deployment-rollback"></a>43.8.5. Rollback Stream Definition</h4>
<div class="paragraph">
<p>Rollback the stream to the previous or a specific version of the stream.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-rollback-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /streams/deployments/rollback/timelog1/1 HTTP/1.1
Content-Type: application/json
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/rollback/{name}/{version}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version to rollback to</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-rollback-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-rollback-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/rollback/timelog1/1' -i -X POST \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-rollback-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-manifest"><a class="anchor" href="#api-guide-resources-stream-deployment-manifest"></a>43.8.6. Get Manifest</h4>
<div class="paragraph">
<p>Return a manifest of a released version. For packages with dependencies, the manifest includes the contents of those dependencies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-manifest-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/deployments/manifest/timelog1/1 HTTP/1.1
Content-Type: application/json
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/manifest/{name}/{version}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the stream</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-manifest-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-manifest-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/manifest/timelog1/1' -i -X GET \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-manifest-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-history"><a class="anchor" href="#api-guide-resources-stream-deployment-history"></a>43.8.7. Get Deployment History</h4>
<div class="paragraph">
<p>Get the stream&#8217;s deployment history.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-history-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-history-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/deployments/history/timelog1 HTTP/1.1
Content-Type: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-history-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-history-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/history/timelog1' -i -X GET \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-history-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-history-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 162

[ {
  "name" : null,
  "version" : 0,
  "info" : null,
  "pkg" : null,
  "configValues" : {
    "raw" : null
  },
  "manifest" : null,
  "platformName" : null
} ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-platform-list"><a class="anchor" href="#api-guide-resources-stream-deployment-platform-list"></a>43.8.8. Get Deployment Platforms</h4>
<div class="paragraph">
<p>Retrieve a list of supported deployment platforms.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-platform-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-platform-list-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-platform-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/deployments/platform/list HTTP/1.1
Content-Type: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-platform-list-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-platform-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/platform/list' -i -X GET \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-platform-list-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-platform-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 106

[ {
  "id" : null,
  "name" : "default",
  "type" : "local",
  "description" : null,
  "options" : [ ]
} ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-scale"><a class="anchor" href="#api-guide-resources-stream-deployment-scale"></a>43.8.9. Scale Stream Definition</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you scale a single app in a stream definition.
Optionally, you can pass application parameters as properties in the request body.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-scale-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-scale-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-scale-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-scale-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-scale-request-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-scale-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /streams/deployments/scale/timelog/log/instances/1 HTTP/1.1
Content-Type: application/json
Content-Length: 36
Host: localhost:9393

{"app.time.timestamp.format":"YYYY"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/scale/{streamName}/{appName}/instances/{count}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streamName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the name of an existing stream definition (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>appName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in stream application name to scale</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of instances for the selected stream application (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-scale-request-parameters"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-scale-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-scale-example-request"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-scale-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/scale/timelog/log/instances/1' -i -X POST \
    -H 'Content-Type: application/json' \
    -d '{"app.time.timestamp.format":"YYYY"}'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-scale-response-structure"><a class="anchor" href="#api-guide-resources-stream-definitions-deployment-scale-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-definitions"><a class="anchor" href="#api-guide-resources-task-definitions"></a>43.9. Task Definitions</h3>
<div class="paragraph">
<p>The task definitions endpoint provides information about the task definitions that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-definitions-creating">Creating a New Task Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-definitions-list">List All Task Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-definition-detail">Retrieve Task Definition Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition">Delete Task Definition</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-definitions-creating"><a class="anchor" href="#api-guide-resources-task-definitions-creating"></a>43.9.1. Creating a New Task Definition</h4>
<div class="paragraph">
<p>The task definition endpoint lets you create a new task definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-request-structure"><a class="anchor" href="#api-guide-resources-stream-task-definitions-creating-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /tasks/definitions HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=my-task&amp;definition=timestamp+--format%3D%27YYYY+MM+DD%27&amp;description=Demo+task+definition+for+testing</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-request-parameters"><a class="anchor" href="#api-guide-resources-stream-task-definitions-creating-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the created task definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The definition for the task, using Data Flow DSL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The description of the task definition</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-example-request"><a class="anchor" href="#api-guide-resources-stream-task-definitions-creating-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions' -i -X POST \
    -d 'name=my-task&amp;definition=timestamp+--format%3D%27YYYY+MM+DD%27&amp;description=Demo+task+definition+for+testing'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-response-structure"><a class="anchor" href="#api-guide-resources-stream-task-definitions-creating-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 342

{
  "name" : "my-task",
  "dslText" : "timestamp --format='YYYY MM DD'",
  "description" : "Demo task definition for testing",
  "composed" : false,
  "composedTaskElement" : false,
  "lastTaskExecution" : null,
  "status" : "UNKNOWN",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/definitions/my-task"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-definitions-list"><a class="anchor" href="#api-guide-resources-task-definitions-list"></a>43.9.2. List All Task Definitions</h4>
<div class="paragraph">
<p>The task definition endpoint lets you get all task definitions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-request-structure"><a class="anchor" href="#api-guide-resources-stream-task-definitions-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/definitions?page=0&amp;size=10&amp;sort=taskName%2CASC&amp;search=&amp;manifest=true HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-request-parameters"><a class="anchor" href="#api-guide-resources-stream-task-definitions-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The flag to include the task manifest into the latest task execution (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-example-request"><a class="anchor" href="#api-guide-resources-stream-task-definitions-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions?page=0&amp;size=10&amp;sort=taskName%2CASC&amp;search=&amp;manifest=true' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-response-structure"><a class="anchor" href="#api-guide-resources-stream-task-definitions-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 689

{
  "_embedded" : {
    "taskDefinitionResourceList" : [ {
      "name" : "my-task",
      "dslText" : "timestamp --format='YYYY MM DD'",
      "description" : "Demo task definition for testing",
      "composed" : false,
      "composedTaskElement" : false,
      "lastTaskExecution" : null,
      "status" : "UNKNOWN",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/definitions/my-task"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/definitions?page=0&amp;size=10&amp;sort=taskName,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-definition-detail"><a class="anchor" href="#api-guide-resources-task-definition-detail"></a>43.9.3. Retrieve Task Definition Detail</h4>
<div class="paragraph">
<p>The task definition endpoint lets you get a single task definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-request-structure"><a class="anchor" href="#api-guide-resources-stream-task-definitions-detail-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/definitions/my-task?manifest=true HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/definitions/{my-task}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my-task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing task definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-request-parameters"><a class="anchor" href="#api-guide-resources-stream-task-definitions-detail-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-example-request"><a class="anchor" href="#api-guide-resources-stream-task-definitions-detail-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions/my-task?manifest=true' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-response-structure"><a class="anchor" href="#api-guide-resources-stream-task-definitions-detail-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 342

{
  "name" : "my-task",
  "dslText" : "timestamp --format='YYYY MM DD'",
  "description" : "Demo task definition for testing",
  "composed" : false,
  "composedTaskElement" : false,
  "lastTaskExecution" : null,
  "status" : "UNKNOWN",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/definitions/my-task"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-delete-task-definition"><a class="anchor" href="#api-guide-resources-delete-task-definition"></a>43.9.4. Delete Task Definition</h4>
<div class="paragraph">
<p>The task definition endpoint lets you delete a single task definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-delete-task-definition-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-request-structure"><a class="anchor" href="#api-guide-resources-delete-task-definition-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /tasks/definitions/my-task?cleanup=true HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/definitions/{my-task}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my-task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing task definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-request-parameters"><a class="anchor" href="#api-guide-resources-delete-task-definition-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-example-request"><a class="anchor" href="#api-guide-resources-delete-task-definition-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions/my-task?cleanup=true' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-response-structure"><a class="anchor" href="#api-guide-resources-delete-task-definition-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-scheduler"><a class="anchor" href="#api-guide-resources-task-scheduler"></a>43.10. Task Scheduler</h3>
<div class="paragraph">
<p>The task scheduler endpoint provides information about the task schedules that are registered with the Scheduler Implementation.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-schedule-creating">Creating a New Task Schedule</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-schedule-list">List All Schedules</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-schedule-filtered-list">List Filtered Schedules</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-delete-schedule">Delete Task Schedule</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-schedule-creating"><a class="anchor" href="#api-guide-resources-task-schedule-creating"></a>43.10.1. Creating a New Task Schedule</h4>
<div class="paragraph">
<p>The task schedule endpoint lets you create a new task schedule.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-request-structure"><a class="anchor" href="#api-guide-resources-stream-task-schedule-creating-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /tasks/schedules HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

scheduleName=myschedule&amp;taskDefinitionName=mytaskname&amp;platform=default&amp;properties=scheduler.cron.expression%3D00+22+17+%3F+*&amp;arguments=--foo%3Dbar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-request-parameters"><a class="anchor" href="#api-guide-resources-stream-task-schedule-creating-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheduleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the created schedule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platform</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the platform the task is launched</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taskDefinitionName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the task definition to be scheduled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the properties that are required to schedule and launch the task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the command line arguments to be used for launching the task</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-example-request"><a class="anchor" href="#api-guide-resources-stream-task-schedule-creating-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules' -i -X POST \
    -d 'scheduleName=myschedule&amp;taskDefinitionName=mytaskname&amp;platform=default&amp;properties=scheduler.cron.expression%3D00+22+17+%3F+*&amp;arguments=--foo%3Dbar'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-response-structure"><a class="anchor" href="#api-guide-resources-stream-task-schedule-creating-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-schedule-list"><a class="anchor" href="#api-guide-resources-task-schedule-list"></a>43.10.2. List All Schedules</h4>
<div class="paragraph">
<p>The task schedules endpoint lets you get all task schedules.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-request-structure"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/schedules?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-request-parameters"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-example-request"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-response-structure"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 587

{
  "_embedded" : {
    "scheduleInfoResourceList" : [ {
      "scheduleName" : "FOO",
      "taskDefinitionName" : "BAR",
      "scheduleProperties" : {
        "scheduler.AAA.spring.cloud.scheduler.cron.expression" : "00 41 17 ? * *"
      },
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/schedules/FOO"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/schedules?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-schedule-filtered-list"><a class="anchor" href="#api-guide-resources-task-schedule-filtered-list"></a>43.10.3. List Filtered Schedules</h4>
<div class="paragraph">
<p>The task schedules endpoint lets you get all task schedules that have the specified task definition name.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-request-structure"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-filtered-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/schedules/instances/FOO?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/schedules/instances/{task-definition-name}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task-definition-name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter schedules based on the specified task definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-request-parameters"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-filtered-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-example-request"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-filtered-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules/instances/FOO?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-response-structure"><a class="anchor" href="#api-guide-resources-stream-task-schedule-list-filtered-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 599

{
  "_embedded" : {
    "scheduleInfoResourceList" : [ {
      "scheduleName" : "FOO",
      "taskDefinitionName" : "BAR",
      "scheduleProperties" : {
        "scheduler.AAA.spring.cloud.scheduler.cron.expression" : "00 41 17 ? * *"
      },
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/schedules/FOO"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/schedules/instances/FOO?page=0&amp;size=1"
    }
  },
  "page" : {
    "size" : 1,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-delete-schedule"><a class="anchor" href="#api-guide-resources-task-delete-schedule"></a>43.10.4. Delete Task Schedule</h4>
<div class="paragraph">
<p>The task schedule endpoint lets you delete a single task schedule.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-request-structure"><a class="anchor" href="#api-guide-resources-delete-task-schedule-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /tasks/schedules/mytestschedule HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/schedules/{scheduleName}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheduleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing schedule (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-request-parameters"><a class="anchor" href="#api-guide-resources-delete-task-schedule-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-example-request"><a class="anchor" href="#api-guide-resources-delete-task-schedule-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules/mytestschedule' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-response-structure"><a class="anchor" href="#api-guide-resources-delete-task-schedule-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-validate"><a class="anchor" href="#api-guide-resources-task-validate"></a>43.11. Task Validation</h3>
<div class="paragraph">
<p>The task validation endpoint lets you validate the apps in a task definition.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-validation-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validation-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validation-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validation-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-request-structure"><a class="anchor" href="#api-guide-resources-task-validation-request-structure"></a>43.11.1. Request Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/validation/taskC HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-path-parameters"><a class="anchor" href="#api-guide-resources-task-validation-path-parameters"></a>43.11.2. Path Parameters</h4>
<div class="paragraph">
<p>/tasks/validation/{name}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a task definition to be validated (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-example-request"><a class="anchor" href="#api-guide-resources-task-validation-example-request"></a>43.11.3. Example Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/validation/taskC' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-response-structure"><a class="anchor" href="#api-guide-resources-task-validation-response-structure"></a>43.11.4. Response Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 144

{
  "appName" : "taskC",
  "dsl" : "timestamp --format='yyyy MM dd'",
  "description" : "",
  "appStatuses" : {
    "task:taskC" : "valid"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-executions"><a class="anchor" href="#api-guide-resources-task-executions"></a>43.12. Task Executions</h3>
<div class="paragraph">
<p>The task executions endpoint provides information about the task executions that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-launching">Launching a Task (Legacy)</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-stopping">Stopping a Task</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list">List All Task Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name">List All Task Executions With a Specified Task Name</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail">Task Execution Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete">Delete Task Execution</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count">Task Execution Current Count</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-launching"><a class="anchor" href="#api-guide-resources-task-executions-launching"></a>43.12.1. Launching a Task (Legacy)</h4>
<div class="paragraph">
<p>Launching a task is done by requesting the creation of a new task execution. This endpoint will fail if the task is registered as a Spring Boot 3 application.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-launching-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-launching-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /tasks/executions HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=taskA&amp;properties=app.my-task.foo%3Dbar%2Cdeployer.my-task.something-else%3D3&amp;arguments=--server.port%3D8080+--foo%3Dbar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-launching-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the task definition to launch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application and Deployer properties to use while launching. (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command line arguments to pass to the task. (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-example-request"><a class="anchor" href="#api-guide-resources-task-executions-launching-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions' -i -X POST \
    -d 'name=taskA&amp;properties=app.my-task.foo%3Dbar%2Cdeployer.my-task.something-else%3D3&amp;arguments=--server.port%3D8080+--foo%3Dbar'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-launching-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/json
Content-Length: 1

9</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-launching-boot3"><a class="anchor" href="#api-guide-resources-task-executions-launching-boot3"></a>43.12.2. Launching a Task</h4>
<div class="paragraph">
<p>Launching a task is done by requesting the creation of a new task execution. The response will contain an execution id and a schema target.</p>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-launching-boot3-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-boot3-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-boot3-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-boot3-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-boot3-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-launching-boot3-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /tasks/executions/launch HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=taskA&amp;properties=app.my-task.foo%3Dbar%2Cdeployer.my-task.something-else%3D3&amp;arguments=--server.port%3D8080+--foo%3Dbar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-boot3-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-launching-boot3-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the task definition to launch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application and Deployer properties to use while launching. (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command line arguments to pass to the task. (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-boot3-example-request"><a class="anchor" href="#api-guide-resources-task-executions-launching-boot3-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/launch' -i -X POST \
    -d 'name=taskA&amp;properties=app.my-task.foo%3Dbar%2Cdeployer.my-task.something-else%3D3&amp;arguments=--server.port%3D8080+--foo%3Dbar'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-boot3-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-launching-boot3-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/hal+json
Content-Length: 171

{
  "executionId" : 12,
  "schemaTarget" : "boot2",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/executions/12?schemaTarget=boot2"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-stopping"><a class="anchor" href="#api-guide-resources-task-executions-stopping"></a>43.12.3. Stopping a Task</h4>
<div class="paragraph">
<p>Stopping a task is done by posting the id of an existing task execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-stopping-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-stopping-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-stopping-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-stopping-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-stopping-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-stopping-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-stopping-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">POST /tasks/executions/1?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-stopping-path-parameters"><a class="anchor" href="#api-guide-resources-task-executions-stopping-path-parameters"></a>Path Parameters</h5>
<div class="paragraph">
<p>/tasks/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ids of an existing task execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-stopping-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-stopping-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaTarget</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The schemaTarget provided in Task execution detail. (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-stopping-example-request"><a class="anchor" href="#api-guide-resources-task-executions-stopping-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/1?schemaTarget=boot2' -i -X POST</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-stopping-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-stopping-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-list"><a class="anchor" href="#api-guide-resources-task-executions-list"></a>43.12.4. List All Task Executions</h4>
<div class="paragraph">
<p>The task executions endpoint lets you list all task executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/executions?page=1&amp;size=2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-example-request"><a class="anchor" href="#api-guide-resources-task-executions-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions?page=1&amp;size=2' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 4711

{
  "_embedded" : {
    "taskExecutionResourceList" : [ {
      "executionId" : 13,
      "exitCode" : null,
      "taskName" : "taskA",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskA-0dcb915a-41cc-406b-a253-1e162bf2d7b7",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskA",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.my-task.foo" : "bar",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "deployer.my-task.something-else" : "3",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskA-0dcb915a-41cc-406b-a253-1e162bf2d7b7?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/13?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 12,
      "exitCode" : null,
      "taskName" : "taskA",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskA-f8669e33-1480-4f24-b6b6-21871628e0aa",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskA",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.my-task.foo" : "bar",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "deployer.my-task.something-else" : "3",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskA-f8669e33-1480-4f24-b6b6-21871628e0aa?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/12?schemaTarget=boot2"
        }
      }
    } ]
  },
  "_links" : {
    "first" : {
      "href" : "http://localhost:9393/tasks/executions?page=0&amp;size=2"
    },
    "prev" : {
      "href" : "http://localhost:9393/tasks/executions?page=0&amp;size=2"
    },
    "self" : {
      "href" : "http://localhost:9393/tasks/executions?page=1&amp;size=2"
    },
    "next" : {
      "href" : "http://localhost:9393/tasks/executions?page=2&amp;size=2"
    },
    "last" : {
      "href" : "http://localhost:9393/tasks/executions?page=7&amp;size=2"
    }
  },
  "page" : {
    "size" : 2,
    "totalElements" : 15,
    "totalPages" : 8,
    "number" : 1
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-list-by-name"><a class="anchor" href="#api-guide-resources-task-executions-list-by-name"></a>43.12.5. List All Task Executions With a Specified Task Name</h4>
<div class="paragraph">
<p>The task executions endpoint lets you list task executions with a specified task name.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-list-by-name-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/executions?name=taskB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-list-by-name-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the task execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-example-request"><a class="anchor" href="#api-guide-resources-task-executions-list-by-name-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions?name=taskB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-list-by-name-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 16041

{
  "_embedded" : {
    "taskExecutionResourceList" : [ {
      "executionId" : 17,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-87c6755f-282f-4173-b0be-0f4fc0ada7df",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.my-task.foo" : "bar",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "deployer.my-task.something-else" : "3",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-87c6755f-282f-4173-b0be-0f4fc0ada7df?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/17?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 15,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-40030d82-d99f-4b82-abeb-670b4ca7a13f",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.my-task.foo" : "bar",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "deployer.my-task.something-else" : "3",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-40030d82-d99f-4b82-abeb-670b4ca7a13f?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/15?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 14,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-be31f19f-17f2-4b3d-b1c8-0a631fe9c744",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-be31f19f-17f2-4b3d-b1c8-0a631fe9c744?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/14?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 11,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-39801c84-563a-4d82-a160-606223a1be25",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-39801c84-563a-4d82-a160-606223a1be25?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/11?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 8,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-1d273847-3661-4e0d-bef6-021d64244240",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-1d273847-3661-4e0d-bef6-021d64244240?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/8?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 6,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-65480084-4a3b-467c-9f68-9017dd69dace",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-65480084-4a3b-467c-9f68-9017dd69dace?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/6?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 4,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-33efd275-91bd-4c2c-9bb3-ae32c3de11f8",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-33efd275-91bd-4c2c-9bb3-ae32c3de11f8?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/4?schemaTarget=boot2"
        }
      }
    }, {
      "executionId" : 2,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-c6ac8bda-4b81-40c9-94ac-388cbf0154fe",
      "parentExecutionId" : null,
      "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
      "appProperties" : {
        "spring.datasource.driverClassName" : null,
        "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
        "format" : "yyyy MM dd",
        "spring.cloud.task.name" : "taskB",
        "spring.cloud.deployer.bootVersion" : "2",
        "management.metrics.tags.service" : "task-application",
        "spring.datasource.username" : null,
        "spring.datasource.url" : null,
        "spring.cloud.task.initialize-enabled" : "false",
        "spring.cloud.task.schemaTarget" : "boot2",
        "spring.batch.jdbc.table-prefix" : "BATCH_",
        "spring.cloud.task.tablePrefix" : "TASK_"
      },
      "deploymentProperties" : {
        "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
        "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
        "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
        "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
        "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
      },
      "platformName" : "default",
      "taskExecutionStatus" : "UNKNOWN",
      "schemaTarget" : "boot2",
      "_links" : {
        "tasks/logs" : {
          "href" : "http://localhost:9393/tasks/logs/taskB-c6ac8bda-4b81-40c9-94ac-388cbf0154fe?platformName=default&amp;schemaTarget=boot2"
        },
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/2?schemaTarget=boot2"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 8,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-detail"><a class="anchor" href="#api-guide-resources-task-executions-detail"></a>43.12.6. Task Execution Detail</h4>
<div class="paragraph">
<p>The task executions endpoint lets you get the details about a task execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-detail-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/executions/1?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing task execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-detail-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-example-request"><a class="anchor" href="#api-guide-resources-task-executions-detail-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/1?schemaTarget=boot2' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-detail-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1767

{
  "executionId" : 1,
  "exitCode" : null,
  "taskName" : "taskA",
  "startTime" : null,
  "endTime" : null,
  "exitMessage" : null,
  "arguments" : [ ],
  "jobExecutionIds" : [ ],
  "errorMessage" : null,
  "externalExecutionId" : "taskA-8fb364b6-b112-49f3-976d-13bd716ef46b",
  "parentExecutionId" : null,
  "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
  "appProperties" : {
    "spring.datasource.driverClassName" : null,
    "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
    "format" : "yyyy MM dd",
    "spring.cloud.task.name" : "taskA",
    "spring.cloud.deployer.bootVersion" : "2",
    "management.metrics.tags.service" : "task-application",
    "spring.datasource.username" : null,
    "spring.datasource.url" : null,
    "spring.cloud.task.initialize-enabled" : "false",
    "spring.cloud.task.schemaTarget" : "boot2",
    "spring.batch.jdbc.table-prefix" : "BATCH_",
    "spring.cloud.task.tablePrefix" : "TASK_"
  },
  "deploymentProperties" : {
    "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
    "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
    "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
    "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
    "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
  },
  "platformName" : "default",
  "taskExecutionStatus" : "UNKNOWN",
  "schemaTarget" : "boot2",
  "_links" : {
    "tasks/logs" : {
      "href" : "http://localhost:9393/tasks/logs/taskA-8fb364b6-b112-49f3-976d-13bd716ef46b?platformName=default&amp;schemaTarget=boot2"
    },
    "self" : {
      "href" : "http://localhost:9393/tasks/executions/1?schemaTarget=boot2"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-detail-by-external-id"><a class="anchor" href="#api-guide-resources-task-executions-detail-by-external-id"></a>43.12.7. Task Execution Detail by External Id</h4>
<div class="paragraph">
<p>The task executions endpoint lets you get the details about a task execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-detail-by-external-id-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-by-external-id-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-by-external-id-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-by-external-id-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-by-external-id-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-detail-by-external-id-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/executions/external/taskB-65480084-4a3b-467c-9f68-9017dd69dace?platform=default HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/executions/external/{externalExecutionId}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>externalExecutionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The external ExecutionId of an existing task execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-by-external-id-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-detail-by-external-id-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-by-external-id-example-request"><a class="anchor" href="#api-guide-resources-task-executions-detail-by-external-id-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/external/taskB-65480084-4a3b-467c-9f68-9017dd69dace?platform=default' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-by-external-id-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-detail-by-external-id-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1767

{
  "executionId" : 6,
  "exitCode" : null,
  "taskName" : "taskB",
  "startTime" : null,
  "endTime" : null,
  "exitMessage" : null,
  "arguments" : [ ],
  "jobExecutionIds" : [ ],
  "errorMessage" : null,
  "externalExecutionId" : "taskB-65480084-4a3b-467c-9f68-9017dd69dace",
  "parentExecutionId" : null,
  "resourceUrl" : "org.springframework.cloud.task.app:timestamp-task:jar:1.2.0.RELEASE",
  "appProperties" : {
    "spring.datasource.driverClassName" : null,
    "management.metrics.tags.application" : "${spring.cloud.task.name:unknown}-${spring.cloud.task.executionid:unknown}",
    "format" : "yyyy MM dd",
    "spring.cloud.task.name" : "taskB",
    "spring.cloud.deployer.bootVersion" : "2",
    "management.metrics.tags.service" : "task-application",
    "spring.datasource.username" : null,
    "spring.datasource.url" : null,
    "spring.cloud.task.initialize-enabled" : "false",
    "spring.cloud.task.schemaTarget" : "boot2",
    "spring.batch.jdbc.table-prefix" : "BATCH_",
    "spring.cloud.task.tablePrefix" : "TASK_"
  },
  "deploymentProperties" : {
    "app.timestamp.spring.cloud.task.tablePrefix" : "TASK_",
    "app.timestamp.spring.cloud.deployer.bootVersion" : "2",
    "app.timestamp.spring.cloud.task.initialize-enabled" : "false",
    "app.timestamp.spring.batch.jdbc.table-prefix" : "BATCH_",
    "app.timestamp.spring.cloud.task.schemaTarget" : "boot2"
  },
  "platformName" : "default",
  "taskExecutionStatus" : "UNKNOWN",
  "schemaTarget" : "boot2",
  "_links" : {
    "tasks/logs" : {
      "href" : "http://localhost:9393/tasks/logs/taskB-65480084-4a3b-467c-9f68-9017dd69dace?platformName=default&amp;schemaTarget=boot2"
    },
    "self" : {
      "href" : "http://localhost:9393/tasks/executions/6?schemaTarget=boot2"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-delete"><a class="anchor" href="#api-guide-resources-task-executions-delete"></a>43.12.8. Delete Task Execution</h4>
<div class="paragraph">
<p>The task execution endpoint lets you:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clean up resources used to deploy the task</p>
</li>
<li>
<p>Remove relevant task data as well as possibly associated Spring Batch job data from the persistence store</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The cleanup implementation (first option) is platform specific. Both operations can be triggered
at once or separately.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-delete-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the following section in regards to <a href="#api-guide-resources-task-executions-delete-multiple-and-task-data">Deleting Task Execution Data</a>.</p>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-delete-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">DELETE /tasks/executions/1,2?schemaTarget=boot2&amp;action=CLEANUP,REMOVE_DATA HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/executions/{ids}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ids</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Providing 2 comma separated task execution id values.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must provide task execution IDs that actually exist. Otherwise, a <code>404</code> (Not Found) HTTP status is returned.
In the case of submitting multiple task execution IDs, the invalidity of a single task execution ID causes the entire request to fail,
without performing any operation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-delete-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>This endpoint supports one optional request parameter named <strong>action</strong>. It is an enumeration and supports the following
values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CLEANUP</p>
</li>
<li>
<p>REMOVE_DATA</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Using both actions CLEANUP and REMOVE_DATA simultaneously.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaTarget</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schema target for task. (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-example-request"><a class="anchor" href="#api-guide-resources-task-executions-delete-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/1,2?schemaTarget=boot2&amp;action=CLEANUP,REMOVE_DATA' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-delete-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-delete-multiple-and-task-data"><a class="anchor" href="#api-guide-resources-task-executions-delete-multiple-and-task-data"></a>43.12.9. Deleting Task Execution Data</h4>
<div class="paragraph">
<p>Not only can you clean up resources that were used to deploy tasks but you can also delete the data associated with
task executions from the underlying persistence store. Also, if a task execution is associated with one or
more batch job executions, these are removed as well.</p>
</div>
<div class="paragraph">
<p>The following example illustrates how a request can be made using multiple task execution IDs and multiple actions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/1,2?schemaTarget=boot2&amp;action=CLEANUP,REMOVE_DATA' -i -X DELETE</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/executions/{ids}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ids</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Providing 2 comma separated task execution id values.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Using both actions CLEANUP and REMOVE_DATA simultaneously.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaTarget</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schema target for task. (optional)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When deleting data from the persistence store by using the <code>REMOVE_DATA</code> action parameter, you must provide
task execution IDs that represent parent task executions. When you provide child task executions (executed as part of a composed task),
a <code>400</code> (Bad Request) HTTP status is returned.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deleting large number of task executions some database types limit the number of entries in the <code>IN</code> clause (the method Spring Cloud Data Flow uses to delete relationships for task executions).
Spring Cloud Data Flow supports the chunking of deletes for Sql Server (Maximum 2100 entries) and Oracle DBs (Maximum 1000 entries).
However, Spring Cloud Data Flow allows users to set their own chunking factor.  To do this set the <code>spring.cloud.dataflow.task.executionDeleteChunkSize</code> property to the appropriate chunk size.
Default is <code>0</code> which means Spring Cloud Data Flow will not chunk the task execution deletes (except for Oracle and Sql Server databases).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-current-count"><a class="anchor" href="#api-guide-resources-task-executions-current-count"></a>43.12.10. Task Execution Current Count</h4>
<div class="paragraph">
<p>The task executions current endpoint lets you retrieve the current number of running executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-request-structure"><a class="anchor" href="#api-guide-resources-task-executions-current-count-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/executions/current HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-request-parameters"><a class="anchor" href="#api-guide-resources-task-executions-current-count-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-example-request"><a class="anchor" href="#api-guide-resources-task-executions-current-count-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/current' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-response-structure"><a class="anchor" href="#api-guide-resources-task-executions-current-count-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 111

[ {
  "name" : "default",
  "type" : "Local",
  "maximumTaskExecutions" : 50,
  "runningExecutionCount" : 2
} ]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-job-executions"><a class="anchor" href="#api-guide-resources-job-executions"></a>43.13. Job Executions</h3>
<div class="paragraph">
<p>The job executions endpoint provides information about the job executions that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-list">List All Job Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list">List All Job Executions Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-job-execution-info-only-list-by-name">List All Job Executions With a Specified Job Name</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-name">List All Job Executions With a Specified Job Name Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-date">List All Job Executions For A Specified Date Range Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-job-instance-id">List All Job Executions For A Specified Job Instance Id Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-task-execution-id">List All Job Executions For A Specified Task Execution Id Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail">Job Execution Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop">Stop Job Execution</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart">Restart Job Execution</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-list"><a class="anchor" href="#api-guide-resources-job-executions-list"></a>43.13.1. List All Job Executions</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/executions?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-example-request"><a class="anchor" href="#api-guide-resources-job-executions-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 3659

{
  "_embedded" : {
    "jobExecutionResourceList" : [ {
      "executionId" : 2,
      "stepExecutionCount" : 0,
      "jobId" : 2,
      "taskExecutionId" : 2,
      "name" : "DOCJOB1",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "duration" : "00:00:01",
      "jobExecution" : {
        "id" : 2,
        "version" : 1,
        "jobParameters" : {
          "parameters" : { }
        },
        "jobInstance" : {
          "id" : 2,
          "jobName" : "DOCJOB1",
          "version" : null
        },
        "stepExecutions" : [ ],
        "status" : "STOPPED",
        "startTime" : "2023-09-21T00:47:00.499+0000",
        "createTime" : "2023-09-21T00:47:00.497+0000",
        "endTime" : null,
        "lastUpdated" : "2023-09-21T00:47:00.499+0000",
        "exitStatus" : {
          "exitCode" : "UNKNOWN",
          "exitDescription" : ""
        },
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "failureExceptions" : [ ],
        "jobConfigurationName" : null,
        "allFailureExceptions" : [ ]
      },
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : true,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2&amp;stop=true"
        },
        "restart" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2&amp;restart=true"
        }
      }
    }, {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "duration" : "00:00:01",
      "jobExecution" : {
        "id" : 1,
        "version" : 2,
        "jobParameters" : {
          "parameters" : { }
        },
        "jobInstance" : {
          "id" : 1,
          "jobName" : "DOCJOB",
          "version" : null
        },
        "stepExecutions" : [ ],
        "status" : "STOPPING",
        "startTime" : "2023-09-21T00:47:00.362+0000",
        "createTime" : "2023-09-21T00:47:00.361+0000",
        "endTime" : null,
        "lastUpdated" : "2023-09-21T00:47:00.759+0000",
        "exitStatus" : {
          "exitCode" : "UNKNOWN",
          "exitDescription" : ""
        },
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "failureExceptions" : [ ],
        "jobConfigurationName" : null,
        "allFailureExceptions" : [ ]
      },
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        },
        "restart" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;restart=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-list"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-list"></a>43.13.2. List All Job Executions Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions without step executions included.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/thinexecutions?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-example-request"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1937

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 2,
      "stepExecutionCount" : 0,
      "jobId" : 2,
      "taskExecutionId" : 2,
      "instanceId" : 2,
      "name" : "DOCJOB1",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.499+0000",
      "duration" : "00:00:00",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : true,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPED",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2&amp;stop=true"
        }
      }
    }, {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.362+0000",
      "duration" : "00:00:00",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : false,
      "stoppable" : true,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STARTED",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-job-execution-info-only-list-by-name"><a class="anchor" href="#api-guide-resources-job-executions-job-execution-info-only-list-by-name"></a>43.13.3. List All Job Executions With a Specified Job Name</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-list-by-name-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/executions?name=DOCJOB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-list-by-name-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the job execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-example-request"><a class="anchor" href="#api-guide-resources-job-executions-list-by-name-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions?name=DOCJOB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-list-by-name-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1965

{
  "_embedded" : {
    "jobExecutionResourceList" : [ {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "duration" : "00:00:01",
      "jobExecution" : {
        "id" : 1,
        "version" : 2,
        "jobParameters" : {
          "parameters" : { }
        },
        "jobInstance" : {
          "id" : 1,
          "jobName" : "DOCJOB",
          "version" : null
        },
        "stepExecutions" : [ ],
        "status" : "STOPPING",
        "startTime" : "2023-09-21T00:47:00.362+0000",
        "createTime" : "2023-09-21T00:47:00.361+0000",
        "endTime" : null,
        "lastUpdated" : "2023-09-21T00:47:00.759+0000",
        "exitStatus" : {
          "exitCode" : "UNKNOWN",
          "exitDescription" : ""
        },
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "failureExceptions" : [ ],
        "jobConfigurationName" : null,
        "allFailureExceptions" : [ ]
      },
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        },
        "restart" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;restart=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-info-only-list-by-name"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-name"></a>43.13.4. List All Job Executions With a Specified Job Name Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-name-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/thinexecutions?name=DOCJOB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-name-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the job execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-example-request"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-name-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?name=DOCJOB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-name-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1109

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.362+0000",
      "duration" : "00:00:01",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPING",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-info-only-list-by-date"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-date"></a>43.13.5. List All Job Executions For A Specified Date Range Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-date-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-date-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-date-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-date-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-date-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-date-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/thinexecutions?page=0&amp;size=10&amp;fromDate=2000-09-24T17%3A00%3A45%2C000&amp;toDate=2050-09-24T18%3A00%3A45%2C000 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-date-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-date-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fromDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter result from a starting date in the format 'yyyy-MM-dd&#8217;T&#8217;HH:mm:ss,SSS'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter result up to the <code>to</code> date in the format 'yyyy-MM-dd&#8217;T&#8217;HH:mm:ss,SSS'</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-date-example-request"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-date-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10&amp;fromDate=2000-09-24T17%3A00%3A45%2C000&amp;toDate=2050-09-24T18%3A00%3A45%2C000' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-date-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-date-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1938

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 2,
      "stepExecutionCount" : 0,
      "jobId" : 2,
      "taskExecutionId" : 2,
      "instanceId" : 2,
      "name" : "DOCJOB1",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.499+0000",
      "duration" : "00:00:01",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : true,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPED",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2&amp;stop=true"
        }
      }
    }, {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.362+0000",
      "duration" : "00:00:01",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPING",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-info-only-list-by-job-instance-id"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-job-instance-id"></a>43.13.6. List All Job Executions For A Specified Job Instance Id Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-job-instance-id-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/thinexecutions?page=0&amp;size=10&amp;jobInstanceId=1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-job-instance-id-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobInstanceId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter result by the job instance id</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-job-instance-id-example-request"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10&amp;jobInstanceId=1' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-job-instance-id-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-job-instance-id-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1109

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.362+0000",
      "duration" : "00:00:01",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPING",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-info-only-list-by-task-execution-id"><a class="anchor" href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-task-execution-id"></a>43.13.7. List All Job Executions For A Specified Task Execution Id Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-task-execution-id-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/thinexecutions?page=0&amp;size=10&amp;taskExecutionId=1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-task-execution-id-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taskExecutionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter result by the task execution id</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-task-execution-id-example-request"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10&amp;taskExecutionId=1' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-task-execution-id-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-thin-list-by-task-execution-id-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1109

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2023-09-21",
      "startTime" : "00:47:00",
      "startDateTime" : "2023-09-21T00:47:00.362+0000",
      "duration" : "00:00:01",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPING",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2"
        },
        "stop" : {
          "href" : "http://localhost:9393/jobs/executions/1?schemaTarget=boot2&amp;stop=true"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-detail"><a class="anchor" href="#api-guide-resources-job-executions-detail"></a>43.13.8. Job Execution Detail</h4>
<div class="paragraph">
<p>The job executions endpoint lets you get the details about a job execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-detail-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/executions/2?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-detail-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameter for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-example-request"><a class="anchor" href="#api-guide-resources-job-executions-detail-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/2?schemaTarget=boot2' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-detail-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 1460

{
  "executionId" : 2,
  "stepExecutionCount" : 0,
  "jobId" : 2,
  "taskExecutionId" : 2,
  "name" : "DOCJOB1",
  "startDate" : "2023-09-21",
  "startTime" : "00:47:00",
  "duration" : "00:00:01",
  "jobExecution" : {
    "id" : 2,
    "version" : 1,
    "jobParameters" : {
      "parameters" : { }
    },
    "jobInstance" : {
      "id" : 2,
      "jobName" : "DOCJOB1",
      "version" : null
    },
    "stepExecutions" : [ ],
    "status" : "STOPPED",
    "startTime" : "2023-09-21T00:47:00.499+0000",
    "createTime" : "2023-09-21T00:47:00.497+0000",
    "endTime" : null,
    "lastUpdated" : "2023-09-21T00:47:00.499+0000",
    "exitStatus" : {
      "exitCode" : "UNKNOWN",
      "exitDescription" : ""
    },
    "executionContext" : {
      "dirty" : false,
      "empty" : true,
      "values" : [ ]
    },
    "failureExceptions" : [ ],
    "jobConfigurationName" : null,
    "allFailureExceptions" : [ ]
  },
  "jobParameters" : { },
  "jobParametersString" : "",
  "restartable" : true,
  "abandonable" : true,
  "stoppable" : false,
  "defined" : true,
  "timeZone" : "UTC",
  "schemaTarget" : "boot2",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2"
    },
    "stop" : {
      "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2&amp;stop=true"
    },
    "restart" : {
      "href" : "http://localhost:9393/jobs/executions/2?schemaTarget=boot2&amp;restart=true"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-stop"><a class="anchor" href="#api-guide-resources-job-executions-stop"></a>43.13.9. Stop Job Execution</h4>
<div class="paragraph">
<p>The job executions endpoint lets you stop a job execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-stop-request-structure">Request structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop-request-parameters">Request parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop-example-request">Example request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop-response-structure">Response structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-stop-request-structure"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">PUT /jobs/executions/1?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

stop=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-stop-request-parameters"></a>Request parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaTarget</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The schema target of the job execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends signal to stop the job if set to true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-example-request"><a class="anchor" href="#api-guide-resources-job-executions-stop-example-request"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1?schemaTarget=boot2' -i -X PUT \
    -d 'stop=true'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-stop-response-structure"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-restart"><a class="anchor" href="#api-guide-resources-job-executions-restart"></a>43.13.10. Restart Job Execution</h4>
<div class="paragraph">
<p>The job executions endpoint lets you restart a job execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-restart-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-request-structure"><a class="anchor" href="#api-guide-resources-job-executions-restart-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">PUT /jobs/executions/2?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

restart=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-request-parameters"><a class="anchor" href="#api-guide-resources-job-executions-restart-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaTarget</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The schema target of the job execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restart</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends signal to restart the job if set to true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-example-request"><a class="anchor" href="#api-guide-resources-job-executions-restart-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/2?schemaTarget=boot2' -i -X PUT \
    -d 'restart=true'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-response-structure"><a class="anchor" href="#api-guide-resources-job-executions-restart-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-job-instances"><a class="anchor" href="#api-guide-resources-job-instances"></a>43.14. Job Instances</h3>
<div class="paragraph">
<p>The job instances endpoint provides information about the job instances that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-instances-list">List All Job Instances</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail">Job Instance Detail</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-instances-list"><a class="anchor" href="#api-guide-resources-job-instances-list"></a>43.14.1. List All Job Instances</h4>
<div class="paragraph">
<p>The job instances endpoint lets you list all job instances.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-instances-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-request-structure"><a class="anchor" href="#api-guide-resources-job-instances-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/instances?name=DOCJOB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-request-parameters"><a class="anchor" href="#api-guide-resources-job-instances-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the job instance</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-example-request"><a class="anchor" href="#api-guide-resources-job-instances-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/instances?name=DOCJOB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-response-structure"><a class="anchor" href="#api-guide-resources-job-instances-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1807

{
  "_embedded" : {
    "jobInstanceResourceList" : [ {
      "jobName" : "DOCJOB",
      "jobInstanceId" : 1,
      "jobExecutions" : [ {
        "executionId" : 1,
        "stepExecutionCount" : 0,
        "jobId" : 1,
        "taskExecutionId" : 1,
        "name" : "DOCJOB",
        "startDate" : "",
        "startTime" : "",
        "duration" : "",
        "jobExecution" : {
          "id" : 1,
          "version" : null,
          "jobParameters" : {
            "parameters" : { }
          },
          "jobInstance" : {
            "id" : 1,
            "jobName" : "DOCJOB",
            "version" : null
          },
          "stepExecutions" : [ ],
          "status" : "STARTING",
          "startTime" : null,
          "createTime" : "2023-09-21T00:46:54.931+0000",
          "endTime" : null,
          "lastUpdated" : null,
          "exitStatus" : {
            "exitCode" : "UNKNOWN",
            "exitDescription" : ""
          },
          "executionContext" : {
            "dirty" : false,
            "empty" : true,
            "values" : [ ]
          },
          "failureExceptions" : [ ],
          "jobConfigurationName" : null,
          "allFailureExceptions" : [ ]
        },
        "jobParameters" : { },
        "jobParametersString" : "",
        "restartable" : false,
        "abandonable" : false,
        "stoppable" : true,
        "defined" : true,
        "timeZone" : "UTC",
        "schemaTarget" : "boot2"
      } ],
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/instances/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/instances?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-instances-detail"><a class="anchor" href="#api-guide-resources-job-instances-detail"></a>43.14.2. Job Instance Detail</h4>
<div class="paragraph">
<p>The job instances endpoint lets you list all job instances.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-instances-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-request-structure"><a class="anchor" href="#api-guide-resources-job-instances-detail-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/instances/1?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/instances/{id}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job instance (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-request-parameters"><a class="anchor" href="#api-guide-resources-job-instances-detail-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-example-request"><a class="anchor" href="#api-guide-resources-job-instances-detail-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/instances/1?schemaTarget=boot2' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-response-structure"><a class="anchor" href="#api-guide-resources-job-instances-detail-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1312

{
  "jobName" : "DOCJOB",
  "jobInstanceId" : 1,
  "jobExecutions" : [ {
    "executionId" : 1,
    "stepExecutionCount" : 0,
    "jobId" : 1,
    "taskExecutionId" : 1,
    "name" : "DOCJOB",
    "startDate" : "",
    "startTime" : "",
    "duration" : "",
    "jobExecution" : {
      "id" : 1,
      "version" : null,
      "jobParameters" : {
        "parameters" : { }
      },
      "jobInstance" : {
        "id" : 1,
        "jobName" : "DOCJOB",
        "version" : null
      },
      "stepExecutions" : [ ],
      "status" : "STARTING",
      "startTime" : null,
      "createTime" : "2023-09-21T00:46:55.288+0000",
      "endTime" : null,
      "lastUpdated" : null,
      "exitStatus" : {
        "exitCode" : "UNKNOWN",
        "exitDescription" : ""
      },
      "executionContext" : {
        "dirty" : false,
        "empty" : true,
        "values" : [ ]
      },
      "failureExceptions" : [ ],
      "jobConfigurationName" : null,
      "allFailureExceptions" : [ ]
    },
    "jobParameters" : { },
    "jobParametersString" : "",
    "restartable" : false,
    "abandonable" : false,
    "stoppable" : true,
    "defined" : true,
    "timeZone" : "UTC",
    "schemaTarget" : "boot2"
  } ],
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/instances/1"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-job-step-executions"><a class="anchor" href="#api-guide-resources-job-step-executions"></a>43.15. Job Step Executions</h3>
<div class="paragraph">
<p>The job step executions endpoint provides information about the job step executions that are registered with the Spring Cloud Data Flow server.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-executions-list">List All Step Executions For a Job Execution</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail">Job Step Execution Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress">Job Step Execution Progress</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-step-executions-list"><a class="anchor" href="#api-guide-resources-job-step-executions-list"></a>43.15.1. List All Step Executions For a Job Execution</h4>
<div class="paragraph">
<p>The job step executions endpoint lets you list all job step executions.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-request-structure"><a class="anchor" href="#api-guide-resources-job-step-executions-list-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/executions/1/steps?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-request-parameters"><a class="anchor" href="#api-guide-resources-job-step-executions-list-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-example-request"><a class="anchor" href="#api-guide-resources-job-step-executions-list-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1/steps?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-response-structure"><a class="anchor" href="#api-guide-resources-job-step-executions-list-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1805

{
  "_embedded" : {
    "stepExecutionResourceList" : [ {
      "jobExecutionId" : 1,
      "stepExecution" : {
        "stepName" : "DOCJOB_STEP",
        "id" : 1,
        "version" : 0,
        "status" : "STARTING",
        "readCount" : 0,
        "writeCount" : 0,
        "commitCount" : 0,
        "rollbackCount" : 0,
        "readSkipCount" : 0,
        "processSkipCount" : 0,
        "writeSkipCount" : 0,
        "startTime" : "2023-09-21T00:49:01.519+0000",
        "endTime" : null,
        "lastUpdated" : "2023-09-21T00:49:01.519+0000",
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "exitStatus" : {
          "exitCode" : "EXECUTING",
          "exitDescription" : ""
        },
        "terminateOnly" : false,
        "filterCount" : 0,
        "failureExceptions" : [ ],
        "jobExecutionId" : 1,
        "jobParameters" : {
          "parameters" : { }
        },
        "skipCount" : 0,
        "summary" : "StepExecution: id=1, version=0, name=DOCJOB_STEP, status=STARTING, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=0"
      },
      "stepType" : "",
      "schemaTarget" : "boot2",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1/steps/1?schemaTarget=boot2"
        },
        "progress" : {
          "href" : "http://localhost:9393/jobs/executions/1/steps/1/progress?schemaTarget=boot2"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-step-execution-detail"><a class="anchor" href="#api-guide-resources-job-step-execution-detail"></a>43.15.2. Job Step Execution Detail</h4>
<div class="paragraph">
<p>The job step executions endpoint lets you get details about a job step execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-request-structure"><a class="anchor" href="#api-guide-resources-job-step-execution-detail-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/executions/1/steps/1?schemaTarget=boot2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}/steps/{stepid}</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stepid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing step execution for a specific job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-request-parameters"><a class="anchor" href="#api-guide-resources-job-step-execution-detail-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-example-request"><a class="anchor" href="#api-guide-resources-job-step-execution-detail-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1/steps/1?schemaTarget=boot2' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-response-structure"><a class="anchor" href="#api-guide-resources-job-step-execution-detail-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 1339

{
  "jobExecutionId" : 1,
  "stepExecution" : {
    "stepName" : "DOCJOB_STEP",
    "id" : 1,
    "version" : 0,
    "status" : "STARTING",
    "readCount" : 0,
    "writeCount" : 0,
    "commitCount" : 0,
    "rollbackCount" : 0,
    "readSkipCount" : 0,
    "processSkipCount" : 0,
    "writeSkipCount" : 0,
    "startTime" : "2023-09-21T00:49:01.519+0000",
    "endTime" : null,
    "lastUpdated" : "2023-09-21T00:49:01.519+0000",
    "executionContext" : {
      "dirty" : false,
      "empty" : true,
      "values" : [ ]
    },
    "exitStatus" : {
      "exitCode" : "EXECUTING",
      "exitDescription" : ""
    },
    "terminateOnly" : false,
    "filterCount" : 0,
    "failureExceptions" : [ ],
    "jobExecutionId" : 1,
    "jobParameters" : {
      "parameters" : { }
    },
    "skipCount" : 0,
    "summary" : "StepExecution: id=1, version=0, name=DOCJOB_STEP, status=STARTING, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=0"
  },
  "stepType" : "",
  "schemaTarget" : "boot2",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps/1?schemaTarget=boot2"
    },
    "progress" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps/1/progress?schemaTarget=boot2"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-step-execution-progress"><a class="anchor" href="#api-guide-resources-job-step-execution-progress"></a>43.15.3. Job Step Execution Progress</h4>
<div class="paragraph">
<p>The job step executions endpoint lets you get details about the progress of a job step execution.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-request-structure"><a class="anchor" href="#api-guide-resources-job-step-execution-progress-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /jobs/executions/1/steps/1/progress HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}/steps/{stepid}/progress</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stepid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing step execution for a specific job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-request-parameters"><a class="anchor" href="#api-guide-resources-job-step-execution-progress-request-parameters"></a>Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-example-request"><a class="anchor" href="#api-guide-resources-job-step-execution-progress-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1/steps/1/progress' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-response-structure"><a class="anchor" href="#api-guide-resources-job-step-execution-progress-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json
Content-Length: 2795

{
  "stepExecution" : {
    "stepName" : "DOCJOB_STEP",
    "id" : 1,
    "version" : 0,
    "status" : "STARTING",
    "readCount" : 0,
    "writeCount" : 0,
    "commitCount" : 0,
    "rollbackCount" : 0,
    "readSkipCount" : 0,
    "processSkipCount" : 0,
    "writeSkipCount" : 0,
    "startTime" : "2023-09-21T00:49:01.519+0000",
    "endTime" : null,
    "lastUpdated" : "2023-09-21T00:49:01.519+0000",
    "executionContext" : {
      "dirty" : false,
      "empty" : true,
      "values" : [ ]
    },
    "exitStatus" : {
      "exitCode" : "EXECUTING",
      "exitDescription" : ""
    },
    "terminateOnly" : false,
    "filterCount" : 0,
    "failureExceptions" : [ ],
    "jobExecutionId" : 1,
    "jobParameters" : {
      "parameters" : { }
    },
    "skipCount" : 0,
    "summary" : "StepExecution: id=1, version=0, name=DOCJOB_STEP, status=STARTING, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=0"
  },
  "stepExecutionHistory" : {
    "stepName" : "DOCJOB_STEP",
    "count" : 0,
    "commitCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "rollbackCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "readCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "writeCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "filterCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "readSkipCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "writeSkipCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "processSkipCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "duration" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    },
    "durationPerRead" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "mean" : 0.0,
      "standardDeviation" : 0.0
    }
  },
  "percentageComplete" : 0.5,
  "finished" : false,
  "duration" : 148.0,
  "_links" : {
    "progress" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps/1/progress?schemaTarget=boot2"
    },
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps/1"
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The following fields in the stepExecutionHistory are deprecated and will be removed in a future release: rollbackCount, readCount, writeCount, filterCount, readSkipCount, writeSkipCount, processSkipCount, durationPerRead.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-runtime-information-applications"><a class="anchor" href="#api-guide-resources-runtime-information-applications"></a>43.16. Runtime Information about Applications</h3>
<div class="paragraph">
<p>You can get information about running apps known to the system, either globally or individually.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all">Listing All Applications at Runtime</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app">Querying All Instances of a Single App</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app">Querying a Single Instance of a Single App</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-runtime-information-applications-listing-all"><a class="anchor" href="#api-guide-resources-runtime-information-applications-listing-all"></a>43.16.1. Listing All Applications at Runtime</h4>
<div class="paragraph">
<p>To retrieve information about all instances of all apps, query the <code>/runtime/apps</code> endpoint by using <code>GET</code>.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-listing-all-request-structure"><a class="anchor" href="#api-guide-resources-runtime-information-applications-listing-all-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /runtime/apps HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-listing-all-example-request"><a class="anchor" href="#api-guide-resources-runtime-information-applications-listing-all-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/runtime/apps' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-listing-all-response-structure"><a class="anchor" href="#api-guide-resources-runtime-information-applications-listing-all-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 209

{
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/runtime/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app"></a>43.16.2. Querying All Instances of a Single App</h4>
<div class="paragraph">
<p>To retrieve information about all instances of a particular app, query the <code>/runtime/apps/&lt;appId&gt;/instances</code> endpoint by using <code>GET</code>.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app-request-structure"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /runtime/apps HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app-example-request"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/runtime/apps' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app-response-structure"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 209

{
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/runtime/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app"></a>43.16.3. Querying a Single Instance of a Single App</h4>
<div class="paragraph">
<p>To retrieve information about a particular instance of a particular application, query the <code>/runtime/apps/&lt;appId&gt;/instances/&lt;instanceId&gt;</code> endpoint by using <code>GET</code>.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app-request-structure"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /runtime/apps HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app-example-request"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/runtime/apps' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app-response-structure"><a class="anchor" href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 209

{
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/runtime/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-logs"><a class="anchor" href="#api-guide-resources-stream-logs"></a>43.17. Stream Logs</h3>
<div class="paragraph">
<p>You can get the application logs of the stream for the entire stream or a specific application inside the stream.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-logs-by-stream-name">Get the applications' logs by the stream name</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-logs-by-app-name">Get the logs of a specific application from the stream</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-logs-by-stream-name"><a class="anchor" href="#api-guide-resources-stream-logs-by-stream-name"></a>43.17.1. Get the applications' logs by the stream name</h4>
<div class="paragraph">
<p>Use the HTTP <code>GET</code> method with the <code>/streams/logs/&lt;streamName&gt;</code> REST endpoint to retrieve all the applications' logs for the given stream name.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-logs-by-stream-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-logs-by-stream-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-logs-by-stream-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-logs-by-stream-name-request-structure"><a class="anchor" href="#api-guide-resources-stream-logs-by-stream-name-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/logs/ticktock HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-logs-by-stream-name-example-request"><a class="anchor" href="#api-guide-resources-stream-logs-by-stream-name-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/logs/ticktock' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-logs-by-stream-name-response-structure"><a class="anchor" href="#api-guide-resources-stream-logs-by-stream-name-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 93

{
  "logs" : {
    "ticktock-time-v1" : "Logs-time",
    "ticktock-log-v1" : "Logs-log"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-logs-by-app-name"><a class="anchor" href="#api-guide-resources-stream-logs-by-app-name"></a>43.17.2. Get the logs of a specific application from the stream</h4>
<div class="paragraph">
<p>To retrieve the logs of a specific application from the stream, query the <code>/streams/logs/&lt;streamName&gt;/&lt;appName&gt;</code> endpoint using the <code>GET</code> HTTP method.
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-logs-by-app-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-logs-by-app-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-logs-by-app-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-logs-by-app-name-request-structure"><a class="anchor" href="#api-guide-resources-stream-logs-by-app-name-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /streams/logs/ticktock/ticktock-log-v1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-logs-by-app-name-example-request"><a class="anchor" href="#api-guide-resources-stream-logs-by-app-name-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/streams/logs/ticktock/ticktock-log-v1' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-logs-by-app-name-response-structure"><a class="anchor" href="#api-guide-resources-stream-logs-by-app-name-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 55

{
  "logs" : {
    "ticktock-log-v1" : "Logs-log"
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-logs"><a class="anchor" href="#api-guide-resources-task-logs"></a>43.18. Task Logs</h3>
<div class="paragraph">
<p>You can get the task execution log for a specific task execution.</p>
</div>
<div class="paragraph">
<p>The following topic provides more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-logs-by-task-id">Get the task execution log</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-logs-by-task-id"><a class="anchor" href="#api-guide-resources-stream-logs-by-task-id"></a>43.18.1. Get the task execution log</h4>
<div class="paragraph">
<p>To retrieve the logs of the task execution, query the <code>/tasks/logs/&lt;ExternalTaskExecutionId&gt;</code> endpoint by using the HTTP <code>GET</code> method..
The following topics provide more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-logs-by-task-id-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-logs-by-task-id-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-logs-by-task-id-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-logs-by-task-id-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-logs-by-task-id-request-structure"><a class="anchor" href="#api-guide-resources-task-logs-by-task-id-request-structure"></a>Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">GET /tasks/logs/taskA-e06840bb-cd96-463f-b73f-7cbcc12b1f65?platformName=default HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-logs-by-task-id-request-parameters"><a class="anchor" href="#api-guide-resources-task-logs-by-task-id-request-parameters"></a>Request Parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the platform the task is launched.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-logs-by-task-id-example-request"><a class="anchor" href="#api-guide-resources-task-logs-by-task-id-example-request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl 'http://localhost:9393/tasks/logs/taskA-e06840bb-cd96-463f-b73f-7cbcc12b1f65?platformName=default' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-logs-by-task-id-response-structure"><a class="anchor" href="#api-guide-resources-task-logs-by-task-id-response-structure"></a>Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-http" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 277

"stdout:\n2023-09-21 00:47:08.484  INFO 5976 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@ba8a1dc: startup date [Thu Sep 21 00:47:08 UTC 2023]; root of context hierarchy\n"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-openapi"><a class="anchor" href="#api-guide-openapi"></a>44. OpenAPI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://springdoc.org/#Introduction">Springdoc</a> library is integrated with the server in an opt-in fashion. Once enabled, it provides OpenAPI3 documentation and a Swagger UI.</p>
</div>
<div class="paragraph">
<p>To enable, set the following properties in your <code>application.yml</code> prior to launching the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The properties can also be set on the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">-Dspringdoc.api-docs.enabled=true -Dspringdoc.swagger-ui.enabled=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>or as environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">SPRINGDOC_APIDOCS_ENABLED=true
SPRINGDOC_SWAGGERUI_ENABLED=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once enabled, the OpenAPI3 docs and Swagger UI are available at the <code>/v3/api-docs</code> and <code>/swagger-ui/index.html</code> URIs, respectively (eg. <a href="http://localhost:9393/v3/api-docs" class="bare">localhost:9393/v3/api-docs</a>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The Swagger UI will be initially be blank. Type in "/v3/api-docs/" in the "Explore" bar and click "Explore".
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you try out the API&#8217;s in the Swagger UI and get errors related to <code>"No property string found for type"</code> try replacing the <strong>pageable</strong> parameter with <code>{ }</code> or removing its <code>"sort"</code> attribute.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are a plethora of available <a href="https://springdoc.org/#properties">OpenAPI</a> and <a href="https://springdoc.org/#swagger-ui-properties">Swagger UI</a> properties to configure the feature.</p>
</div>
</div>
</div>
<h1 id="appendix" class="sect0"><a class="anchor" href="#appendix"></a>Appendices</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Having trouble with Spring Cloud Data Flow, We&#8217;d like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question. We monitor <a href="https://stackoverflow.com">stackoverflow.com</a> for questions
tagged with <a href="https://stackoverflow.com/tags/spring-cloud-dataflow"><code>spring-cloud-dataflow</code></a>.</p>
</li>
<li>
<p>Report bugs with Spring Cloud Data Flow at <a href="https://github.com/spring-cloud/spring-cloud-dataflow/issues" class="bare">github.com/spring-cloud/spring-cloud-dataflow/issues</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dataflow-template"><a class="anchor" href="#dataflow-template"></a>Appendix A: Data Flow Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As described in API Guide chapter, Spring Cloud Data Flow&#8217;s functionality is completely exposed through REST endpoints.
While you can use those endpoints directly, Spring Cloud Data Flow also provides a Java-based API, which makes using those REST endpoints even easier.</p>
</div>
<div class="paragraph">
<p>The central entry point is the <code>DataFlowTemplate</code> class in the <code>org.springframework.cloud.dataflow.rest.client</code> package.</p>
</div>
<div class="paragraph">
<p>This class implements the <code>DataFlowOperations</code> interface and delegates to the following sub-templates that provide the specific functionality for each feature-set:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StreamOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for stream operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CounterOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for counter operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FieldValueCounterOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for field value counter operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AggregateCounterOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for aggregate counter operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TaskOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for task operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JobOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for job operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AppRegistryOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for app registry operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CompletionOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for completion operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RuntimeOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST Client for runtime operations</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When the <code>DataFlowTemplate</code> is being initialized, the sub-templates can be discovered through the REST relations, which are provided by HATEOAS (Hypermedia as the Engine of Application State).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If a resource cannot be resolved, the respective sub-template results
in NULL. A common cause is that Spring Cloud Data Flow allows for specific
sets of features to be enabled or disabled when launching. For more information, see one of the <a href="#configuration-local-enable-disable-specific-features">local</a>, <a href="#configuration-cloudfoundry-enable-disable-specific-features">Cloud Foundry</a>, or <a href="#configuration-kubernetes-enable-disable-specific-features">Kubernetes</a> configuration chapters, depending on where you deploy your application.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_using_the_data_flow_template"><a class="anchor" href="#_using_the_data_flow_template"></a>A.1. Using the Data Flow Template</h3>
<div class="paragraph">
<p>When you use the Data Flow Template, the only needed Data Flow dependency is the
Spring Cloud Data Flow Rest Client, as shown in the following Maven snippet:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
  &lt;artifactId&gt;spring-cloud-dataflow-rest-client&lt;/artifactId&gt;
  &lt;version&gt;2.11.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With that dependency, you get the <code>DataFlowTemplate</code> class as well as all the dependencies needed to make calls to a Spring Cloud Data Flow server.</p>
</div>
<div class="paragraph">
<p>When instantiating the <code>DataFlowTemplate</code>, you also pass in a <code>RestTemplate</code>.
Note that the needed <code>RestTemplate</code> requires some additional configuration to be valid in the context of the <code>DataFlowTemplate</code>.
When declaring a <code>RestTemplate</code> as a bean, the following configuration suffices:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @Bean
  public static RestTemplate restTemplate() {
    RestTemplate restTemplate = new RestTemplate();
    restTemplate.setErrorHandler(new VndErrorResponseErrorHandler(restTemplate.getMessageConverters()));
    for(HttpMessageConverter&lt;?&gt; converter : restTemplate.getMessageConverters()) {
      if (converter instanceof MappingJackson2HttpMessageConverter) {
        final MappingJackson2HttpMessageConverter jacksonConverter =
            (MappingJackson2HttpMessageConverter) converter;
        jacksonConverter.getObjectMapper()
            .registerModule(new Jackson2HalModule())
            .addMixIn(JobExecution.class, JobExecutionJacksonMixIn.class)
            .addMixIn(JobParameters.class, JobParametersJacksonMixIn.class)
            .addMixIn(JobParameter.class, JobParameterJacksonMixIn.class)
            .addMixIn(JobInstance.class, JobInstanceJacksonMixIn.class)
            .addMixIn(ExitStatus.class, ExitStatusJacksonMixIn.class)
            .addMixIn(StepExecution.class, StepExecutionJacksonMixIn.class)
            .addMixIn(ExecutionContext.class, ExecutionContextJacksonMixIn.class)
            .addMixIn(StepExecutionHistory.class, StepExecutionHistoryJacksonMixIn.class);
      }
    }
    return restTemplate;
  }
</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also get a pre-configured <code>RestTemplate</code> by using
<code>DataFlowTemplate.getDefaultDataflowRestTemplate();</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now you can instantiate the <code>DataFlowTemplate</code> with the following code:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">DataFlowTemplate dataFlowTemplate = new DataFlowTemplate(
    new URI("http://localhost:9393/"), restTemplate);         <i class="conum" data-value="1"></i><b>(1)</b>
</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>URI</code> points to the ROOT of your Spring Cloud Data Flow Server.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Depending on your requirements, you can now make calls to the server. For instance,
if you want to get a list of the currently available applications, you can run the following code:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">PagedResources&lt;AppRegistrationResource&gt; apps = dataFlowTemplate.appRegistryOperations().list();

System.out.println(String.format("Retrieved %s application(s)",
    apps.getContent().size()));

for (AppRegistrationResource app : apps.getContent()) {
  System.out.println(String.format("App Name: %s, App Type: %s, App URI: %s",
    app.getName(),
    app.getType(),
    app.getUri()));
}
</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_flow_template_and_security"><a class="anchor" href="#_data_flow_template_and_security"></a>A.2. Data Flow Template and Security</h3>
<div class="paragraph">
<p>When using the <code>DataFlowTemplate</code>, you can also provide all the security-related
options as if you were using the <em>Data Flow Shell</em>. In fact, the <em>Data Flow Shell</em>
uses the <code>DataFlowTemplate</code> for all its operations.</p>
</div>
<div class="paragraph">
<p>To let you get started, we provide a <code>HttpClientConfigurer</code> that uses the builder
pattern to set the various security-related options:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">	HttpClientConfigurer
		.create(targetUri)                                             <i class="conum" data-value="1"></i><b>(1)</b>
		.basicAuthCredentials(username, password)                      <i class="conum" data-value="2"></i><b>(2)</b>
		.skipTlsCertificateVerification()                              <i class="conum" data-value="3"></i><b>(3)</b>
		.withProxyCredentials(proxyUri, proxyUsername, proxyPassword)  <i class="conum" data-value="4"></i><b>(4)</b>
		.addInterceptor(interceptor)                                   <i class="conum" data-value="5"></i><b>(5)</b>
		.buildClientHttpRequestFactory()                               <i class="conum" data-value="6"></i><b>(6)</b>
</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creates a HttpClientConfigurer with the provided target URI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Sets the credentials for basic authentication (Using OAuth2 Password Grant)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Skip SSL certificate verification (<strong>Use for DEVELOPMENT ONLY!</strong>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Configure any Proxy settings</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Add a custom interceptor e.g. to set the OAuth2 Authorization header. This allows
you to pass an OAuth2 Access Token instead of username/password credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Builds the <code>ClientHttpRequestFactory</code> that can be set on the <code>RestTemplate</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Once the <code>HttpClientConfigurer</code> is configured, you can use its <code>buildClientHttpRequestFactory</code>
to build the <code>ClientHttpRequestFactory</code> and then set the corresponding
property on the <code>RestTemplate</code>. You can then instantiate the actual <code>DataFlowTemplate</code>
using that <code>RestTemplate</code>.</p>
</div>
<div class="paragraph">
<p>To configure <em>Basic Authentication</em>, the following setup is required:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">	RestTemplate restTemplate = DataFlowTemplate.getDefaultDataflowRestTemplate();
	HttpClientConfigurer httpClientConfigurer = HttpClientConfigurer.create("http://localhost:9393");

	httpClientConfigurer.basicAuthCredentials("my_username", "my_password");
	restTemplate.setRequestFactory(httpClientConfigurer.buildClientHttpRequestFactory());

	DataFlowTemplate dataFlowTemplate = new DataFlowTemplate("http://localhost:9393", restTemplate);
</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="howto"><a class="anchor" href="#howto"></a>Appendix B: &#8220;How-to&#8221; guides</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides answers to some common &#8216;how do I do that&#8230;&#8203;&#8217; questions that often arise when people use Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>If you have a specific problem that we do not cover here, you might want to check out <a href="https://stackoverflow.com/tags/spring-cloud-dataflow">stackoverflow.com</a> to see if someone has already provided an answer.
That is also a great place to ask new questions (use the <code>spring-cloud-dataflow</code> tag).</p>
</div>
<div class="paragraph">
<p>We are also more than happy to extend this section. If you want to add a &#8220;how-to&#8221;, you can send us a <a href="https://github.com/spring-cloud/spring-cloud-dataflow">pull request</a>.</p>
</div>
<div class="sect2">
<h3 id="_configure_maven_properties"><a class="anchor" href="#_configure_maven_properties"></a>B.1. Configure Maven Properties</h3>
<div class="paragraph">
<p>If applications are resolved by using the Maven repository you may want to configure the underlying resolver.</p>
</div>
<div class="paragraph">
<p>You can set the Maven properties, such as the local Maven repository location, remote Maven repositories, authentication credentials, and proxy server properties through command-line properties when you start the Data Flow server.
Alternatively, you can set the properties by setting the <code>SPRING_APPLICATION_JSON</code> environment property for the Data Flow server.</p>
</div>
<div class="paragraph">
<p>For all Data Flow server installations, the following list of remote Maven repositories are configured by default:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven Central (<code><a href="https://repo.maven.apache.org/maven2" class="bare">repo.maven.apache.org/maven2</a></code>)</p>
</li>
<li>
<p>Spring Snapshots (<code><a href="https://repo.spring.io/snapshot" class="bare">repo.spring.io/snapshot</a></code>)</p>
</li>
<li>
<p>Spring Milestones (<code><a href="https://repo.spring.io/milestone" class="bare">repo.spring.io/milestone</a></code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the default is already explicitly configured (exact match on the repo url) then it will not be included.</p>
</div>
<div class="paragraph">
<p>If the applications exist on another remote repository, besides the pre-configured ones, that remote repository must be configured explicitly and will be added to the pre-configured default list.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To skip the automatic default repositories behavior altogether, set the <code>maven.include-default-remote-repos</code> property to <code>false</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To pass the properties as command-line options, run the server with a command similar to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">java -jar &lt;dataflow-server&gt;.jar --maven.localRepoitory=mylocal \
--maven.remote-repositories.repo1.url=https://repo1 \
--maven.remote-repositories.repo1.auth.username=repo1user \
--maven.remote-repositories.repo1.auth.password=repo1pass \
--maven.remote-repositories.repo2.url=https://repo2 \
--maven.proxy.host=proxyhost \
--maven.proxy.port=9018 \
--maven.proxy.auth.username=proxyuser \
--maven.proxy.auth.password=proxypass</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>SPRING_APPLICATION_JSON</code> environment property:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">export SPRING_APPLICATION_JSON='{ "maven": { "local-repository": "local","remote-repositories": { "repo1": { "url": "https://repo1", "auth": { "username": "repo1user", "password": "repo1pass" } },
"repo2": { "url": "https://repo2" } }, "proxy": { "host": "proxyhost", "port": 9018, "auth": { "username": "proxyuser", "password": "proxypass" } } } }'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here is the same content in nicely formatted JSON:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">SPRING_APPLICATION_JSON='{
  "maven": {
    "local-repository": "local",
    "remote-repositories": {
      "repo1": {
        "url": "https://repo1",
        "auth": {
          "username": "repo1user",
          "password": "repo1pass"
        }
      },
      "repo2": {
        "url": "https://repo2"
      }
    },
    "proxy": {
      "host": "proxyhost",
      "port": 9018,
      "auth": {
        "username": "proxyuser",
        "password": "proxypass"
      }
    }
  }
}'</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also set the properties as individual environment variables:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">export MAVEN_REMOTEREPOSITORIES_REPO1_URL=https://repo1
export MAVEN_REMOTEREPOSITORIES_REPO1_AUTH_USERNAME=repo1user
export MAVEN_REMOTEREPOSITORIES_REPO1_AUTH_PASSWORD=repo1pass
export MAVEN_REMOTEREPOSITORIES_REPO2_URL=https://repo2
export MAVEN_PROXY_HOST=proxyhost
export MAVEN_PROXY_PORT=9018
export MAVEN_PROXY_AUTH_USERNAME=proxyuser
export MAVEN_PROXY_AUTH_PASSWORD=proxypass</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>B.2. Troubleshooting</h3>
<div class="paragraph">
<p>This section covers how to troubleshoot Spring Cloud Data Flow on your platform of choice. See the Troubleshooting sections of the microsite for <a href="https://dataflow.spring.io/docs/stream-developer-guides/troubleshooting/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/troubleshooting/">Batch</a> processing.</p>
</div>
</div>
<div class="sect2">
<h3 id="extend-classpath"><a class="anchor" href="#extend-classpath"></a>B.3. Extending application classpath</h3>
<div class="paragraph">
<p>Users may require the addition of dependencies to the existing Stream applications or specific database drivers to Dataflow and Skipper or any of the other containers provider by the project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Spring Cloud Dataflow repository contains scripts to help with this task. The examples below assume you have cloned the <code>spring-cloud-dataflow</code> repository and are executing the scripts from <code>src/templates/add-deps</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_containers"><a class="anchor" href="#_containers"></a>B.3.1. Containers</h4>
<div class="paragraph">
<p>In order to add dependencies to existing container the following steps will be the approach.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a folder with the extra dependencies.</p>
</li>
<li>
<p>Create a new container image while copying the files to the libraries folder.</p>
</li>
<li>
<p>Push the image to a private registry.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_environmental_variables"><a class="anchor" href="#_environmental_variables"></a>Environmental variables</h5>
<div class="ulist">
<ul>
<li>
<p><code>DEPS_FOLDER</code> should be a full filename or path expression for files to copy to the container.</p>
</li>
<li>
<p><code>CONTAINER_REPO</code> the source docker image name.</p>
</li>
<li>
<p><code>CONTAINER_TAG</code> the tag of source image.</p>
</li>
<li>
<p><code>PRIVATE_REGISTRY</code> the host name of the private registry.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">export CONTAINER_REPO="springcloud/spring-cloud-dataflow-server"
export CONTAINER_TAG="2.9.5-jdk17"
export PRIVATE_REGISTRY="our.private.registry"
export DEPS_FOLDER="./extra-libs/"
docker build -f Dockerfile -t "$PRIVATE_REGISTRY/$CONTAINER_REPO:$CONTAINER_TAG"
docker push "$PRIVATE_REGISTRY/$CONTAINER_REPO:$CONTAINER_TAG"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As pointed out above, the <code>Dockerfile</code> lives in the <code>spring-cloud-dataflow</code> repository under <code>src/add-deps</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jar_file"><a class="anchor" href="#_jar_file"></a>B.3.2. JAR File</h4>
<div class="paragraph">
<p>When using CloudFoundry or local deployment you will need to update jar before publishing it to a private registry or Maven Local.</p>
</div>
<div class="sect4">
<h5 id="_example"><a class="anchor" href="#_example"></a>Example</h5>
<div class="paragraph">
<p>This example adds the dependencies and then installs the jar to Maven local.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./gradlew -i publishToMavenLocal \
    -P appFolder="." \
    -P appGroup="org.springframework.cloud" \
    -P appName="spring-cloud-dataflow-server" \
    -P appVersion="2.9.5" \
    -P depFolder="./extra-libs"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use the <code>publishMavenPublicationToMavenRepository</code> task to publish to a remote repository. Update the <code>gradle.properties</code> with the remote repository details. Alternatively move <code>repoUser</code> and <code>repoPassword</code> to ~/.gradle/gradle.properties
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-containers"><a class="anchor" href="#create-containers"></a>B.4. Create containers for architectures not supported yet.</h3>
<div class="paragraph">
<p>In the case of macOS on M1 the performance of amd64/x86_64 is unacceptable.
We provide a set of scripts that can be used to download specific versions of published artifacts.
We also provide a script that will create a container using the downloaded artifact for the host platform.
In the various projects you will find then in <code>src/local</code> or <code>local</code> folders.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 36.3636%;">
<col style="width: 54.5455%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Project</th>
<th class="tableblock halign-left valign-top">Scripts</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Data Flow</span></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><code>src/local/download-apps.sh</code></span><br>
<span class="small"><code>src/local/create-containers.sh</code></span><br></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="small">Download or create container for: <code>spring-cloud-dataflow-server</code>,</span><br>
<span class="small"><code>spring-cloud-dataflow-composed-task-runner</code>,</span><br>
<span class="small"><code>spring-cloud-dataflow-single-step-batch-job</code>,</span><br>
<span class="small"><code>spring-cloud-dataflow-tasklauncher-sink-kafka</code>,</span><br>
<span class="small"><code>spring-cloud-dataflow-tasklauncher-sink-rabbit</code></span><br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Skipper</span></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><code>local/download-app.sh</code></span><br>
<span class="small"><code>local/create-container.sh</code></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Download or create container for: <code>spring-cloud-skipper-server</code></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small">Stream Applications</span></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><code>local/download-apps.sh</code></span><br>
<span class="small"><code>local/create-containers.sh</code></span><br>
<span class="small"><code>local/pack-containers.sh</code></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create-containers.sh</code> uses <code>jib</code><br>
<code>pack-containers.sh</code> uses <code>pack</code></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_scripts_in_spring_cloud_dataflow"><a class="anchor" href="#_scripts_in_spring_cloud_dataflow"></a>B.4.1. Scripts in <code>spring-cloud-dataflow</code></h4>
<div class="sect4">
<h5 id="_srclocaldownload_apps_sh"><a class="anchor" href="#_srclocaldownload_apps_sh"></a><code>src/local/download-apps.sh</code></h5>
<div class="paragraph">
<p>Downloads all applications needed by <code>create-containers.sh</code> from Maven repository.</p>
</div>
<div class="paragraph">
<p><strong>If the timestamp of snapshots matches the download will be skipped.</strong></p>
</div>
<div class="paragraph">
<p>Usage: <code>download-apps.sh [version]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the dataflow-server version like <code>2.9.6</code>. Default is <code>2.11.0-SNAPSHOT</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_srclocalcreate_containers_sh"><a class="anchor" href="#_srclocalcreate_containers_sh"></a><code>src/local/create-containers.sh</code></h5>
<div class="paragraph">
<p>Creates all containers and pushes to local docker registry.</p>
</div>
<div class="paragraph">
<p>This script requires <a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-cli">jib-cli</a></p>
</div>
<div class="paragraph">
<p>Usage: <code>create-containers.sh [version] [jre-version]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the dataflow-server version like <code>2.9.6</code>. Default is <code>2.11.0-SNAPSHOT</code></p>
</li>
<li>
<p><code>jre-version</code> should be one of 11, 17. Default is 11</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scripts_in_spring_cloud_skipper"><a class="anchor" href="#_scripts_in_spring_cloud_skipper"></a>B.4.2. Scripts in <code>spring-cloud-skipper</code></h4>
<div class="sect4">
<h5 id="_localdownload_app_sh"><a class="anchor" href="#_localdownload_app_sh"></a><code>local/download-app.sh</code></h5>
<div class="paragraph">
<p>Downloads all applications needed by <code>create-containers.sh</code> from Maven repository.</p>
</div>
<div class="paragraph">
<p><strong>If the timestamp of snapshots matches the download will be skipped.</strong></p>
</div>
<div class="paragraph">
<p>Usage: <code>download-app.sh [version]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the skipper version like <code>2.8.6</code> or default is <code>2.11.0-SNAPSHOT</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_localcreate_container_sh"><a class="anchor" href="#_localcreate_container_sh"></a><code>local/create-container.sh</code></h5>
<div class="paragraph">
<p>Creates all containers and pushes to local docker registry.
This script requires <a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-cli">jib-cli</a></p>
</div>
<div class="paragraph">
<p>Usage: <code>create-containers.sh [version] [jre-version]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the skipper version like <code>2.8.6</code> or default is <code>2.11.0-SNAPSHOT</code></p>
</li>
<li>
<p><code>jre-version</code> should be one of 11, 17</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scripts_in_stream_applications"><a class="anchor" href="#_scripts_in_stream_applications"></a>B.4.3. Scripts in <code>stream-applications</code></h4>
<div class="sect4">
<h5 id="_localdownload_apps_sh"><a class="anchor" href="#_localdownload_apps_sh"></a><code>local/download-apps.sh</code></h5>
<div class="paragraph">
<p>Downloads all applications needed by <code>create-containers.sh</code> from Maven repository.</p>
</div>
<div class="paragraph">
<p><strong>If the timestamp of snapshots matches the download will be skipped.</strong></p>
</div>
<div class="paragraph">
<p>Usage: <code>download-apps.sh [version] [broker] [filter]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the stream applications version like <code>3.2.1</code> or default is <code>3.2.2-SNAPSHOT</code></p>
</li>
<li>
<p><code>broker</code> is one of rabbitmq, rabbit or kafka</p>
</li>
<li>
<p><code>filter</code> is a name of an application or a partial name that will be matched.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_localcreate_containers_sh"><a class="anchor" href="#_localcreate_containers_sh"></a><code>local/create-containers.sh</code></h5>
<div class="paragraph">
<p>Creates all containers and pushes to local docker registry.</p>
</div>
<div class="paragraph">
<p>This script requires <a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-cli">jib-cli</a></p>
</div>
<div class="paragraph">
<p>Usage: <code>create-containers.sh [version] [broker] [jre-version] [filter]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the stream-applications version like <code>3.2.1</code> or default is <code>3.2.2-SNAPSHOT</code></p>
</li>
<li>
<p><code>broker</code> is one of rabbitmq, rabbit or kafka</p>
</li>
<li>
<p><code>jre-version</code> should be one of 11, 17</p>
</li>
<li>
<p><code>filter</code> is a name of an application or a partial name that will be matched.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the file is not present required to create the container the script will skip the one.</p>
</div>
</div>
<div class="sect4">
<h5 id="_localpack_containers_sh"><a class="anchor" href="#_localpack_containers_sh"></a><code>local/pack-containers.sh</code></h5>
<div class="paragraph">
<p>Creates all containers and pushes to local docker registry.</p>
</div>
<div class="paragraph">
<p>This script requires <a href="https://buildpacks.io/docs/tools/pack">packeto pack</a></p>
</div>
<div class="paragraph">
<p>Usage: <code>pack-containers.sh [version] [broker] [jre-version] [filter]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>version</code> is the stream-applications version like <code>3.2.1</code> or default is <code>3.2.2-SNAPSHOT</code></p>
</li>
<li>
<p><code>broker</code> is one of rabbitmq, rabbit or kafka</p>
</li>
<li>
<p><code>jre-version</code> should be one of 11, 17</p>
</li>
<li>
<p><code>filter</code> is a name of an application or a partial name that will be matched.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the required file is not present to create the container the script will skip that one.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If any parameter is provided all those to the left of it should be considered required.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="local-k8s-development"><a class="anchor" href="#local-k8s-development"></a>B.5. Configure Kubernetes for local development or testing</h3>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>B.5.1. Prerequisites</h4>
<div class="paragraph">
<p>You will need to install kubectl and then kind or minikube for a local cluster.</p>
</div>
<div class="paragraph">
<p>All the examples assume you have cloned the <code>spring-cloud-dataflow</code> repository and are executing the scripts from <code>deploy/k8s</code>.</p>
</div>
<div class="paragraph">
<p>On macOS you may need to install <code>realpath</code> from <a href="https://ports.macports.org/port/realpath/">Macports</a> or <code>brew install realpath</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The scripts require a shell like <code>bash</code> or <code>zsh</code> and should work on Linux, WSL 2 or macOS.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_steps"><a class="anchor" href="#_steps"></a>B.5.2. Steps</h4>
<div class="ulist">
<ul>
<li>
<p>Choose Kubernetes provider. Kind, Minikube or remote GKE or TMC.</p>
</li>
<li>
<p>Decide the namespace to use for deployment if not <code>default</code>.</p>
</li>
<li>
<p>Configure Kubernetes and loadbalancer.</p>
</li>
<li>
<p>Choose Broker with <code>export BROKER=kafka|rabbitmq</code></p>
</li>
<li>
<p>Build or Pull container images for Skipper and Data Flow Server.</p>
</li>
<li>
<p>Deploy and Launch Spring Cloud Data Flow.</p>
</li>
<li>
<p>Export Data Flow Server address to env.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_kubernetes_provider"><a class="anchor" href="#_kubernetes_provider"></a>Kubernetes Provider</h5>
<div class="paragraph">
<p><em>How do I choose between minikube and kind? kind will generally provide quicker setup and teardown time than Minikube. There is little to choose in terms of performance between the 2 apart from being able to configure limits on CPUs and memory when deploying minikube. So in the case where you have memory constraints or need to enforce memory limitations Minikube will be a better option.</em></p>
</div>
</div>
<div class="sect4">
<h5 id="_kubectl"><a class="anchor" href="#_kubectl"></a>Kubectl</h5>
<div class="paragraph">
<p>You will need to <a href="https://kubernetes.io/docs/tasks/tools/">install</a> kubectl in order to configure the Kubernetes cluster</p>
</div>
</div>
<div class="sect4">
<h5 id="_kind"><a class="anchor" href="#_kind"></a>Kind</h5>
<div class="paragraph">
<p>Kind is Kubernetes in docker and ideal for local development.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://kind.sigs.k8s.io/docs/user/quick-start/">Installation</a></p>
</li>
<li>
<p><a href="https://kind.sigs.k8s.io/docs/user/loadbalancer/">LoadBalancer</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The LoadBalancer will be installed by the <code>configure-k8s.sh</code> script by will require an update to a yaml file to provide the address range available to the LoadBalancer.</p>
</div>
</div>
<div class="sect4">
<h5 id="_minikube"><a class="anchor" href="#_minikube"></a>Minikube</h5>
<div class="paragraph">
<p>Minikube uses one of a selection of drivers to provide a virtualization environment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://minikube.sigs.k8s.io/docs/start/">Installation</a></p>
</li>
<li>
<p><a href="https://minikube.sigs.k8s.io/docs/start/#loadbalancer-deployments">LoadBalancer</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Delete existing Minikube installation if you have any. <code>minikube delete</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_remote_tmc_cluster"><a class="anchor" href="#_remote_tmc_cluster"></a>Remote TMC Cluster</h5>
<div class="paragraph">
<p><a href="https://tanzu.vmware.com/mission-control">Tanzu Mission Control</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_building_and_loading_containers"><a class="anchor" href="#_building_and_loading_containers"></a>B.5.3. Building and loading containers.</h4>
<div class="paragraph">
<p>For local development you need control of the containers used in the local environment.</p>
</div>
<div class="paragraph">
<p>In order to ensure to manage the specific versions of data flow and skipper containers you can set SKIPPER_VERSION and DATAFLOW_VERSION environmental variable and then invoke <code>./images/pull-dataflow.sh</code> and <code>./images/pull-skipper.sh</code> or if you want to use a locally built application you can invoke <code>./images/build-skipper-image.sh</code> and <code>./images/build-dataflow.sh</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_k8s_environment"><a class="anchor" href="#_configure_k8s_environment"></a>B.5.4. Configure k8s environment</h4>
<div class="paragraph">
<p>You can invoke one of the following scripts to choose the type of installation you are targeting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./k8s/use-kind.sh [&lt;namespace&gt;] [&lt;database&gt;] [&lt;broker&gt;]
./k8s/use-mk-docker.sh [&lt;namespace&gt;] [&lt;database&gt;] [&lt;broker&gt;]
./k8s/use-mk-kvm2.sh [&lt;namespace&gt;] [&lt;database&gt;] [&lt;broker&gt;]
./k8s/use-mk.sh &lt;driver&gt; [&lt;namespace&gt;] [&lt;database&gt;] [&lt;broker&gt;] <i class="conum" data-value="1"></i><b>(1)</b>
./k8s/use-tmc.sh &lt;cluster-name&gt; [&lt;namespace&gt;] [&lt;database&gt;] [&lt;broker&gt;]
./k8s/use-gke.sh &lt;cluster-name&gt; [&lt;namespace&gt;] [&lt;database&gt;] [&lt;broker&gt;]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>&lt;driver&gt; must be one of <code>kvm2</code>, <code>docker</code>, <code>vmware</code>, <code>virtualbox</code>, <code>vmwarefusion</code> or <code>hyperkit</code>. <code>docker</code> is the recommended option for local development.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>&lt;namespace&gt;</code> will be <code>default</code> if not provided. The default <code>&lt;database&gt;</code> is <code>postgresql</code> and the default <code>&lt;broker&gt;</code> is <code>kafka</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since these scripts export environmental variable they need to be executes as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">source ./k8s/use-mk-docker.sh test-ns postgresql rabbitmq</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_tmc_or_gke_cluster_in_cloud"><a class="anchor" href="#_tmc_or_gke_cluster_in_cloud"></a>TMC or GKE Cluster in Cloud</h5>
<div class="paragraph">
<p>The cluster must exist before use and you should use the relevant cli to login before executing <code>source ./k8s/use-gke.sh</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_create_local_cluster"><a class="anchor" href="#_create_local_cluster"></a>Create Local Cluster.</h5>
<div class="paragraph">
<p>The following script will create the local cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># Optionally add to control cpu and memory allocation.
export MK_ARGS="--cpus=8 --memory=12g"
./k8s/configure-k8s.sh</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For <strong>kind</strong> follow instruction to update <code>./k8s/yaml/metallb-configmap.yaml</code> and then apply using <code>kubectl apply -f ./k8s/yaml/metallb-configmap.yaml</code></p>
</li>
<li>
<p>For <strong>minikube</strong> launch a new shell and execute <code>minikube tunnel</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_deploy_spring_cloud_data_flow_2"><a class="anchor" href="#_deploy_spring_cloud_data_flow_2"></a>Deploy Spring Cloud Data Flow.</h5>
<div class="paragraph">
<p>The <code>use-*</code> scripts will configure the values of BROKER and DATABASE.</p>
</div>
<div class="sect5">
<h6 id="_configure_broker"><a class="anchor" href="#_configure_broker"></a>Configure Broker</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">export BROKER=&lt;broker&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>&lt;broker&gt; one of <code>kafka</code> or <code>rabbitmq</code></td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_configure_database"><a class="anchor" href="#_configure_database"></a>Configure Database</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">export DATABASE=&lt;database&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>&lt;database&gt; one of <code>mariadb</code> or <code>postgresql</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Docker credentials need to be configured for Kubernetes to pull the various container images.</p>
</div>
<div class="paragraph">
<p>For Docker Hub you can create a personal free account and use a personal access token as your password.</p>
</div>
<div class="paragraph">
<p>Test your docker login using <code>./k8s/docker-login.sh</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">export DOCKER_SERVER=https://docker.io
export DOCKER_USER=&lt;docker-userid&gt;
export DOCKER_PASSWORD=&lt;docker-password&gt;
export DOCKER_EMAIL=&lt;email-of-docker-use&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set the version of Spring Cloud Data Flow and Skipper.</p>
</div>
<div class="paragraph">
<p>This example shows the versions of the current development snapshot.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">export DATAFLOW_VERSION=2.11.0-SNAPSHOT
export SKIPPER_VERSION=2.11.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before you can install SCDF you will need to pull the following images to ensure they are present for uploading to the k8s cluster.</p>
</div>
<div class="paragraph">
<p>Use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./images/pull-app-images.sh
./images/pull-dataflow.sh
./images/pull-skipper.sh
./images/pull-composed-task-runner.sh</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./k8s/install-scdf.sh
source ./k8s/export-dataflow-ip.sh</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can now execute scripts from <code>./shell</code> to deploy some simple streams and tasks. You can also run <code>./shell/shell.sh</code> to run the Spring Cloud Data Flow Shell.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to start fresh you use the following to delete the SCDF deployment and then run <code>./k8s/install-scdf.sh</code> to install it again.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_delete_the_deployment_from_the_cluster"><a class="anchor" href="#_delete_the_deployment_from_the_cluster"></a>Delete the deployment from the cluster.</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./k8s/delete-scdf.sh</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_delete_the_cluster"><a class="anchor" href="#_delete_the_cluster"></a>Delete the cluster</h5>
<div class="paragraph">
<p>This script will also delete the TMC cluster if you have configured one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./k8s/destroy-k8s.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_utilities"><a class="anchor" href="#_utilities"></a>B.5.5. Utilities</h4>
<div class="paragraph">
<p>The following list of utilities may prove useful.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://k9scli.io/">k9s</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">k9s is a text based monitor to explore the Kubernetes cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://github.com/boz/kail">kail</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extra and tail the logs of various pods based on various naming criteria.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_kail"><a class="anchor" href="#_kail"></a><code>kail</code></h5>
<div class="ulist">
<ul>
<li>
<p>Using kail to log activity related to a specific stream.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kail --label=spring-group-id=&lt;stream-name&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Using kail to log all pods in specific namespace.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kail --ns=&lt;namespace&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scripts_2"><a class="anchor" href="#_scripts_2"></a>B.5.6. Scripts</h4>
<div class="paragraph">
<p>Some of the scripts apply to local containers as well and can be found in <code>src/local</code>, the Kubernetes specific scripts are in <code>deploy/k8s</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Script</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/build-app-images.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build all images of Restaurant Sample Stream Apps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/pull-app-images.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull all images of Restaurant Sample Stream Apps from Docker Hub</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/pull-dataflow.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull dataflow from DockerHub based on <code>DATAFLOW_VERSION</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/pull-scdf-pro.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull Dataflow Pro from Tanzu Network based on <code>SCDF_PRO_VERSION</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/pull-skipper.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pull Skipper from DockerHub base on the <code>SKIPPER_VERSION</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/build-dataflow-image.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build a docker image from the local repo of Dataflow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/build-scdf-pro-image.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build a docker image from the local repo of Dataflow Pro. Set <code>USE_PRO=true</code> in environment to use Dataflow Pro</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./images/build-skipper-image.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build a docker image from the local repo of Skipper.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/configure-k8s.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure the Kubernetes environment based on your configuration of K8S_DRIVER.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/delete-scdf.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete all Kubernetes resources create by the deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/destroy-k8s.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete cluster, kind or minikube.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/export-dataflow-ip.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export the url of the data flow server to <code>DATAFLOW_IP</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/export-http-url.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export the url of an http source of a specific flow by name to <code>HTTP_APP_URL</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/install-scdf.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure and deploy all the containers for Spring Cloud Dataflow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/load-images.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load all container images required by tests into kind or minikube to ensure you have control over what is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/load-image.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load a specific container image into local kind or minikube.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>src/local/local-k8s-acceptance-tests.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execute acceptance tests against cluster where <code>DATAFLOW_IP</code> is pointing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./k8s/register-apps.sh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register the Task and Stream apps used by the unit tests.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please report any errors with the scripts along with detail information about the relevant environment.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="faqs"><a class="anchor" href="#faqs"></a>B.6. Frequently Asked Questions</h3>
<div class="paragraph">
<p>In this section, we review the frequently asked questions for Spring Cloud Data Flow.
See the <a href="https://dataflow.spring.io/docs/resources/faq/">Frequently Asked Questions</a> section of the microsite for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="identity-providers"><a class="anchor" href="#identity-providers"></a>Appendix C: Identity Providers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix contains information how specific providers can be set up to work
with Data Flow security.</p>
</div>
<div class="paragraph">
<p>At this writing, Azure is the only identity provider.</p>
</div>
<div class="sect2">
<h3 id="appendix-identity-provider-azure"><a class="anchor" href="#appendix-identity-provider-azure"></a>C.1. Azure</h3>
<div class="paragraph">
<p>Azure AD (Active Directory) is a fully fledged identity provider that provide a wide range of features
around authentication and authorization. As with any other provider, it has its
own nuances, meaning care must be taken to set it up.</p>
</div>
<div class="paragraph">
<p>In this section, we go through how OAuth2 setup is done for AD and
Spring Cloud Data Flow.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need full organization access rights to set up everything correctly.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="appendix-identity-provider-azure-adenv"><a class="anchor" href="#appendix-identity-provider-azure-adenv"></a>C.1.1. Creating a new AD Environment</h4>
<div class="paragraph">
<p>To get started, create a new Active Directory environment. Choose a
type as Azure Active Directory (not the b2c type) and then pick your organization name and
initial domain. The following image shows the settings:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure-create-ad-env.png" alt="Create AD Environment" width="60%">
</div>
</div>
</div>
<div class="sect3">
<h4 id="appendix-identity-provider-azure-appreg"><a class="anchor" href="#appendix-identity-provider-azure-appreg"></a>C.1.2. Creating a New App Registration</h4>
<div class="paragraph">
<p>App registration is where OAuth clients are created to get used by OAuth
applications. At minimum, you need to create two clients, one for the
Data Flow and Skipper servers and one for the Data Flow shell, as these two have
slightly different configurations. Server applications can be considered to be
trusted applications while shell is not trusted (because users can see its full
configuration).</p>
</div>
<div class="paragraph">
<p>NOTE:
We recommend using the same OAuth client for both the Data Flow and the Skipper servers. While
you can use different clients, it currently would not provide any value, as the
configurations needs to be the same.</p>
</div>
<div class="paragraph">
<p>The following image shows the settings for creating a a new app registration:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure-create-app-registration.png" alt="Create App Registration" width="60%">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A client secret, when needed, is created under <code>Certificates &amp; secrets</code> in AD.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="appendix-identity-provider-azure-exposeapi"><a class="anchor" href="#appendix-identity-provider-azure-exposeapi"></a>C.1.3. Expose Dataflow APIs</h4>
<div class="paragraph">
<p>To prepare OAuth scopes, create one for each Data Flow security role. In this example, those would be</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>api://dataflow-server/dataflow.create</code></p>
</li>
<li>
<p><code>api://dataflow-server/dataflow.deploy</code></p>
</li>
<li>
<p><code>api://dataflow-server/dataflow.destroy</code></p>
</li>
<li>
<p><code>api://dataflow-server/dataflow.manage</code></p>
</li>
<li>
<p><code>api://dataflow-server/dataflow.schedule</code></p>
</li>
<li>
<p><code>api://dataflow-server/dataflow.modify</code></p>
</li>
<li>
<p><code>api://dataflow-server/dataflow.view</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following image shows the APIs to expose:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure-expose-apis.png" alt="Expose APIs" width="60%">
</div>
</div>
<div class="paragraph">
<p>Previously created scopes needs to be added as API Permissions, as the following image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure-api-permissions.png" alt="Api Permissions" width="60%">
</div>
</div>
</div>
<div class="sect3">
<h4 id="appendix-identity-provider-azure-privclient"><a class="anchor" href="#appendix-identity-provider-azure-privclient"></a>C.1.4. Creating a Privileged Client</h4>
<div class="paragraph">
<p>For the OAuth client, which is about to use password grants, the same API permissions need
to be created for the OAuth client as were used for the server (described in the previous section).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All these permissions need to be granted with admin privileges.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows the privileged settings:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure-privileged-client.png" alt="Privileged Client" width="60%">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Privileged client needs a client secret, which needs to be exposed to a client
configuration when used in a shell. If you do not want to expose that secret, use the
<a href="#appendix-identity-provider-azure-pubclient">Creating a Public Client</a> public client.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="appendix-identity-provider-azure-pubclient"><a class="anchor" href="#appendix-identity-provider-azure-pubclient"></a>C.1.5. Creating a Public Client</h4>
<div class="paragraph">
<p>A public client is basically a client without a client secret and with its type set to public.</p>
</div>
<div class="paragraph">
<p>The following image shows the configuration of a public client:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure-public-client.png" alt="Public Client" width="60%">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_examples"><a class="anchor" href="#_configuration_examples"></a>C.1.6. Configuration Examples</h4>
<div class="paragraph">
<p>This section contains configuration examples for the Data Flow and Skipper servers and the shell.</p>
</div>
<div class="paragraph">
<p>To starting a Data Flow server:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-server.jar \
  --spring.config.additional-location=dataflow-azure.yml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dataflow-azure.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    dataflow:
      security:
        authorization:
          provider-role-mappings:
            dataflow-server:
              map-oauth-scopes: true
              role-mappings:
                ROLE_VIEW: dataflow.view
                ROLE_CREATE: dataflow.create
                ROLE_MANAGE: dataflow.manage
                ROLE_DEPLOY: dataflow.deploy
                ROLE_DESTROY: dataflow.destroy
                ROLE_MODIFY: dataflow.modify
                ROLE_SCHEDULE: dataflow.schedule
  security:
    oauth2:
      client:
        registration:
          dataflow-server:
            provider: azure
            redirect-uri: '{baseUrl}/login/oauth2/code/{registrationId}'
            client-id: &lt;client id&gt;
            client-secret: &lt;client secret&gt;
            scope:
            - openid
            - profile
            - email
            - offline_access
            - api://dataflow-server/dataflow.view
            - api://dataflow-server/dataflow.deploy
            - api://dataflow-server/dataflow.destroy
            - api://dataflow-server/dataflow.manage
            - api://dataflow-server/dataflow.modify
            - api://dataflow-server/dataflow.schedule
            - api://dataflow-server/dataflow.create
        provider:
          azure:
            issuer-uri: https://login.microsoftonline.com/799dcfde-b9e3-4dfc-ac25-659b326e0bcd/v2.0
            user-name-attribute: name
      resourceserver:
        jwt:
          jwk-set-uri: https://login.microsoftonline.com/799dcfde-b9e3-4dfc-ac25-659b326e0bcd/discovery/v2.0/keys</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To start a Skipper server:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-skipper-server.jar \
  --spring.config.additional-location=skipper-azure.yml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">skipper-azure.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  cloud:
    skipper:
      security:
        authorization:
          provider-role-mappings:
            skipper-server:
              map-oauth-scopes: true
              role-mappings:
                ROLE_VIEW: dataflow.view
                ROLE_CREATE: dataflow.create
                ROLE_MANAGE: dataflow.manage
                ROLE_DEPLOY: dataflow.deploy
                ROLE_DESTROY: dataflow.destroy
                ROLE_MODIFY: dataflow.modify
                ROLE_SCHEDULE: dataflow.schedule
  security:
    oauth2:
      client:
        registration:
          skipper-server:
            provider: azure
            redirect-uri: '{baseUrl}/login/oauth2/code/{registrationId}'
            client-id: &lt;client id&gt;
            client-secret: &lt;client secret&gt;
            scope:
            - openid
            - profile
            - email
            - offline_access
            - api://dataflow-server/dataflow.view
            - api://dataflow-server/dataflow.deploy
            - api://dataflow-server/dataflow.destroy
            - api://dataflow-server/dataflow.manage
            - api://dataflow-server/dataflow.modify
            - api://dataflow-server/dataflow.schedule
            - api://dataflow-server/dataflow.create
        provider:
          azure:
            issuer-uri: https://login.microsoftonline.com/799dcfde-b9e3-4dfc-ac25-659b326e0bcd/v2.0
            user-name-attribute: name
      resourceserver:
        jwt:
          jwk-set-uri: https://login.microsoftonline.com/799dcfde-b9e3-4dfc-ac25-659b326e0bcd/discovery/v2.0/keys</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To start a shell and (optionally) pass credentials as options:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-shell.jar \
  --spring.config.additional-location=dataflow-azure-shell.yml \
  --dataflow.username=&lt;USERNAME&gt; \
  --dataflow.password=&lt;PASSWORD&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dataflow-azure-shell.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  security:
    oauth2:
      client:
        registration:
          dataflow-shell:
            provider: azure
            client-id: &lt;client id&gt;
            client-secret: &lt;client secret&gt;
            authorization-grant-type: password
            scope:
            - offline_access
            - api://dataflow-server/dataflow.create
            - api://dataflow-server/dataflow.deploy
            - api://dataflow-server/dataflow.destroy
            - api://dataflow-server/dataflow.manage
            - api://dataflow-server/dataflow.modify
            - api://dataflow-server/dataflow.schedule
            - api://dataflow-server/dataflow.view
        provider:
          azure:
            issuer-uri: https://login.microsoftonline.com/799dcfde-b9e3-4dfc-ac25-659b326e0bcd/v2.0</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A Public Client requires <strong>App Roles</strong> with the value set the same as the internal permissions <code>[dataflow.create, dataflow.deploy, dataflow.destroy, dataflow.manage, dataflow.modify, dataflow.schedule, dataflow.view]</code> to ensure they are added to the access token.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting a public shell and (optionally) pass credentials as options:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -jar spring-cloud-dataflow-shell.jar \
  --spring.config.additional-location=dataflow-azure-shell-public.yml \
  --dataflow.username=&lt;USERNAME&gt; \
  --dataflow.password=&lt;PASSWORD&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dataflow-azure-shell-public.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  security:
    oauth2:
      client:
        registration:
          dataflow-shell:
            provider: azure
            client-id: &lt;client id&gt;
            authorization-grant-type: password
            client-authentication-method: post
            scope:
            - offline_access
            - api://dataflow-server/dataflow.create
            - api://dataflow-server/dataflow.deploy
            - api://dataflow-server/dataflow.destroy
            - api://dataflow-server/dataflow.manage
            - api://dataflow-server/dataflow.modify
            - api://dataflow-server/dataflow.schedule
            - api://dataflow-server/dataflow.view
        provider:
          azure:
            issuer-uri: https://login.microsoftonline.com/799dcfde-b9e3-4dfc-ac25-659b326e0bcd/v2.0</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-boot3"><a class="anchor" href="#appendix-boot3"></a>Appendix D: Spring Boot 3.x Support</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_stream_applications"><a class="anchor" href="#_stream_applications"></a>D.1. Stream Applications</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow supports both Spring Boot <code>2.x</code> and <code>3.x</code> based Stream applications.</p>
</div>
<div class="sect3">
<h4 id="_differences_in_3_x"><a class="anchor" href="#_differences_in_3_x"></a>D.1.1. Differences in 3.x</h4>
<div class="paragraph">
<p>Be aware of the following areas that have changed across versions.</p>
</div>
<div class="sect4">
<h5 id="_metrics_configuration_properties"><a class="anchor" href="#_metrics_configuration_properties"></a>Metrics Configuration Properties</h5>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The following does <strong>NOT</strong> apply when configuring metrics for the Dataflow or Skipper server as they both run on Spring Boot 2.x. It is only applicable to applications managed by Dataflow.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The naming of the metrics registry-specific properties differ as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>2.x</code>: <code>management.metrics.export.&lt;meter-registry&gt;.&lt;property-path&gt;</code></p>
</li>
<li>
<p><code>3.x</code>: <code>management.&lt;meter-registry&gt;.metrics.export.&lt;property-path&gt;</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Example:</div>
<ul>
<li>
<p><code>2.x</code>: <code>management.metrics.export.prometheus.enabled=true</code></p>
</li>
<li>
<p><code>3.x</code>: <code>management.prometheus.metrics.export.enabled=true</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
One exception to this rule is the Prometheus RSocket Proxy which still runs on Spring Boot <code>2.x</code> and therefore expects the properties in the <code>management.metrics.export.prometheus.rsocket.*</code> format.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Be sure that you use the <code>2.x</code> format when configuring <code>2.x</code> based stream apps and the <code>3.x</code> format when configuring <code>3.x</code> based stream apps.</p>
</div>
</div>
<div class="sect4">
<h5 id="_dataflow_metrics_property_replication"><a class="anchor" href="#_dataflow_metrics_property_replication"></a>Dataflow Metrics Property Replication</h5>
<div class="paragraph">
<p>By default, Dataflow replicates relevant metrics properties that it has been configured with to all launched stream and task applications.
This replication has been updated to target both the <code>2.x</code> and <code>3.x</code> expected formats.
In other words, if your <code>2.x</code> stream apps are currently inheriting the Dataflow metrics configuration, they will continue to do so for your <code>3.x</code> stream apps.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pre_packaged_stream_applications"><a class="anchor" href="#_pre_packaged_stream_applications"></a>D.1.2. Pre-packaged Stream Applications</h4>
<div class="paragraph">
<p>The default <a href="#ootb-stream-apps">pre-packaged stream applications</a> are based on Spring Boot <code>2.x</code>.
To use the latest pre-packaged apps based on Spring Boot <code>3.x</code>, you must manually register the apps (relevant coordinates below).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="small">Stream Applications</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><a href="https://repo.spring.io/artifactory/milestone/org/springframework/cloud/stream/app/stream-applications-descriptor/2022.0.0-RC2/stream-applications-descriptor-2022.0.0-RC2.stream-apps-rabbit-maven">RabbitMQ + Maven</a></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><a href="https://repo.spring.io/artifactory/milestone/org/springframework/cloud/stream/app/stream-applications-descriptor/2022.0.0-RC2/stream-applications-descriptor-2022.0.0-RC2.stream-apps-rabbit-docker">RabbitMQ + Docker</a></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><a href="https://repo.spring.io/artifactory/milestone/org/springframework/cloud/stream/app/stream-applications-descriptor/2022.0.0-RC2/stream-applications-descriptor-2022.0.0-RC2.stream-apps-kafka-maven">Kafka + Maven</a></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><a href="https://repo.spring.io/artifactory/milestone/org/springframework/cloud/stream/app/stream-applications-descriptor/2022.0.0-RC2/stream-applications-descriptor-2022.0.0-RC2.stream-apps-kafka-docker">Kafka + Docker</a></span></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="small">HTTP Repository Location for Apps</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><a href="https://repo.spring.io/artifactory/milestone/org/springframework/cloud/stream/app/stream-applications-descriptor/2022.0.0-RC2/stream-applications-descriptor-2022.0.0-RC2.rabbit-apps-maven-repo-url.properties">RabbitMQ</a></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="small"><a href="https://repo.spring.io/artifactory/milestone/org/springframework/cloud/stream/app/stream-applications-descriptor/2022.0.0-RC2/stream-applications-descriptor-2022.0.0-RC2.kafka-apps-maven-repo-url.properties">Kafka</a></span></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>3.x</code> apps are currentlyf available as a candidate release (<code>RC2</code>)
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_cloud_task_batch_applications"><a class="anchor" href="#_spring_cloud_task_batch_applications"></a>D.2. Spring Cloud Task / Batch Applications</h3>
<div class="paragraph">
<p>The database schemas for Spring Cloud Task 3.x and Spring Batch 5.x have been modified in the versions that forms part of Spring Boot 3.x</p>
</div>
<div class="paragraph">
<p>Spring Cloud Data Flow will create set of tables for the Boot 3.x version that is prefixed by <code>BOOT3_</code> and will configure the <code>spring.cloud.task.tablePrefix</code> and <code>spring.batch.jdbc.table-prefix</code> with the correct values.</p>
</div>
<div class="paragraph">
<p>In order to know that the specific task is a Boot 3.x application the version will have to be provided as part of registration. The rest endpoints accepts a <code>bootVersion=3</code> parameter and the shell commands accepts <code>--bootVersion 3</code></p>
</div>
<div class="paragraph">
<p>Since there are now multiple sets of tables that represents task and batch executions, each schema has been assigned a schemaTarget name. This value form part of queries when retrieving execution data. The UI takes care of this by using the embedded resource links. If you are using the REST API directly you will need to update those requests.</p>
</div>
<div class="sect3">
<h4 id="_pre_packaged_task_batch_applications"><a class="anchor" href="#_pre_packaged_task_batch_applications"></a>D.2.1. Pre-packaged Task / Batch Applications</h4>
<div class="paragraph">
<p>The default <a href="#ootb-task-apps">pre-packaged task / batch applications</a> are based on Spring Boot <code>2.x</code>, Spring Cloud Task <code>2.x</code>, and Spring Batch <code>4.x</code>.
To use the latest pre-packaged apps based on Spring Boot <code>3.x</code>, Spring Cloud Task <code>3.x</code>, and Spring Batch <code>5.x</code>, you must manually register the apps using the properties below.</p>
</div>
<div class="listingblock small">
<div class="title">Maven coordinates</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">task.timestamp=maven://io.spring:timestamp-task:3.0.0
task.timestamp.bootVersion=3

task.timestamp-batch=maven://io.spring:timestamp-batch-task:3.0.0
task.timestamp-batch.bootVersion=3</code></pre>
</div>
</div>
<div class="listingblock small small">
<div class="title">Docker coordinates</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">task.timestamp=docker:springcloudtask/timestamp-task:3.0.0
task.timestamp.bootVersion=3

task.timestamp-batch=docker:springcloudtask/timestamp-batch-task:3.0.0
task.timestamp-batch.bootVersion=3</code></pre>
</div>
</div>
<div class="admonitionblock tip small">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The properties can be used when registering an app in the Dataflow UI or the Dataflow shell CLI.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_composed_task_runner_2"><a class="anchor" href="#_composed_task_runner_2"></a>D.2.2. Composed Task Runner</h4>
<div class="paragraph">
<p>Composed Task Runner for Spring Cloud Data Flow 2.11.x supports the launching of both Spring Boot <code>3.x</code>/<code>2.x</code>, Spring Cloud Task <code>3.x</code>/<code>2.x</code>, and Spring Batch <code>5.x</code>/<code>4.x</code> applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When registering Task applications verify that the correct <code>Spring Boot Version</code> is selected.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. If the database was migrated from MySQL and uses sequence tables use <code>org.hibernate.dialectMariaDB102Dialect</code>. Please note that Hibernate selects incorrect Dialect when using MariaDB 11.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. SSL is disabled in this example, adjust accordingly for your environment and requirements
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. If the database was migrated from MySQL and uses sequence tables use <code>org.hibernate.dialectMariaDB102Dialect</code>. Please note that Hibernate selects incorrect Dialect when using MariaDB 11.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. SSL is disabled in this example, adjust accordingly for your environment and requirements
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-09-21 00:49:16 UTC
</div>
</div>
</div>
  </div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>if (window.parent == window) {(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-2728886-23', 'auto', {'siteSpeedSampleRate': 100});ga('send', 'pageview');}</script></body>
</html>